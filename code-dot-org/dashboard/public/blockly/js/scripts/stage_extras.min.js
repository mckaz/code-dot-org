webpackJsonp([23],{2134:function(e,t,r){"use strict";function n(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;return Math.floor(r*(t+.5)-e.pegmanHeight/2+e.pegmanYOffset)}function i(e,t,r,i,s,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:50,l=e.pegmanXOffset||0;t.setAttribute("x",i*a-o*e.pegmanWidth+1+l),t.setAttribute("y",n(e,s)),r.setAttribute("x",i*a+1+l),r.setAttribute("y",t.getAttribute("y"))}function s(e,t,r,n){var s,a,f,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50,b=n.COLS*h,g=n.ROWS*h,y=document.createElementNS(o.SVG_NS,"rect");y.setAttribute("width",b),y.setAttribute("height",g),y.setAttribute("fill","#F1EEE7"),y.setAttribute("stroke-width",1),y.setAttribute("stroke","#CCB"),e.appendChild(y),t.background&&(f=document.createElementNS(o.SVG_NS,"image"),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.background),f.setAttribute("height",g),f.setAttribute("width",b),f.setAttribute("x",0),f.setAttribute("y",0),e.appendChild(f)),r.drawMapTiles(e);var m=document.createElementNS(o.SVG_NS,"path");if(m.setAttribute("id","hintPath"),m.setAttribute("stroke","#c00"),m.setAttribute("stroke-width","5"),m.setAttribute("fill","none"),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),e.appendChild(m),r.start){var v=document.createElementNS(o.SVG_NS,"clipPath"),w="pegmanClipPath-"+(0,u.createUuid)();v.setAttribute("id",w);var S=document.createElementNS(o.SVG_NS,"rect");S.setAttribute("id","clipRect"),S.setAttribute("width",t.pegmanWidth),S.setAttribute("height",t.pegmanHeight),v.appendChild(S),e.appendChild(v);var E=document.createElementNS(o.SVG_NS,"image");E.setAttribute("id","pegman"),E.setAttribute("class","pegman-location"),E.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.avatar),E.setAttribute("height",t.pegmanHeight),E.setAttribute("width",21*t.pegmanWidth),E.setAttribute("clip-path","url(#"+w+")"),e.appendChild(E),i(t,E,S,r.start.x,r.start.y,l.default.directionToFrame(r.startDirection));var A=document.createElementNS(o.SVG_NS,"animate");A.setAttribute("id","pegmanFadeoutAnimation"),A.setAttribute("attributeType","CSS"),A.setAttribute("attributeName","opacity"),A.setAttribute("from",1),A.setAttribute("to",0),A.setAttribute("dur","1s"),A.setAttribute("begin","indefinite"),E.appendChild(A)}if(r.finish&&t.goalIdle){var T=document.createElementNS(o.SVG_NS,"image");T.setAttribute("id","finish"),T.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.goalIdle),T.setAttribute("height",c),T.setAttribute("width",d),e.appendChild(T),T.setAttribute("x",h*(r.finish.x+.5)-T.getAttribute("width")/2),T.setAttribute("y",h*(r.finish.y+.9)-T.getAttribute("height")),T.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.goalIdle),T.setAttribute("visibility","visible")}if(t.obstacleIdle){var P=0;for(a=0;a<n.ROWS;a++)for(s=0;s<n.COLS;s++){if(n.getTile(a,s)===p.OBSTACLE){var x=document.createElementNS(o.SVG_NS,"image");x.setAttribute("id","obstacle"+P),x.setAttribute("height",c*t.obstacleScale),x.setAttribute("width",d*t.obstacleScale),x.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.obstacleIdle),x.setAttribute("x",h*(s+.5)-x.getAttribute("width")/2),x.setAttribute("y",h*(a+.9)-x.getAttribute("height")),e.appendChild(x)}++P}}}Object.defineProperty(t,"__esModule",{value:!0}),t.getPegmanYForRow=n,t.displayPegman=i,t.default=s;var o=r(216),a=r(773),l=function(e){return e&&e.__esModule?e:{default:e}}(a),u=r(71),p=l.default.SquareType,c=43,d=50},2752:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=function(){function e(t){n(this,e),this.grid_=t,this.ROWS=this.grid_.length,this.COLS=this.grid_[0].length,this.staticGrids=this.constructor.getAllStaticGrids(this.grid_),this.currentStaticGrid=this.staticGrids[0]}return e.cloneGrid=function(e){return e.map(function(e){return e.map(function(e){return e.clone()})})},e.getAllStaticGrids=function(e){var t=this,r=[e];return e.forEach(function(e,n){e.forEach(function(e,i){e.isVariable()&&function(){var s=e.getPossibleGridAssets(),o=[];s.forEach(function(e){r.forEach(function(r){var s=t.cloneGrid(r);s[n][i]=e,o.push(s)})}),r=o}()})}),r},e.deserialize=function(t,r){return new e(t.map(function(e){return e.map(r.deserialize)}))},e.parseFromOldValues=function(t,r,n){return new e(t.map(function(e,t){return e.map(function(e,i){var s=r&&r[t][i];return n.parseFromOldValues(e,s)})}))},e.prototype.resetDirt=function(){this.forEachCell(function(e){e.resetCurrentValue()})},e.prototype.forEachCell=function(e){this.currentStaticGrid.forEach(function(t,r){t.forEach(function(t,n){e(t,r,n)})})},e.prototype.getAllCells=function(){return this.currentStaticGrid.reduce(function(e,t){return e.concat(t)},[])},e.prototype.getCell=function(e,t){return this.currentStaticGrid[e]&&this.currentStaticGrid[e][t]},e.prototype.isDirt=function(e,t){var r=this.getCell(e,t);return r&&r.isDirt()},e.prototype.getTile=function(e,t){var r=this.getCell(e,t);return r&&r.getTile()},e.prototype.getValue=function(e,t){var r=this.getCell(e,t);return r&&r.getCurrentValue()},e.prototype.setValue=function(e,t,r){this.currentStaticGrid[e]&&this.currentStaticGrid[e][t]&&this.currentStaticGrid[e][t].setCurrentValue(r)},e.prototype.getVariableCell=function(e,t){if(this.grid_[e]&&this.grid_[e][t])return this.grid_[e][t]},e.prototype.useGridWithId=function(e){this.currentStaticGrid=this.staticGrids[e],this.resetDirt()},e.prototype.clone=function(){this.constructor.cloneGrid(this.grid_)},e.prototype.hasMultiplePossibleGrids=function(){return this.staticGrids.length>1},e}()},2975:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stageOfBonusLevels=t.bonusLevel=void 0;var n=r(1),i=t.bonusLevel={id:n.PropTypes.number.isRequired,levelId:n.PropTypes.number.isRequired,map:n.PropTypes.array,name:n.PropTypes.string.isRequired,skin:n.PropTypes.string,solutionImageUrl:n.PropTypes.string,startDirection:n.PropTypes.number,type:n.PropTypes.string.isRequired};t.stageOfBonusLevels={stageNumber:n.PropTypes.number.isRequired,levels:n.PropTypes.arrayOf(n.PropTypes.shape(i))}},3462:function(e,t,r){r(151),r(152),e.exports=r(3463)},3463:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r(1),s=n(i),o=r(32),a=n(o),l=r(3464),u=n(l),p=r(53),c=r(787),d=document.querySelector("script[data-extras]"),f=JSON.parse(d.dataset.extras),h=JSON.parse(d.dataset.widgetVisible),b=JSON.parse(d.dataset.widgetTypes),g=(0,c.getStore)();a.default.render(s.default.createElement(p.Provider,{store:g},s.default.createElement(u.default,{stageNumber:f.stageNumber,nextLevelPath:f.nextLevelPath,bonusLevels:f.bonusLevels,showProjectWidget:h,projectTypes:b})),document.querySelector("#stage-extras"))},3464:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),l=n(a),u=r(40),p=n(u),c=r(44),d=n(c),f=r(3465),h=n(f),b=r(2832),g=n(b),y=r(2975),m={h2:{fontSize:24,fontFamily:'"Gotham 4r"',color:d.default.charcoal}},v=function(e){function t(){return i(this,t),s(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=/stage/.test(this.props.nextLevelPath)?p.default.extrasNextLesson({number:this.props.stageNumber+1}):p.default.extrasNextFinish();return l.default.createElement("div",null,l.default.createElement("h1",null,p.default.extrasStageNumberCompleted({number:this.props.stageNumber})),l.default.createElement("h2",{style:m.h2},p.default.continue()),l.default.createElement("a",{href:this.props.nextLevelPath},l.default.createElement("button",{className:"btn btn-large btn-primary",style:{marginBottom:20}},e)),this.props.bonusLevels&&Object.keys(this.props.bonusLevels).length>0?l.default.createElement(h.default,{bonusLevels:this.props.bonusLevels}):l.default.createElement("p",null,p.default.extrasNoBonusLevels()),this.props.showProjectWidget&&l.default.createElement(g.default,{projectTypes:this.props.projectTypes}),l.default.createElement("div",{className:"clear"}))},t}(l.default.Component);v.propTypes={stageNumber:a.PropTypes.number.isRequired,nextLevelPath:a.PropTypes.string.isRequired,showProjectWidget:a.PropTypes.bool,projectTypes:a.PropTypes.arrayOf(a.PropTypes.string),bonusLevels:a.PropTypes.arrayOf(a.PropTypes.shape(y.stageOfBonusLevels))},t.default=v,e.exports=t.default},3465:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a,l,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p=r(156),c=n(p),d=r(83),f=n(d),h=r(1),b=n(h),g=r(3466),y=n(g),m=r(3467),v=n(m),w=r(44),S=n(w),E=r(40),A=n(E),T=r(2975),P=r(53),x=r(498),_=(0,f.default)(c.default),O={bonusLevel:{width:200,textAlign:"center",marginRight:10,float:"left"},bonusLevelsTitle:{fontSize:24,fontFamily:'"Gotham 4r"',color:S.default.charcoal},challengeRow:{clear:"both",overflow:"hidden",display:"inline-block",position:"relative",whiteSpace:"normal",transition:"left 0.25s ease-out",paddingBottom:10},challenges:{display:"inline-block",overflowX:"hidden",whiteSpace:"nowrap",transition:"width 0.1s ease-out",verticalAlign:"top"},solutionImage:{border:"1px solid "+S.default.lighter_gray,marginBottom:5,width:400,height:400,maxWidth:"initial"},stageNumberHeading:{textAlign:"center"},arrow:{fontSize:40,cursor:"pointer",verticalAlign:-30},arrowDisabled:{color:S.default.lighter_gray,cursor:"default"}},N=function(e){function t(){return i(this,t),s(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){return this.props.perfected?b.default.createElement("button",{className:"btn btn-large"},A.default.review()):b.default.createElement("button",{className:"btn btn-large btn-primary"},A.default.tryIt())},t}(b.default.Component);N.propTypes={perfected:h.PropTypes.bool.isRequired};var C=function(e){function t(){return i(this,t),s(this,e.apply(this,arguments))}return o(t,e),t.prototype.renderWithMazeThumbnail=function(){return b.default.createElement("div",{style:O.bonusLevel},b.default.createElement("a",{href:"?id="+this.props.id},b.default.createElement(v.default,{size:200,completed:this.props.perfected},b.default.createElement(y.default,this.props)),b.default.createElement(N,{perfected:this.props.perfected})))},t.prototype.renderSolutionImageThumbnail=function(){return b.default.createElement("div",{style:O.bonusLevel},b.default.createElement("a",{href:"?id="+this.props.id},b.default.createElement(v.default,{size:200,completed:this.props.perfected},b.default.createElement("img",{src:this.props.solutionImageUrl,style:O.solutionImage})),b.default.createElement(N,{perfected:this.props.perfected})))},t.prototype.render=function(){return["Maze","Karel"].includes(this.props.type)?this.renderWithMazeThumbnail():this.props.solutionImageUrl?this.renderSolutionImageThumbnail():b.default.createElement("a",{href:"?id="+this.props.id},this.props.name)},t}(b.default.Component);C.propTypes=u({},T.bonusLevel,{perfected:h.PropTypes.bool.isRequired});var L=(0,P.connect)(function(e,t){return{perfected:(0,x.isPerfect)(e.progress,t.levelId)}})(C);t.default=(0,f.default)((l=a=function(e){function t(r){i(this,t);var n=s(this,e.call(this,r));return n.nextStage=function(){n.state.stageIndex<n.props.bonusLevels.length-1&&n.setState({stageIndex:n.state.stageIndex+1})},n.previousStage=function(){n.state.stageIndex>0&&n.setState({stageIndex:n.state.stageIndex-1})},n.state={stageIndex:r.bonusLevels.length-1},n}return o(t,e),t.prototype.render=function(){var e=this,t=210*this.props.bonusLevels[this.state.stageIndex].levels.length-10,r=this.props.bonusLevels.filter(function(t){return t.stageNumber<e.props.bonusLevels[e.state.stageIndex].stageNumber}).reduce(function(e,t){return e+t.levels.length},0),n=-1*r*210,i=0===this.state.stageIndex,s=this.state.stageIndex===this.props.bonusLevels.length-1;return b.default.createElement("div",null,b.default.createElement("h2",{style:O.bonusLevelsTitle},A.default.extrasTryAChallenge()),b.default.createElement(_,{icon:"caret-left",onClick:this.previousStage,style:[O.arrow,i&&O.arrowDisabled]}),b.default.createElement("div",{style:u({},O.challenges,{width:t})},this.props.bonusLevels.map(function(t){return b.default.createElement("div",{key:t.stageNumber,style:u({},O.challengeRow,{left:n,width:210*t.levels.length})},b.default.createElement("h3",{style:O.stageNumberHeading},A.default.extrasStageNChallenges({stageNumber:e.props.bonusLevels[e.state.stageIndex].stageNumber})),t.levels.map(function(e){return b.default.createElement(L,u({key:e.id},e))}))})),b.default.createElement(_,{icon:"caret-right",onClick:this.nextStage,style:[O.arrow,s&&O.arrowDisabled]}))},t}(b.default.Component),a.propTypes={bonusLevels:h.PropTypes.arrayOf(h.PropTypes.shape(T.stageOfBonusLevels))},l)),e.exports=t.default},3466:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),l=n(a),u=r(737),p=n(u),c=r(2760),d=n(c),f=r(1299),h=r(2752),b=n(h),g=r(2134),y=n(g),m=r(1153),v=n(m),w=function(e){function t(){return i(this,t),s(this,e.apply(this,arguments))}return o(t,e),t.prototype.componentDidMount=function(){var e=d.default.load(v.default,this.props.skin),t={},r=(0,f.getSubtypeForSkin)(this.props.skin),n=new r(t,{skin:e,level:this.props.level});t.map=this.props.serializedMaze?b.default.deserialize(this.props.serializedMaze,n.getCellClass()):b.default.parseFromOldValues(this.props.map,null,n.getCellClass()),n.initStartFinish(),n.createDrawer(this.svg),n.initWallMap(),(0,y.default)(this.svg,e,n,t.map)},t.prototype.render=function(){var e=this;return l.default.createElement(p.default,null,l.default.createElement("svg",{width:"400",height:"400",ref:function(t){e.svg=t}}))},t}(l.default.Component);w.propTypes={level:a.PropTypes.shape({startDirection:a.PropTypes.number.isRequired,flowerType:a.PropTypes.string}).isRequired,map:a.PropTypes.array,serializedMaze:a.PropTypes.array,skin:a.PropTypes.string.isRequired},w.defaultProps={scale:1},t.default=w,e.exports=t.default},3467:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=r(1),u=n(l),p=r(44),c=n(p),d={wrapper:{display:"inline-block",position:"relative",transformOrigin:"0 0"},overlay:{width:400,height:400,backgroundColor:"rgba(0, 255, 0, 0.3)",position:"absolute",top:0,left:0,textAlign:"center"},check:{fontSize:350,lineHeight:"400px",color:"#fff",opacity:.8}},f=function(e){function t(){return i(this,t),s(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=(this.props.size||400)/400;return u.default.createElement("div",{style:{width:this.props.size,height:this.props.size,display:"inline-block",overflow:"hidden",border:"1px solid "+c.default.lighter_gray}},u.default.createElement("div",{style:a({transform:"scale("+e+")"},d.wrapper)},this.props.children,this.props.completed&&u.default.createElement("div",{style:d.overlay},u.default.createElement("i",{className:"fa fa-check",style:d.check}))))},t}(u.default.Component);f.propTypes={children:l.PropTypes.element.isRequired,size:l.PropTypes.number,completed:l.PropTypes.bool},t.default=f,e.exports=t.default}},[3462]);