webpackJsonp([18],{2128:function(t,e){var n={};t.exports=n,function(){"use strict";function t(t){return new RegExp("^([+-]?["+t+"]+)/(["+t+"]+)$")}function e(t,e){var n=u(t),r="["+a(t)+"]",i="["+n+"]+",o=i+"/"+i,s="[+-]?"+o,l=i,c="["+n+"]*\\.["+n+"]+",h="["+n+"]+\\.["+n+"]*",p="(?:"+l+"|"+c+"|"+h+")",f="(?:inf.0|nan.0|inf.f|nan.f)",m="(?:"+p+"|"+o+")",d=m+"(?:"+r+"[+-]?"+i+")?",v="(?:"+d+"|"+f+")",y="(?:[+-]?"+d+"|[+-]"+f+")",g=new RegExp("^("+s+")([+-]"+o+"?)i$"),T=new RegExp("^("+y+")?([+-]"+v+"?)i$"),E=new RegExp("^("+y+")@("+y+")$"),I=e.match(g),_=e.match(T),b=e.match(E);return I||(_||(b||!1))}function i(t){return new RegExp("^[+-]?["+t+"]+$")}function o(t){var e="(["+t+"]*)\\.(["+t+"]+)",n="(["+t+"]+)\\.(["+t+"]*)";return new RegExp("^(?:([+-]?)("+e+"|"+n+"))$")}function s(t,e){var n="["+t+"]+",r="["+t+"]*\\.["+t+"]+",i="["+t+"]+\\.["+t+"]*";return new RegExp("^(?:([+-]?(?:"+n+"|"+r+"|"+i+"))["+e+"]([+-]?["+t+"]+))$")}function u(t){return 2===t?"01":8===t?"0-7":10===t?"0-9":16===t?"0-9a-fA-F":ge("digitsForRadix: invalid radix",this,t)}function a(t){return 2===t||8===t||10===t?"defsl":16===t?"sl":ge("expMarkForRadix: invalid radix",this,t)}function l(t){this.defaultp=function(){return 0==t},this.exactp=function(){return 1==t},this.inexactp=function(){return 2==t}}function c(t,n,r,i){var o=e(n,t);return o?er.makeInstance(h(o[1]||"0",n,r),h("+"===o[2]?"1":"-"===o[2]?"-1":o[2],n,r)):h(t,n,r,i)}function h(e,n,r,l){var c=e.match(t(u(n)));if(c)return jn.makeInstance(h(c[1],n,r),h(c[2],n,r));if("+nan.0"===e||"-nan.0"===e)return Gn.nan;if("+inf.0"===e)return Gn.inf;if("-inf.0"===e)return Gn.neginf;if("-0.0"===e)return Qn;var f=e.match(o(u(n)));if(f){var m=void 0!==f[3]?f[3]:f[5],d=void 0!==f[4]?f[4]:f[6];return p(f[1],m,d,n,r)}var v=e.match(s(u(n),a(n)));if(v){var y=h(v[1],n,r),g=h(v[2],n,r);return qe(y,Ye(n,g))}if(e.match(i(u(n)))){var T=parseInt(e,n);return _n(T)?fr(e):r.intAsExactp()?T:Gn.makeInstance(T)}if(!l)return!1;0===e.length&&ge("no digits"),ge("bad number: "+e,this)}function p(t,e,n,r,i){var t="-"==t?-1:1,o=""===e?0:i.intAsExactp()?f(e,r):parseInt(e,r),s=""===n?0:i.intAsExactp()?f(n,r):parseInt(n,r),u=i.intAsExactp()?Ye(r,n.length):Math.pow(r,n.length),a=""===n?0:i.intAsExactp()?Me(s,u):s/u;return i.floatAsInexactp()?function(t){return"number"==typeof t?Gn.makeInstance(t):t.toInexact()}(qe(t,Be(o,a))):qe(t,Be(o,a))}function f(t,e){return h(t,e,l.on,!0)}function m(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function d(){return new m(null)}function v(t,e,n,r,i,o){for(;--o>=0;){var s=e*this[t++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i}function y(t,e,n,r,i,o){for(var s=32767&e,u=e>>15;--o>=0;){var a=32767&this[t],l=this[t++]>>15,c=u*a+l*s;a=s*a+((32767&c)<<15)+n[r]+(1073741823&i),i=(a>>>30)+(c>>>15)+u*l+(i>>>30),n[r++]=1073741823&a}return i}function g(t,e,n,r,i,o){for(var s=16383&e,u=e>>14;--o>=0;){var a=16383&this[t],l=this[t++]>>14,c=u*a+l*s;a=s*a+((16383&c)<<14)+n[r]+i,i=(a>>28)+(c>>14)+u*l,n[r++]=268435455&a}return i}function T(t){return lr.charAt(t)}function E(t,e){var n=cr[t.charCodeAt(e)];return null==n?-1:n}function I(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function _(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+DV:this.t=0}function b(t){var e=d();return e.fromInt(t),e}function x(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,i=!1,o=0;--r>=0;){var s=8==n?255&t[r]:E(t,r);s<0?"-"==t.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&m.ZERO.subTo(this,this)}function k(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function R(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o=[],s=this.t,u=this.DB-s*this.DB%e;if(s-- >0)for(u<this.DB&&(n=this[s]>>u)>0&&(i=!0,o.push(T(n)));s>=0;)u<e?(n=(this[s]&(1<<u)-1)<<e-u,n|=this[--s]>>(u+=this.DB-e)):(n=this[s]>>(u-=e)&r,u<=0&&(u+=this.DB,--s)),n>0&&(i=!0),i&&o.push(T(n));return i?o.join(""):"0"}function S(){var t=d();return m.ZERO.subTo(this,t),t}function w(){return this.s<0?this.negate():this}function N(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=this.s<0?t.t-n:n-t.t))return e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0}function B(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function F(){return this.t<=0?0:this.DB*(this.t-1)+B(this[this.t-1]^this.s&this.DM)}function C(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function q(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function A(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(t/this.DB),u=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+s+1]=this[n]>>i|u,u=(this[n]&o)<<r;for(n=s-1;n>=0;--n)e[n]=0;e[s]=u,e.t=this.t+s+1,e.s=this.s,e.clamp()}function M(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)return void(e.t=0);var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&o)<<i,e[s-n]=this[s]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}function O(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()}function L(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e[i]=0;for(i=0;i<r.t;++i)e[i+n.t]=n.am(0,r[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&m.ZERO.subTo(e,e)}function D(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function P(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=d());var o=d(),s=this.s,u=t.s,a=this.DB-B(r[r.t-1]);a>0?(r.lShiftTo(a,o),i.lShiftTo(a,n)):(r.copyTo(o),i.copyTo(n));var l=o.t,c=o[l-1];if(0!=c){var h=c*(1<<this.F1)+(l>1?o[l-2]>>this.F2:0),p=this.FV/h,f=(1<<this.F1)/h,v=1<<this.F2,y=n.t,g=y-l,T=null==e?d():e;for(o.dlShiftTo(g,T),n.compareTo(T)>=0&&(n[n.t++]=1,n.subTo(T,n)),m.ONE.dlShiftTo(l,T),T.subTo(o,o);o.t<l;)o[o.t++]=0;for(;--g>=0;){var E=n[--y]==c?this.DM:Math.floor(n[y]*p+(n[y-1]+v)*f);if((n[y]+=o.am(0,E,n,g,0,l))<E)for(o.dlShiftTo(g,T),n.subTo(T,n);n[y]<--E;)n.subTo(T,n)}null!=e&&(n.drShiftTo(l,e),s!=u&&m.ZERO.subTo(e,e)),n.t=l,n.clamp(),a>0&&n.rShiftTo(a,n),s<0&&m.ZERO.subTo(n,n)}}}function V(t){var e=d();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(m.ZERO)>0&&t.subTo(e,e),e}function U(t){this.m=t}function X(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function Y(t){return t}function Z(t){t.divRemTo(this.m,null,t)}function j(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function G(t,e){t.squareTo(e),this.reduce(e)}function W(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function z(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function $(t){var e=d();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(m.ZERO)>0&&this.m.subTo(e,e),e}function H(t){var e=d();return t.copyTo(e),this.reduce(e),e}function K(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Q(t,e){t.squareTo(e),this.reduce(e)}function J(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function tt(){return 0==(this.t>0?1&this[0]:this.s)}function et(t,e){if(t>4294967295||t<1)return m.ONE;var n=d(),r=d(),i=e.convert(this),o=B(t)-1;for(i.copyTo(n);--o>=0;)if(e.sqrTo(n,r),(t&1<<o)>0)e.mulTo(r,i,n);else{var s=n;n=r,r=s}return e.revert(n)}function nt(t,e){var n;return n=t<256||e.isEven()?new U(e):new z(e),this.exp(t,n)}function rt(){var t=d();return this.copyTo(t),t}function it(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function ot(){return 0==this.t?this.s:this[0]<<24>>24}function st(){return 0==this.t?this.s:this[0]<<16>>16}function ut(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function at(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function lt(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=b(n),i=d(),o=d(),s="";for(this.divRemTo(r,i,o);i.signum()>0;)s=(n+o.intValue()).toString(t).substr(1)+s,i.divRemTo(r,i,o);return o.intValue().toString(t)+s}function ct(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,o=0,s=0,u=0;u<t.length;++u){var a=E(t,u);a<0?"-"==t.charAt(u)&&0==this.signum()&&(i=!0):(s=e*s+a,++o>=n&&(this.dMultiply(r),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&m.ZERO.subTo(this,this)}function ht(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(m.ONE.shiftLeft(t-1),Tt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(m.ONE.shiftLeft(t-1),this);else{var r=[],i=7&t;r.length=1+(t>>3),e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}function pt(){var t=this.t,e=[];e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function ft(t){return 0==this.compareTo(t)}function mt(t){return this.compareTo(t)<0?this:t}function dt(t){return this.compareTo(t)>0?this:t}function vt(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function yt(t,e){return t&e}function gt(t){var e=d();return this.bitwiseTo(t,yt,e),e}function Tt(t,e){return t|e}function Et(t){var e=d();return this.bitwiseTo(t,Tt,e),e}function It(t,e){return t^e}function _t(t){var e=d();return this.bitwiseTo(t,It,e),e}function bt(t,e){return t&~e}function xt(t){var e=d();return this.bitwiseTo(t,bt,e),e}function kt(){for(var t=d(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function Rt(t){var e=d();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function St(t){var e=d();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function wt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function Nt(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+wt(this[t]);return this.s<0?this.t*this.DB:-1}function Bt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function Ft(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=Bt(this[n]^e);return t}function Ct(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function qt(t,e){var n=m.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function At(t){return this.changeBit(t,Tt)}function Mt(t){return this.changeBit(t,bt)}function Ot(t){return this.changeBit(t,It)}function Lt(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()}function Dt(t){var e=d();return this.addTo(t,e),e}function Pt(t){var e=d();return this.subTo(t,e),e}function Vt(t){var e=d();return this.multiplyTo(t,e),e}function Ut(t){var e=d();return this.divRemTo(t,e,null),e}function Xt(t){var e=d();return this.divRemTo(t,null,e),e}function Yt(t){var e=d(),n=d();return this.divRemTo(t,e,n),[e,n]}function Zt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function jt(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Gt(){}function Wt(t){return t}function zt(t,e,n){t.multiplyTo(e,n)}function $t(t,e){t.squareTo(e)}function Ht(t){return this.bnpExp(t,new Gt)}function Kt(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,t[r],n,r,0,this.t);for(i=Math.min(t.t,e);r<i;++r)this.am(0,t[r],n,r,0,e-r);n.clamp()}function Qt(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}function Jt(t){this.r2=d(),this.q3=d(),m.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function te(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=d();return t.copyTo(e),this.reduce(e),e}function ee(t){return t}function ne(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function re(t,e){t.squareTo(e),this.reduce(e)}function ie(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function oe(t,e){var n,r,i=t.bitLength(),o=b(1);if(i<=0)return o;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new U(e):e.isEven()?new Jt(e):new z(e);var s=[],u=3,a=n-1,l=(1<<n)-1;if(s[1]=r.convert(this),n>1){var c=d();for(r.sqrTo(s[1],c);u<=l;)s[u]=d(),r.mulTo(c,s[u-2],s[u]),u+=2}var h,p,f=t.t-1,m=!0,v=d();for(i=B(t[f])-1;f>=0;){for(i>=a?h=t[f]>>i-a&l:(h=(t[f]&(1<<i+1)-1)<<a-i,f>0&&(h|=t[f-1]>>this.DB+i-a)),u=n;0==(1&h);)h>>=1,--u;if((i-=u)<0&&(i+=this.DB,--f),m)s[h].copyTo(o),m=!1;else{for(;u>1;)r.sqrTo(o,v),r.sqrTo(v,o),u-=2;u>0?r.sqrTo(o,v):(p=o,o=v,v=p),r.mulTo(v,s[h],o)}for(;f>=0&&0==(t[f]&1<<i);)r.sqrTo(o,v),p=o,o=v,v=p,--i<0&&(i=this.DB-1,--f)}return r.revert(o)}function se(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function ue(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n}function ae(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return m.ZERO;for(var n=t.clone(),r=this.clone(),i=b(1),o=b(0),s=b(0),u=b(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),e?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(s,i),o.subTo(u,o)):(r.subTo(n,r),e&&s.subTo(i,s),u.subTo(o,u))}return 0!=r.compareTo(m.ONE)?m.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}function le(t){var e,n=this.abs();if(1==n.t&&n[0]<=hr[hr.length-1]){for(e=0;e<hr.length;++e)if(n[0]==hr[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<hr.length;){for(var r=hr[e],i=e+1;i<hr.length&&r<pr;)r*=hr[i++];for(r=n.modInt(r);e<i;)if(r%hr[e++]==0)return!1}return n.millerRabin(t)}function ce(t){var e=this.subtract(m.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);(t=t+1>>1)>hr.length&&(t=hr.length);for(var i=d(),o=0;o<t;++o){i.fromInt(hr[o]);var s=i.modPow(r,this);if(0!=s.compareTo(m.ONE)&&0!=s.compareTo(e)){for(var u=1;u++<n&&0!=s.compareTo(e);)if(s=s.modPowInt(2,this),0==s.compareTo(m.ONE))return!1;if(0!=s.compareTo(e))return!1}}return!0}function he(t){return function(){var e=this.toInexact();return e[t].apply(e,arguments)}}var pe=n,fe=function(t,e,n){return n=n||{},function(r,i){return n.isXSpecialCase&&n.isXSpecialCase(r)?n.onXSpecialCase(r,i):n.isYSpecialCase&&n.isYSpecialCase(i)?n.onYSpecialCase(r,i):"number"==typeof r&&"number"==typeof i?t(r,i):("number"==typeof r&&(r=ye(r,i)),"number"==typeof i&&(i=ye(i,r)),r.level<i.level&&(r=r.liftTo(i)),i.level<r.level&&(i=i.liftTo(r)),e(r,i))}},me=function(t){if(isNaN(t)||!isFinite(t))return Gn.makeInstance(t);var e=Math.floor(t);return e===t?_n(e)?fr(de(t+"")):e:Gn.makeInstance(t)},de=function(t){var e,n,r=t.match(s(u(10),a(10)));return r?(e=r[1].match(/^([^.]*)(.*)$/),n=Number(r[2]),0===e[2].length?e[1]+ve(n):n>=e[2].length-1?e[1]+e[2].substring(1)+ve(n-(e[2].length-1)):e[1]+e[2].substring(1,1+n)):t},ve=function(t){var e=[];e.length=t;for(var n=0;n<t;n++)e[n]="0";return e.join("")},ye=function(t,e){switch(e.level){case 0:return fr(t);case 1:return new jn(t,1);case 2:return new Gn(t);case 3:return new er(t,0);default:ge("IMPOSSIBLE: cannot lift fixnum integer to "+e.toString(),t,e)}},ge=function(t,e,n){pe.onThrowRuntimeError(t,e,n)},Te=function(t,e,n){throw new Error(t)},Ee=function(t){return"number"==typeof t||t instanceof jn||t instanceof Gn||t instanceof er||t instanceof m},Ie=function(t){return"number"==typeof t||Ee(t)&&t.isRational()},_e=function(t){return"number"==typeof t||Ee(t)&&t.isReal()},be=function(t){return"number"==typeof t||Ee(t)&&t.isExact()},xe=function(t){return"number"!=typeof t&&(Ee(t)&&t.isInexact())},ke=function(t){return"number"==typeof t||Ee(t)&&t.isInteger()},Re=function(t){return"number"==typeof t||Ee(t)&&t.isInteger()&&t.isExact()},Se=function(t){return"number"==typeof t?t:t.toFixnum()},we=function(t){return"number"==typeof t?t:t.toExact()},Ne=function(t){return"number"==typeof t?Gn.makeInstance(t):t.toInexact()},Be=function(t,e){var n;return"number"==typeof t&&"number"==typeof e&&(n=t+e,_n(n))?fr(t).add(fr(e)):t instanceof Gn&&e instanceof Gn?t.add(e):Fe(t,e)},Fe=fe(function(t,e){var n=t+e;return _n(n)?fr(t).add(fr(e)):n},function(t,e){return t.add(e)},{isXSpecialCase:function(t){return Re(t)&&Fn(t)},onXSpecialCase:function(t,e){return e},isYSpecialCase:function(t){return Re(t)&&Fn(t)},onYSpecialCase:function(t,e){return t}}),Ce=fe(function(t,e){var n=t-e;return _n(n)?fr(t).subtract(fr(e)):n},function(t,e){return t.subtract(e)},{isXSpecialCase:function(t){return Re(t)&&Fn(t)},onXSpecialCase:function(t,e){return bn(e)},isYSpecialCase:function(t){return Re(t)&&Fn(t)},onYSpecialCase:function(t,e){return t}}),qe=function(t,e){var n;return"number"==typeof t&&"number"==typeof e?(n=t*e,_n(n)?fr(t).multiply(fr(e)):n):t instanceof Gn&&e instanceof Gn?t.multiply(e):Ae(t,e)},Ae=fe(function(t,e){var n=t*e;return _n(n)?fr(t).multiply(fr(e)):n},function(t,e){return t.multiply(e)},{isXSpecialCase:function(t){return Re(t)&&(Fn(t)||Cn(t)||qn(t))},onXSpecialCase:function(t,e){return Fn(t)?0:Cn(t)?e:qn(t)?bn(e):void 0},isYSpecialCase:function(t){return Re(t)&&(Fn(t)||Cn(t)||qn(t))},onYSpecialCase:function(t,e){return Fn(e)?0:Cn(e)?t:qn(e)?bn(t):void 0}}),Me=fe(function(t,e){Fn(e)&&ge("/: division by zero",t,e);var n=t/e;return _n(n)?fr(t).divide(fr(e)):Math.floor(n)!==n?jn.makeInstance(t,e):n},function(t,e){return t.divide(e)},{isXSpecialCase:function(t){return Le(t,0)},onXSpecialCase:function(t,e){return Le(e,0)&&ge("/: division by zero",t,e),0},isYSpecialCase:function(t){return Le(t,0)},onYSpecialCase:function(t,e){ge("/: division by zero",t,e)}}),Oe=fe(function(t,e){return t===e},function(t,e){return t.equals(e)}),Le=function(t,e){if(t===e)return!0;if("number"==typeof t&&"number"==typeof e)return t===e;if(t===Qn||e===Qn)return t===e;if(t instanceof er||e instanceof er)return Le(cn(t),cn(e))&&Le(ln(t),ln(e));var n=be(t),r=be(e);return(n&&r||!n&&!r)&&Oe(t,e)},De=function(t,e,n){return Xe($e(Ce(t,e)),n)},Pe=fe(function(t,e){return t>=e},function(t,e){return _e(t)&&_e(e)||ge(">=: couldn't be applied to complex number",t,e),t.greaterThanOrEqual(e)}),Ve=fe(function(t,e){return t<=e},function(t,e){return _e(t)&&_e(e)||ge("<=: couldn't be applied to complex number",t,e),t.lessThanOrEqual(e)}),Ue=fe(function(t,e){return t>e},function(t,e){return _e(t)&&_e(e)||ge(">: couldn't be applied to complex number",t,e),t.greaterThan(e)}),Xe=fe(function(t,e){return t<e},function(t,e){return _e(t)&&_e(e)||ge("<: couldn't be applied to complex number",t,e),t.lessThan(e)}),Ye=function(){var t=fe(function(t,e){var n=Math.pow(t,e);return _n(n)?fr(t).expt(fr(e)):n},function(t,e){return Oe(e,0)?Be(e,1):t.expt(e)});return function(e,n){return Oe(n,0)?Be(n,1):_e(n)&&Xe(n,0)?t(Me(1,e),bn(n)):t(e,n)}}(),Ze=function(t){return Le(t,0)?1:"number"==typeof t?Gn.makeInstance(Math.exp(t)):t.exp()},je=function(t,e){ke(t)||ge("modulo: the first argument "+t+" is not an integer.",t,e),ke(e)||ge("modulo: the second argument "+e+" is not an integer.",t,e);var n;return"number"==typeof t?(n=t%e,e<0?n<=0?n:n+e:n<0?n+e:n):(n=Nn(He(t),He(e)),Xe(e,0)?Ve(n,0)?n:Be(n,e):Xe(n,0)?Be(n,e):n)},Ge=function(t){return"number"==typeof t?t:t.numerator()},We=function(t){return"number"==typeof t?1:t.denominator()},ze=function(t){if("number"==typeof t){if(t>=0){var e=Math.sqrt(t);return Math.floor(e)===e?e:Gn.makeInstance(e)}return er.makeInstance(0,ze(-t))}return t.sqrt()},$e=function(t){return"number"==typeof t?Math.abs(t):t.abs()},He=function(t){return"number"==typeof t?t:t.floor()},Ke=function(t){return"number"==typeof t?t:t.ceiling()},Qe=function(t){return"number"==typeof t?t:t.conjugate()},Je=function(t){return"number"==typeof t?Math.abs(t):t.magnitude()},tn=function(t){return Le(t,1)?0:"number"==typeof t?Gn.makeInstance(Math.log(t)):t.log()},en=function(t){return"number"==typeof t?t>0?0:Gn.pi:t.angle()},nn=function(t){return Le(t,0)?0:"number"==typeof t?Gn.makeInstance(Math.tan(t)):t.tan()},rn=function(t){return Le(t,0)?0:"number"==typeof t?Gn.makeInstance(Math.atan(t)):t.atan()},on=function(t){return Le(t,0)?1:"number"==typeof t?Gn.makeInstance(Math.cos(t)):t.cos()},sn=function(t){return Le(t,0)?0:"number"==typeof t?Gn.makeInstance(Math.sin(t)):t.sin()},un=function(t){return Le(t,1)?0:"number"==typeof t?Gn.makeInstance(Math.acos(t)):t.acos()},an=function(t){return Le(t,0)?0:"number"==typeof t?Gn.makeInstance(Math.asin(t)):t.asin()},ln=function(t){return"number"==typeof t?0:t.imaginaryPart()},cn=function(t){return"number"==typeof t?t:t.realPart()},hn=function(t){return"number"==typeof t?t:t.round()},pn=function(t){return qe(t,t)},fn=function(t){return ke(t)||ge("integer-sqrt: the argument "+t.toString()+" is not an integer.",t),"number"==typeof t?t<0?er.makeInstance(0,Math.floor(Math.sqrt(-t))):Math.floor(Math.sqrt(t)):t.integerSqrt()},mn=function(t,e){ke(t)||ge("gcd: the argument "+t.toString()+" is not an integer.",t);for(var n,r,i=$e(t),o=0;o<e.length;o++)for(r=$e(e[o]),ke(r)||ge("gcd: the argument "+r.toString()+" is not an integer.",r);!Fn(r);)n=i,i=r,r=Nn(n,r);return i},dn=function(t,e){ke(t)||ge("lcm: the argument "+t.toString()+" is not an integer.",t);var n=$e(t);if(Fn(n))return 0;for(var r=0;r<e.length;r++){ke(e[r])||ge("lcm: the argument "+e[r].toString()+" is not an integer.",e[r]);var i=Bn(n,e[r]);if(Fn(i))return 0;n=Me(qe(n,e[r]),i)}return n},vn=function(t,e){return ke(t)||ge("quotient: the first argument "+t.toString()+" is not an integer.",t),ke(e)||ge("quotient: the second argument "+e.toString()+" is not an integer.",e),Ln(t,e)},yn=function(t,e){return ke(t)||ge("remainder: the first argument "+t.toString()+" is not an integer.",t),ke(e)||ge("remainder: the second argument "+e.toString()+" is not an integer.",e),Dn(t,e)},gn=function(t){return Le(t,0)?Gn.makeInstance(1):Me(Be(Ze(t),Ze(bn(t))),2)},Tn=function(t){return Me(Ce(Ze(t),Ze(bn(t))),2)},En=function(t,e){return Le(e,0)?t:er.makeInstance(qe(t,on(e)),qe(t,sn(e)))},In=function(t){return"number"==typeof t?isFinite(t):t.isFinite()},_n=function(t){return t<-9e15||9e15<t},bn=function(t){return"number"==typeof t?-t:t.negate()},xn=function(t){return Me(t,2)},kn=function(t){return qe(t,nr)},Rn=function(t,e){for(var n=1;;){if(Fn(e))return n;Oe(je(e,2),0)?(t=qe(t,t),e=Me(e,2)):(n=qe(n,t),e=Ce(e,1))}},Sn=function(t,e,n){return n=n||{},function(r,i){if(r instanceof jn?r=Ge(r):r instanceof er&&(r=cn(r)),i instanceof jn?i=Ge(i):i instanceof er&&(i=cn(i)),"number"==typeof r&&"number"==typeof i){var o=t(r,i);if(!_n(o)||n.ignoreOverflow)return o}return r instanceof Gn||i instanceof Gn?n.doNotCoerseToFloating?t(Se(r),Se(i)):Gn.makeInstance(t(Se(r),Se(i))):("number"==typeof r&&(r=fr(r)),"number"==typeof i&&(i=fr(i)),e(r,i))}},wn=function(t,e,n){return n=n||{},function(r){if(r instanceof jn?r=Ge(r):r instanceof er&&(r=cn(r)),"number"==typeof r){var i=t(r);if(!_n(i)||n.ignoreOverflow)return i}return r instanceof Gn?t(Se(r)):("number"==typeof r&&(r=fr(r)),e(r))}},Nn=Sn(function(t,e){return t%e},function(t,e){return V.call(t,e)}),Bn=Sn(function(t,e){for(var n;0!==e;)n=t,t=e,e=n%e;return t},function(t,e){return se.call(t,e)}),Fn=wn(function(t){return 0===t},function(t){return ft.call(t,m.ZERO)}),Cn=wn(function(t){return 1===t},function(t){return ft.call(t,m.ONE)}),qn=wn(function(t){return-1===t},function(t){return ft.call(t,m.NEGATIVE_ONE)}),An=Sn(function(t,e){return t+e},function(t,e){return Dt.call(t,e)}),Mn=Sn(function(t,e){return t-e},function(t,e){return Pt.call(t,e)}),On=Sn(function(t,e){return t*e},function(t,e){return Vt.call(t,e)}),Ln=Sn(function(t,e){return(t-t%e)/e},function(t,e){return Ut.call(t,e)}),Dn=Sn(function(t,e){return t%e},function(t,e){return Xt.call(t,e)}),Pn=Sn(function(t,e){return t/e},function(t,e){return Se(t)/Se(e)},{ignoreOverflow:!0,doNotCoerseToFloating:!0}),Vn=Sn(function(t,e){return t===e},function(t,e){return ft.call(t,e)},{doNotCoerseToFloating:!0}),Un=Sn(function(t,e){return t>e},function(t,e){return N.call(t,e)>0},{doNotCoerseToFloating:!0}),Xn=Sn(function(t,e){return t<e},function(t,e){return N.call(t,e)<0},{doNotCoerseToFloating:!0}),Yn=Sn(function(t,e){return t>=e},function(t,e){return N.call(t,e)>=0},{doNotCoerseToFloating:!0}),Zn=Sn(function(t,e){return t<=e},function(t,e){return N.call(t,e)<=0},{doNotCoerseToFloating:!0}),jn=function(t,e){this.n=t,this.d=e};jn.prototype.toString=function(){return Cn(this.d)?this.n.toString()+"":this.n.toString()+"/"+this.d.toString()},jn.prototype.level=1,jn.prototype.liftTo=function(t){return 2===t.level?new Gn(Pn(this.n,this.d)):3===t.level?new er(this,0):ge("invalid level of Number",this,t)},jn.prototype.isFinite=function(){return!0},jn.prototype.equals=function(t){return t instanceof jn&&Vn(this.n,t.n)&&Vn(this.d,t.d)},jn.prototype.isInteger=function(){return Cn(this.d)},jn.prototype.isRational=function(){return!0},jn.prototype.isReal=function(){return!0},jn.prototype.add=function(t){return jn.makeInstance(An(On(this.n,t.d),On(this.d,t.n)),On(this.d,t.d))},jn.prototype.subtract=function(t){return jn.makeInstance(Mn(On(this.n,t.d),On(this.d,t.n)),On(this.d,t.d))},jn.prototype.negate=function(){return jn.makeInstance(-this.n,this.d)},jn.prototype.multiply=function(t){return jn.makeInstance(On(this.n,t.n),On(this.d,t.d))},jn.prototype.divide=function(t){return(Fn(this.d)||Fn(t.n))&&ge("/: division by zero",this,t),jn.makeInstance(On(this.n,t.d),On(this.d,t.n))},jn.prototype.toExact=function(){return this},jn.prototype.toInexact=function(){return Gn.makeInstance(this.toFixnum())},jn.prototype.isExact=function(){return!0},jn.prototype.isInexact=function(){return!1},jn.prototype.toFixnum=function(){return Pn(this.n,this.d)},jn.prototype.numerator=function(){return this.n},jn.prototype.denominator=function(){return this.d},jn.prototype.greaterThan=function(t){return Un(On(this.n,t.d),On(this.d,t.n))},jn.prototype.greaterThanOrEqual=function(t){return Yn(On(this.n,t.d),On(this.d,t.n))},jn.prototype.lessThan=function(t){return Xn(On(this.n,t.d),On(this.d,t.n))},jn.prototype.lessThanOrEqual=function(t){return Zn(On(this.n,t.d),On(this.d,t.n))},jn.prototype.integerSqrt=function(){var t=ze(this);return Ie(t)?we(He(t)):_e(t)?we(He(t)):er.makeInstance(we(He(cn(t))),we(He(ln(t))))},jn.prototype.sqrt=function(){if(Yn(this.n,0)){var t=ze(this.n),e=ze(this.d);return Oe(He(t),t)&&Oe(He(e),e)?jn.makeInstance(t,e):Gn.makeInstance(Pn(t,e))}var t=ze(bn(this.n)),e=ze(this.d);return Oe(He(t),t)&&Oe(He(e),e)?er.makeInstance(0,jn.makeInstance(t,e)):er.makeInstance(0,Gn.makeInstance(Pn(t,e)))},jn.prototype.abs=function(){return jn.makeInstance($e(this.n),this.d)},jn.prototype.floor=function(){var t=Ln(this.n,this.d);return Xn(this.n,0)?Ce(t,1):t},jn.prototype.ceiling=function(){var t=Ln(this.n,this.d);return Xn(this.n,0)?t:Be(t,1)},jn.prototype.conjugate=function(){return this},jn.prototype.magnitude=jn.prototype.abs,jn.prototype.log=function(){return Gn.makeInstance(Math.log(this.n/this.d))},jn.prototype.angle=function(){return Fn(this.n)?0:Un(this.n,0)?0:Gn.pi},jn.prototype.tan=function(){return Gn.makeInstance(Math.tan(Pn(this.n,this.d)))},jn.prototype.atan=function(){return Gn.makeInstance(Math.atan(Pn(this.n,this.d)))},jn.prototype.cos=function(){return Gn.makeInstance(Math.cos(Pn(this.n,this.d)))},jn.prototype.sin=function(){return Gn.makeInstance(Math.sin(Pn(this.n,this.d)))},jn.prototype.expt=function(t){return Re(t)&&Pe(t,0)?Rn(this,t):Gn.makeInstance(Math.pow(Pn(this.n,this.d),Pn(t.n,t.d)))},jn.prototype.exp=function(){return Gn.makeInstance(Math.exp(Pn(this.n,this.d)))},jn.prototype.acos=function(){return Gn.makeInstance(Math.acos(Pn(this.n,this.d)))},jn.prototype.asin=function(){return Gn.makeInstance(Math.asin(Pn(this.n,this.d)))},jn.prototype.imaginaryPart=function(){return 0},jn.prototype.realPart=function(){return this},jn.prototype.round=function(){var t=Oe(this.d,2),e=Xn(this.n,0),n=this.n;e&&(n=bn(n));var r=Ln(n,this.d);if(t)r=Be(r,1);else{var i=Dn(n,this.d);Ue(qe(i,2),this.d)&&(r=Be(r,1))}return e&&(r=bn(r)),r},jn.makeInstance=function(t,e){void 0===t&&ge("n undefined",t,e),void 0===e&&(e=1),Fn(e)&&ge("division by zero: "+t+"/"+e),Xn(e,0)&&(t=bn(t),e=bn(e));var n=Bn($e(t),$e(e));return t=Ln(t,n),e=Ln(e,n),Cn(e)||Fn(t)?t:new jn(t,e)};var Gn=function(t){this.n=t};Gn=Gn;var Wn=new Gn(Number.NaN),zn=new Gn(Number.POSITIVE_INFINITY),$n=new Gn(Number.NEGATIVE_INFINITY),Hn=new Gn(Number.POSITIVE_INFINITY),Kn=new Gn(Number.NEGATIVE_INFINITY),Qn=new Gn(-0),Jn=new Gn(0);Gn.pi=new Gn(Math.PI),Gn.e=new Gn(Math.E),Gn.nan=Wn,Gn.inf=zn,Gn.neginf=$n,Gn.makeInstance=function(t){return isNaN(t)?Gn.nan:t===Number.POSITIVE_INFINITY?Gn.inf:t===Number.NEGATIVE_INFINITY?Gn.neginf:0===t?1/t==-1/0?Qn:Jn:new Gn(t)},Gn.prototype.isExact=function(){return!1},Gn.prototype.isInexact=function(){return!0},Gn.prototype.isFinite=function(){return isFinite(this.n)||this===Hn||this===Kn},Gn.prototype.toExact=function(){isFinite(this.n)&&!isNaN(this.n)||ge("toExact: no exact representation for "+this,this);var t=this.n.toString(),e=t.match(/^(.*)\.(.*)$/);if(e){var n=(parseInt(e[1]),parseInt(e[2]),Math.pow(10,e[2].length));return jn.makeInstance(Math.round(this.n*n),n)}return this.n},Gn.prototype.toInexact=function(){return this},Gn.prototype.isInexact=function(){return!0},Gn.prototype.level=2,Gn.prototype.liftTo=function(t){return 3===t.level?new er(this,0):ge("invalid level of Number",this,t)},Gn.prototype.toString=function(){if(isNaN(this.n))return"+nan.0";if(this.n===Number.POSITIVE_INFINITY)return"+inf.0";if(this.n===Number.NEGATIVE_INFINITY)return"-inf.0";if(this===Qn)return"-0.0";var t=this.n.toString();return t.match("\\.")?t:t+".0"},Gn.prototype.equals=function(t,e){return t instanceof Gn&&this.n===t.n},Gn.prototype.isRational=function(){return this.isFinite()},Gn.prototype.isInteger=function(){return this.isFinite()&&this.n===Math.floor(this.n)},Gn.prototype.isReal=function(){return!0};var tr=function(t){return Xe(t,0)?-1:Ue(t,0)?1:t===Qn?-1:0};Gn.prototype.add=function(t){return this.isFinite()&&t.isFinite()?Gn.makeInstance(this.n+t.n):isNaN(this.n)||isNaN(t.n)?Wn:this.isFinite()&&!t.isFinite()?t:!this.isFinite()&&t.isFinite()?this:tr(this)*tr(t)==1?this:Wn},Gn.prototype.subtract=function(t){return this.isFinite()&&t.isFinite()?Gn.makeInstance(this.n-t.n):isNaN(this.n)||isNaN(t.n)?Wn:this.isFinite()||t.isFinite()?this.isFinite()?qe(t,-1):this:tr(this)===tr(t)?Wn:this},Gn.prototype.negate=function(){return Gn.makeInstance(-this.n)},Gn.prototype.multiply=function(t){return Gn.makeInstance(this.n*t.n)},Gn.prototype.divide=function(t){return Gn.makeInstance(this.n/t.n)},Gn.prototype.toFixnum=function(){return this.n},Gn.prototype.numerator=function(){var t=this.n.toString(),e=t.match(/^(.*)\.(.*)$/);if(e){var n=parseInt(e[2]),r=Math.pow(10,e[2].length),i=Bn(r,n),o=r/i;return Gn.makeInstance(Math.round(this.n*o))}return this},Gn.prototype.denominator=function(){var t=this.n.toString(),e=t.match(/^(.*)\.(.*)$/);if(e){var n=parseInt(e[2]),r=Math.pow(10,e[2].length),i=Bn(r,n);return Gn.makeInstance(Math.round(r/i))}return Gn.makeInstance(1)},Gn.prototype.floor=function(){return Gn.makeInstance(Math.floor(this.n))},Gn.prototype.ceiling=function(){return Gn.makeInstance(Math.ceil(this.n))},Gn.prototype.greaterThan=function(t){return this.n>t.n},Gn.prototype.greaterThanOrEqual=function(t){return this.n>=t.n},Gn.prototype.lessThan=function(t){return this.n<t.n},Gn.prototype.lessThanOrEqual=function(t){return this.n<=t.n},Gn.prototype.integerSqrt=function(){return this===Qn?this:ke(this)?this.n>=0?Gn.makeInstance(Math.floor(Math.sqrt(this.n))):er.makeInstance(Jn,Gn.makeInstance(Math.floor(Math.sqrt(-this.n)))):void ge("integerSqrt: can only be applied to an integer",this)},Gn.prototype.sqrt=function(){if(this.n<0){return er.makeInstance(0,Gn.makeInstance(Math.sqrt(-this.n)))}return Gn.makeInstance(Math.sqrt(this.n))},Gn.prototype.abs=function(){return Gn.makeInstance(Math.abs(this.n))},Gn.prototype.log=function(){return this.n<0?new er(this,0).log():Gn.makeInstance(Math.log(this.n))},Gn.prototype.angle=function(){return 0===this.n?0:this.n>0?0:Gn.pi},Gn.prototype.tan=function(){return Gn.makeInstance(Math.tan(this.n))},Gn.prototype.atan=function(){return Gn.makeInstance(Math.atan(this.n))},Gn.prototype.cos=function(){return Gn.makeInstance(Math.cos(this.n))},Gn.prototype.sin=function(){return Gn.makeInstance(Math.sin(this.n))},Gn.prototype.expt=function(t){return 1===this.n?t.isFinite()?this:(isNaN(t.n),this):Gn.makeInstance(Math.pow(this.n,t.n))},Gn.prototype.exp=function(){return Gn.makeInstance(Math.exp(this.n))},Gn.prototype.acos=function(){return Gn.makeInstance(Math.acos(this.n))},Gn.prototype.asin=function(){return Gn.makeInstance(Math.asin(this.n))},Gn.prototype.imaginaryPart=function(){return 0},Gn.prototype.realPart=function(){return this},Gn.prototype.round=function(){return isFinite(this.n)?this===Qn?this:.5===Math.abs(Math.floor(this.n)-this.n)?Math.floor(this.n)%2==0?Gn.makeInstance(Math.floor(this.n)):Gn.makeInstance(Math.ceil(this.n)):Gn.makeInstance(Math.round(this.n)):this},Gn.prototype.conjugate=function(){return this},Gn.prototype.magnitude=Gn.prototype.abs;var er=function(t,e){this.r=t,this.i=e};er.makeInstance=function(t,e){return void 0===e&&(e=0),be(e)&&ke(e)&&Fn(e)?t:((xe(t)||xe(e))&&(t=Ne(t),e=Ne(e)),new er(t,e))},er.prototype.toString=function(){var t=this.r.toString(),e=this.i.toString();return"-"===e[0]||"+"===e[0]?t+e+"i":t+"+"+e+"i"},er.prototype.isFinite=function(){return In(this.r)&&In(this.i)},er.prototype.isRational=function(){return Ie(this.r)&&Le(this.i,0)},er.prototype.isInteger=function(){return ke(this.r)&&Le(this.i,0)},er.prototype.toExact=function(){return er.makeInstance(we(this.r),we(this.i))},er.prototype.toInexact=function(){return er.makeInstance(Ne(this.r),Ne(this.i))},er.prototype.isExact=function(){return be(this.r)&&be(this.i)},er.prototype.isInexact=function(){return xe(this.r)||xe(this.i)},er.prototype.level=3,er.prototype.liftTo=function(t){ge("Don't know how to lift Complex number",this,t)},er.prototype.equals=function(t){return t instanceof er&&Oe(this.r,t.r)&&Oe(this.i,t.i)},er.prototype.greaterThan=function(t){return this.isReal()&&t.isReal()||ge(">: expects argument of type real number",this,t),Ue(this.r,t.r)},er.prototype.greaterThanOrEqual=function(t){return this.isReal()&&t.isReal()||ge(">=: expects argument of type real number",this,t),Pe(this.r,t.r)},er.prototype.lessThan=function(t){return this.isReal()&&t.isReal()||ge("<: expects argument of type real number",this,t),Xe(this.r,t.r)},er.prototype.lessThanOrEqual=function(t){return this.isReal()&&t.isReal()||ge("<=: expects argument of type real number",this,t),Ve(this.r,t.r)},er.prototype.abs=function(){return Oe(this.i,0).valueOf()||ge("abs: expects argument of type real number",this),$e(this.r)},er.prototype.toFixnum=function(){return Oe(this.i,0).valueOf()||ge("toFixnum: expects argument of type real number",this),Se(this.r)},er.prototype.numerator=function(){return this.isReal()||ge("numerator: can only be applied to real number",this),Ge(this.n)},er.prototype.denominator=function(){return this.isReal()||ge("floor: can only be applied to real number",this),We(this.n)},er.prototype.add=function(t){return er.makeInstance(Be(this.r,t.r),Be(this.i,t.i))},er.prototype.subtract=function(t){return er.makeInstance(Ce(this.r,t.r),Ce(this.i,t.i))},er.prototype.negate=function(){return er.makeInstance(bn(this.r),bn(this.i))},er.prototype.multiply=function(t){if(t.isReal())return er.makeInstance(qe(this.r,t.r),qe(this.i,t.r));var e=Ce(qe(this.r,t.r),qe(this.i,t.i)),n=Be(qe(this.r,t.i),qe(this.i,t.r));return er.makeInstance(e,n)},er.prototype.divide=function(t){var e,n,r,i,o,s,u;if(t.isReal())return er.makeInstance(Me(this.r,t.r),Me(this.i,t.r));if(this.isInexact()||t.isInexact())return e=this.r,n=this.i,r=t.r,i=t.i,Ve($e(i),$e(r))?(o=Me(i,r),s=Me(Be(e,qe(n,o)),Be(r,qe(i,o))),u=Me(Ce(n,qe(e,o)),Be(r,qe(i,o)))):(o=Me(r,i),s=Me(Be(qe(e,o),n),Be(qe(r,o),i)),u=Me(Ce(qe(n,o),e),Be(qe(r,o),i))),er.makeInstance(s,u);var a=Qe(t),l=qe(this,a),c=cn(qe(t,a));return er.makeInstance(Me(cn(l),c),Me(ln(l),c))},er.prototype.conjugate=function(){return er.makeInstance(this.r,Ce(0,this.i))},er.prototype.magnitude=function(){var t=Be(qe(this.r,this.r),qe(this.i,this.i));return ze(t)},er.prototype.isReal=function(){return Le(this.i,0)},er.prototype.integerSqrt=function(){if(ke(this))return fn(this.r);ge("integerSqrt: can only be applied to an integer",this)},er.prototype.sqrt=function(){if(this.isReal())return ze(this.r);var t=Be(this.magnitude(),this.r),e=ze(xn(t)),n=Me(this.i,ze(qe(t,2)));return er.makeInstance(e,n)},er.prototype.log=function(){var t=this.magnitude(),e=this.angle();return Be(tn(t),kn(e))},er.prototype.angle=function(){if(this.isReal())return en(this.r);if(Oe(0,this.r)){var t=xn(Gn.pi);return Ue(this.i,0)?t:bn(t)}var t=rn(Me($e(this.i),$e(this.r)));return Ue(this.r,0)?Ue(this.i,0)?t:bn(t):Ue(this.i,0)?Ce(Gn.pi,t):Ce(t,Gn.pi)};var nr=er.makeInstance(0,1),rr=er.makeInstance(0,-1);er.prototype.tan=function(){return Me(this.sin(),this.cos())},er.prototype.atan=function(){return Oe(this,nr)||Oe(this,rr)?$n:qe(nr,qe(Gn.makeInstance(.5),tn(Me(Be(nr,this),Be(nr,Ce(0,this))))))},er.prototype.cos=function(){if(this.isReal())return on(this.r);var t=kn(this),e=bn(t);return xn(Be(Ze(t),Ze(e)))},er.prototype.sin=function(){if(this.isReal())return sn(this.r);var t=kn(this),e=bn(t),n=er.makeInstance(0,2),r=Ce(Ze(t),Ze(e));return Me(r,n)},er.prototype.expt=function(t){if(Re(t)&&Pe(t,0))return Rn(this,t);var e=qe(t,this.log());return Ze(e)},er.prototype.exp=function(){var t=Ze(this.r),e=on(this.i),n=sn(this.i);return qe(t,Be(e,kn(n)))},er.prototype.acos=function(){if(this.isReal())return un(this.r);var t=xn(Gn.pi),e=kn(this),n=ze(Ce(1,pn(this))),r=kn(tn(Be(e,n)));return Be(t,r)},er.prototype.asin=function(){if(this.isReal())return an(this.r);var t=Ce(1,pn(this)),e=ze(t);return qe(2,rn(Me(this,Be(1,e))))},er.prototype.ceiling=function(){return this.isReal()||ge("ceiling: can only be applied to real number",this),Ke(this.r)},er.prototype.floor=function(){return this.isReal()||ge("floor: can only be applied to real number",this),He(this.r)},er.prototype.imaginaryPart=function(){return this.i},er.prototype.realPart=function(){return this.r},er.prototype.round=function(){return this.isReal()||ge("round: can only be applied to real number",this),hn(this.r)};var ir=new RegExp("^(#[ei]#[bodx]|#[bodx]#[ei]|#[bodxei])(.*)$");l.def=new l(0),l.on=new l(1),l.off=new l(2),l.prototype.intAsExactp=function(){return this.defaultp()||this.exactp()},l.prototype.floatAsInexactp=function(){return this.defaultp()||this.inexactp()};var or,sr=function(t,e){var n=10,e=void 0===e?l.def:!0===e?l.on:!1===e?l.off:ge("exactness must be true or false",this,r),i=t.toLowerCase().match(ir);if(i){var o=i[1].toLowerCase(),s=o.match(new RegExp("(#[ei])")),u=o.match(new RegExp("(#[bodx])"));if(s){var a=s[1].charAt(1);e="e"===a?l.on:"i"===a?l.off:ge("invalid exactness flag",this,r)}if(u){var a=u[1].charAt(1);n="b"===a?2:"o"===a?8:"d"===a?10:"x"===a?16:ge("invalid radix flag",this,r)}}return c(i?i[2]:t,n,e,!!i)};"undefined"!=typeof navigator&&"Microsoft Internet Explorer"==navigator.appName?(m.prototype.am=y,or=30):"undefined"!=typeof navigator&&"Netscape"!=navigator.appName?(m.prototype.am=v,or=26):(m.prototype.am=g,or=28),m.prototype.DB=or,m.prototype.DM=(1<<or)-1,m.prototype.DV=1<<or;m.prototype.FV=Math.pow(2,52),m.prototype.F1=52-or,m.prototype.F2=2*or-52;var ur,ar,lr="0123456789abcdefghijklmnopqrstuvwxyz",cr=[];for(ur="0".charCodeAt(0),ar=0;ar<=9;++ar)cr[ur++]=ar;for(ur="a".charCodeAt(0),ar=10;ar<36;++ar)cr[ur++]=ar;for(ur="A".charCodeAt(0),ar=10;ar<36;++ar)cr[ur++]=ar;U.prototype.convert=X,U.prototype.revert=Y,U.prototype.reduce=Z,U.prototype.mulTo=j,U.prototype.sqrTo=G,z.prototype.convert=$,z.prototype.revert=H,z.prototype.reduce=K,z.prototype.mulTo=J,z.prototype.sqrTo=Q,m.prototype.copyTo=I,m.prototype.fromInt=_,m.prototype.fromString=x,m.prototype.clamp=k,m.prototype.dlShiftTo=C,m.prototype.drShiftTo=q,m.prototype.lShiftTo=A,m.prototype.rShiftTo=M,m.prototype.subTo=O,m.prototype.multiplyTo=L,m.prototype.squareTo=D,m.prototype.divRemTo=P,m.prototype.invDigit=W,m.prototype.isEven=tt,m.prototype.bnpExp=et,m.prototype.toString=R,m.prototype.negate=S,m.prototype.abs=w,m.prototype.compareTo=N,m.prototype.bitLength=F,m.prototype.mod=V,m.prototype.modPowInt=nt,m.ZERO=b(0),m.ONE=b(1),Gt.prototype.convert=Wt,Gt.prototype.revert=Wt,Gt.prototype.mulTo=zt,Gt.prototype.sqrTo=$t,Jt.prototype.convert=te,Jt.prototype.revert=ee,Jt.prototype.reduce=ne,Jt.prototype.mulTo=ie,Jt.prototype.sqrTo=re;var hr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],pr=(1<<26)/hr[hr.length-1];m.prototype.chunkSize=ut,m.prototype.toRadix=lt,m.prototype.fromRadix=ct,m.prototype.fromNumber=ht,m.prototype.bitwiseTo=vt,m.prototype.changeBit=qt,m.prototype.addTo=Lt,m.prototype.dMultiply=Zt,m.prototype.dAddOffset=jt,m.prototype.multiplyLowerTo=Kt,m.prototype.multiplyUpperTo=Qt,m.prototype.modInt=ue,m.prototype.millerRabin=ce,m.prototype.clone=rt,m.prototype.intValue=it,m.prototype.byteValue=ot,m.prototype.shortValue=st,m.prototype.signum=at,m.prototype.toByteArray=pt,m.prototype.equals=ft,m.prototype.min=mt,m.prototype.max=dt,m.prototype.and=gt,m.prototype.or=Et,m.prototype.xor=_t,m.prototype.andNot=xt,m.prototype.not=kt,m.prototype.shiftLeft=Rt,m.prototype.shiftRight=St,m.prototype.getLowestSetBit=Nt,m.prototype.bitCount=Ft,m.prototype.testBit=Ct,m.prototype.setBit=At,m.prototype.clearBit=Mt,m.prototype.flipBit=Ot,m.prototype.add=Dt,m.prototype.subtract=Pt,m.prototype.multiply=Vt,m.prototype.divide=Ut,m.prototype.remainder=Xt,m.prototype.divideAndRemainder=Yt,m.prototype.modPow=oe,m.prototype.modInverse=ae,m.prototype.pow=Ht,m.prototype.expt=Ht,m.prototype.gcd=se,m.prototype.isProbablePrime=le,m.NEGATIVE_ONE=m.ONE.negate();var fr=function(t){return"number"==typeof t&&(t+=""),t=de(t),new m(t,10)};m.prototype.level=0,m.prototype.liftTo=function(t){if(1===t.level)return new jn(this,1);if(2===t.level){var e=this.toFixnum();return e===Number.POSITIVE_INFINITY?Hn:e===Number.NEGATIVE_INFINITY?Kn:new Gn(e)}return 3===t.level?new er(this,0):ge("invalid level for BigInteger lift",this,t)},m.prototype.isFinite=function(){return!0},m.prototype.isInteger=function(){return!0},m.prototype.isRational=function(){return!0},m.prototype.isReal=function(){return!0},m.prototype.isExact=function(){return!0},m.prototype.isInexact=function(){return!1},m.prototype.toExact=function(){return this},m.prototype.toInexact=function(){return Gn.makeInstance(this.toFixnum())},m.prototype.toFixnum=function(){var t,e=0,n=this.toString();if("-"===n[0]){for(t=1;t<n.length;t++)e=10*e+Number(n[t]);return-e}for(t=0;t<n.length;t++)e=10*e+Number(n[t]);return e},m.prototype.greaterThan=function(t){return this.compareTo(t)>0},m.prototype.greaterThanOrEqual=function(t){return this.compareTo(t)>=0},m.prototype.lessThan=function(t){return this.compareTo(t)<0},m.prototype.lessThanOrEqual=function(t){return this.compareTo(t)<=0},m.prototype.divide=function(t){var e=Yt.call(this,t);return 0===e[1].compareTo(m.ZERO)?e[0]:Be(e[0],jn.makeInstance(e[1],t))},m.prototype.numerator=function(){return this},m.prototype.denominator=function(){return 1},function(){var t=function(t,e){for(;!Ve(pn(e),t)||!Xe(t,pn(Be(e,1)));)e=He(Me(Be(e,He(Me(t,e))),2));return e};m.prototype.integerSqrt=function(){var e;return tr(this)>=0?t(this,this):(e=this.negate(),er.makeInstance(0,t(e,e)))}}(),function(){m.prototype.sqrt=function(){var t,e=this.integerSqrt();return Le(pn(e),this)?e:(t=Se(this),isFinite(t)?t>=0?Gn.makeInstance(Math.sqrt(t)):er.makeInstance(0,Gn.makeInstance(Math.sqrt(-t))):e)}}(),m.prototype.floor=function(){return this},m.prototype.ceiling=function(){return this},m.prototype.conjugate=he("conjugate"),m.prototype.magnitude=he("magnitude"),m.prototype.log=he("log"),m.prototype.angle=he("angle"),m.prototype.atan=he("atan"),m.prototype.acos=he("acos"),m.prototype.asin=he("asin"),m.prototype.tan=he("tan"),m.prototype.cos=he("cos"),m.prototype.sin=he("sin"),m.prototype.exp=he("exp"),m.prototype.imaginaryPart=function(){return 0},m.prototype.realPart=function(){return this},m.prototype.round=function(){return this};var mr=function(){var t=function(t,e,n){var r=[],i={};for(i[t]=!0;;){if(n--<=0)return[r.join(""),"..."];var o=vn(qe(t,10),e),s=yn(qe(t,10),e);if(r.push(o.toString()),i[s]){t=s;break}i[s]=!0,t=s}for(var u=t,a=[];;){var o=vn(qe(t,10),e),s=yn(qe(t,10),e);if(a.push(o.toString()),Oe(s,u))break;t=s}for(var l=r.join(""),c=a.join("");l.length>=c.length&&l.substring(l.length-c.length)===c;)l=l.substring(0,l.length-c.length);return[l,c]};return function(e,n,r){var i=512;r&&void 0!==r.limit&&(i=r.limit),ke(e)||ge("toRepeatingDecimal: n "+e.toString()+" is not an integer."),ke(n)||ge("toRepeatingDecimal: d "+n.toString()+" is not an integer."),Oe(n,0)&&ge("toRepeatingDecimal: d equals 0"),Xe(n,0)&&ge("toRepeatingDecimal: d < 0");var o=Xe(e,0)?"-":"";return e=$e(e),[o+vn(e,n)].concat(t(yn(e,n),n,i))}}();pe.fromFixnum=me,pe.fromString=sr,pe.makeBignum=fr,pe.makeRational=jn.makeInstance,pe.makeFloat=Gn.makeInstance,pe.makeComplex=er.makeInstance,pe.makeComplexPolar=En,pe.pi=Gn.pi,pe.e=Gn.e,pe.nan=Gn.nan,pe.negative_inf=Gn.neginf,pe.inf=Gn.inf,pe.negative_one=-1,pe.zero=0,pe.one=1,pe.i=nr,pe.negative_i=rr,pe.negative_zero=Qn,pe.onThrowRuntimeError=Te,pe.isSchemeNumber=Ee,pe.isRational=Ie,pe.isReal=_e,pe.isExact=be,pe.isInexact=xe,pe.isInteger=ke,pe.toFixnum=Se,pe.toExact=we,pe.toInexact=Ne,pe.add=Be,pe.subtract=Ce,pe.multiply=qe,pe.divide=Me,pe.equals=Oe,pe.eqv=Le,pe.approxEquals=De,pe.greaterThanOrEqual=Pe,pe.lessThanOrEqual=Ve,pe.greaterThan=Ue,pe.lessThan=Xe,pe.expt=Ye,pe.exp=Ze,pe.modulo=je,pe.numerator=Ge,pe.denominator=We,pe.integerSqrt=fn,pe.sqrt=ze,pe.abs=$e,pe.quotient=vn,pe.remainder=yn,pe.floor=He,pe.ceiling=Ke,pe.conjugate=Qe,pe.magnitude=Je,pe.log=tn,pe.angle=en,pe.tan=nn,pe.atan=rn,pe.cos=on,pe.sin=sn,pe.tan=nn,pe.acos=un,pe.asin=an,pe.cosh=gn,pe.sinh=Tn,pe.imaginaryPart=ln,pe.realPart=cn,pe.round=hn,pe.sqr=pn,pe.gcd=mn,pe.lcm=dn,pe.toRepeatingDecimal=mr,pe.BigInteger=m,pe.Rational=jn,pe.FloatPoint=Gn,pe.Complex=er,pe.MIN_FIXNUM=-9e15,pe.MAX_FIXNUM=9e15}()},2882:function(t,e,n){"use strict";function r(t){this.message=t||""}function i(t){this.message=t||""}function o(t){return"number"==typeof t?l.makeFloat(t):t}var s=n(71),u=n(82),a=n(2883),l=n(2128),c={ARITHMETIC:1,FUNCTION_CALL:2,VARIABLE:3,NUMBER:4,EXPONENTIAL:5},h=function t(e,n,r){if(this.value_=o(e),this.blockId_=r,void 0===n&&(n=[]),!Array.isArray(n))throw new Error("Expected array");if(this.children_=n.map(function(e){return e instanceof t||(e=new t(e)),e}),this.isNumber()&&n.length>0)throw new Error("Can't have args for number ExpressionNode");if(this.isArithmetic()&&2!==n.length)throw new Error("Arithmetic ExpressionNode needs 2 args")};t.exports=h,h.DivideByZeroError=r,h.ImaginaryNumberError=i,h.prototype.getType_=function(){return-1!==["+","-","*","/"].indexOf(this.value_)?c.ARITHMETIC:-1!==["pow","sqrt","sqr"].indexOf(this.value_)?c.EXPONENTIAL:"string"==typeof this.value_?0===this.children_.length?c.VARIABLE:c.FUNCTION_CALL:l.isSchemeNumber(this.value_)?c.NUMBER:void 0},h.prototype.isArithmetic=function(){return this.getType_()===c.ARITHMETIC},h.prototype.isFunctionCall=function(){return this.getType_()===c.FUNCTION_CALL},h.prototype.isVariable=function(){return this.getType_()===c.VARIABLE},h.prototype.isNumber=function(){return this.getType_()===c.NUMBER},h.prototype.isExponential=function(){return this.getType_()===c.EXPONENTIAL},h.prototype.isDivZero=function(){var t=this.getChildValue(1);return"/"===this.getValue()&&l.isSchemeNumber(t)&&l.equals(t,0)},h.prototype.clone=function(){var t=this.children_.map(function(t){return t.clone()});return new h(this.value_,t,this.blockId_)},h.prototype.evaluate=function(t,e){var n;try{t=t||{},e=e||{};var u,a=this.getType_();if(a===c.VARIABLE){var h=s.valueOr(e[this.value_],t[this.value_]);if(void 0===h)throw new Error("No mapping for variable during evaluation");var p=this.clone();return p.setValue(h),p.evaluate(t)}if(a===c.FUNCTION_CALL){var f=s.valueOr(e[this.value_],t[this.value_]);if(void 0===f)throw new Error("No mapping for function during evaluation");if(!f.variables||!f.expression)throw new Error("Bad mapping for: "+this.value_);if(f.variables.length!==this.children_.length)throw new Error("Bad mapping for: "+this.value_);var m={};return f.variables.forEach(function(n,r){var i=this.children_[r].evaluate(t,e);if(i.err)throw i.err;var o=i.result;m[n]=s.valueOr(e[o],o)},this),f.expression.evaluate(t,m)}if(a===c.NUMBER)return{result:this.value_};if(a!==c.ARITHMETIC&&a!==c.EXPONENTIAL)throw new Error("Unexpected");var d=this.children_[0].evaluate(t,e);if(d.err)throw d.err;if(d=d.result.toExact(),1===this.children_.length){switch(this.value_){case"sqrt":if((u=l.sqrt(d))instanceof l.Complex&&!u.isReal())throw new i;break;case"sqr":u=l.sqr(d);break;default:throw new Error("Unknown operator: "+this.value_)}return{result:o(u)}}var v=this.children_[1].evaluate(t,e);if(v.err)throw v.err;switch(v=v.result.toExact(),this.value_){case"+":u=l.add(d,v);break;case"-":u=l.subtract(d,v);break;case"*":u=l.multiply(d,v);break;case"/":if(l.equals(v,0))throw new r;u=l.divide(d,v);break;case"pow":u=l.expt(d,v);break;default:throw new Error("Unknown operator: "+this.value_)}return{result:o(u)}}catch(t){n=t}return{err:n}},h.prototype.depth=function(){for(var t=0,e=0;e<this.children_.length;e++)t=Math.max(t,1+this.children_[e].depth());return t},h.prototype.getDeepestOperation=function(){if(0===this.children_.length)return null;for(var t=null,e=0,n=0;n<this.children_.length;n++){var r=this.children_[n].depth();r>e&&(e=r,t=this.children_[n])}return 0===e?this:t.getDeepestOperation()},h.prototype.collapse=function(){var t=this.getDeepestOperation();if(null===t)return!1;if(this===t){var e=this.evaluate();return!e.err&&(this.value_=e.result,this.children_=[],!0)}return t.collapse()},h.prototype.getTokenListDiff=function(t){var e,n=t&&this.hasSameValue_(t)&&this.children_.length===t.children_.length,r=this.getType_();if(0===this.children_.length)return[new a(this.value_,!n)];var i=function(e){return this.children_[e].getTokenListDiff(n&&t.children_[e])}.bind(this);if(r===c.ARITHMETIC)return e=[new a("(",!n)],e.push([i(0),new a(" "+this.value_+" ",!n),i(1)]),e.push(new a(")",!n)),u.flattenDeep(e);if("sqr"===this.value_)return u.flattenDeep([new a("(",!n),i(0),new a(" ^ 2",!n),new a(")",!n)]);if("pow"===this.value_)return u.flattenDeep([new a("(",!n),i(0),new a(" ^ ",!n),i(1),new a(")",!n)]);e=[new a(this.value_,t&&this.value_!==t.value_),new a("(",!n)];for(var o=this.children_.length,s=0;s<o;s++){s>0&&e.push(new a(",",!n));var l=i(s);1===o&&h.stripOuterParensFromTokenList(l),e.push(l)}return e.push(new a(")",!n)),u.flattenDeep(e)},h.prototype.getTokenList=function(t){if(!t)return this.getTokenListDiff(this);if(this.depth()<=1)return this.getTokenListDiff(null);if(this.getType_()!==c.ARITHMETIC&&this.getType_()!==c.EXPONENTIAL)throw new Error("Unsupported");var e=!1;2===this.children_.length&&(e=this.children_[1].depth()>this.children_[0].depth());var n=new a("(",!1),r=new a(")",!1);"sqrt"===this.value_&&(n=new a("sqrt",!1),r=null);var i=[n,this.children_[0].getTokenList(t&&!e)];return this.children_.length>1&&i.push([new a(" "+this.value_+" ",!1),this.children_[1].getTokenList(t&&e)]),r&&i.push(r),u.flattenDeep(i)},h.prototype.hasSameValue_=function(t){return!!t&&(this.isNumber()?l.equals(this.value_,t.value_):this.value_===t.value_)},h.prototype.isIdenticalTo=function(t){if(!t||!this.hasSameValue_(t)||this.children_.length!==t.children_.length)return!1;for(var e=0;e<this.children_.length;e++)if(!this.children_[e].isIdenticalTo(t.children_[e]))return!1;return!0},h.prototype.hasSameSignature=function(t){return!!t&&(this.getType_()===c.FUNCTION_CALL&&t.getType_()===c.FUNCTION_CALL&&(this.value_===t.value_&&this.children_.length===t.children_.length))},h.prototype.isEquivalentTo=function(t){if(this.getType_()!==c.ARITHMETIC)return this.isIdenticalTo(t);if(!t||this.value_!==t.value_)return!1;var e=this.children_[0],n=this.children_[1],r=t.children_[0],i=t.children_[1];return e.isEquivalentTo(r)?n.isEquivalentTo(i):!!e.isEquivalentTo(i)&&n.isEquivalentTo(r)},h.prototype.numChildren=function(){return this.children_.length},h.prototype.getValue=function(){return this.value_.toString()},h.prototype.setValue=function(t){var e=this.getType_();if(e!==c.VARIABLE&&e!==c.NUMBER)throw new Error("Can't modify value");this.value_=e===c.NUMBER?o(t):t},h.prototype.getChildValue=function(t){if(void 0!==this.children_[t])return this.children_[t].value_},h.prototype.setChildValue=function(t,e){return this.children_[t].setValue(e)},h.prototype.debug=function(){return 0===this.children_.length?this.isNumber()?this.value_.toFixnum().toString():this.value_.toString():"("+this.value_+" "+this.children_.map(function(t){return t.debug()}).join(" ")+")"},h.stripOuterParensFromTokenList=function(t){return t.length>=2&&t[0].isParenthesis()&&t[t.length-1].isParenthesis()&&(t.splice(-1),t.splice(0,1)),t}},2883:function(t,e,n){"use strict";var r=n(2128),i=function(t,e){this.val_=t,this.marked_=e,this.nonRepeated_=null,this.repeated_=null,this.setStringRepresentation_()};t.exports=i,i.prototype.isParenthesis=function(){return"("===this.val_||")"===this.val_},i.prototype.renderToParent=function(t,e,n){var r,i;r=document.createElementNS(Blockly.SVG_NS,"text");var o=document.createElementNS(Blockly.SVG_NS,"tspan");return o.textContent=this.nonRepeated_.replace(/ /g,""),r.appendChild(o),this.repeated_&&(o=document.createElementNS(Blockly.SVG_NS,"tspan"),o.setAttribute("style","text-decoration: overline"),o.textContent=this.repeated_.replace(/ /g,""),r.appendChild(o)),t.appendChild(r),i=r.getBBox().width,r.setAttribute("x",e),this.marked_&&n&&r.setAttribute("class",n),i},i.prototype.setStringRepresentation_=function(){if(!r.isSchemeNumber(this.val_)||"number"==typeof this.val_)return void(this.nonRepeated_=this.val_);if(this.val_.isInteger())return void(this.nonRepeated_=i.numberWithCommas_(this.val_.toFixnum()));var t=r.toExact(this.val_.numerator()),e=r.toExact(this.val_.denominator()),n=r.toRepeatingDecimal(t,e);if(!n[2]||"0"===n[2])return void(this.nonRepeated_=i.numberWithCommas_(this.val_.toFixnum()));this.nonRepeated_=i.numberWithCommas_(n[0])+"."+n[1],this.repeated_=n[2]},i.numberWithCommas_=function(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}},2884:function(t,e,n){"use strict";var r=function(t,e,n){if(this.name=t,this.params=e||[],this.expression=n,3!==arguments.length)throw new Error("Equation requires name, params, and expression");this.signature=this.name,this.params.length>0&&(this.signature+="("+this.params.join(",")+")")};t.exports=r,r.prototype.isFunction=function(){return this.params.length>0},r.prototype.clone=function(){return new r(this.name,this.params.slice(),this.expression.clone())}},3024:function(t,e,n){n(151),n(152),t.exports=n(3025)},3025:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(3026),o=r(i);(0,r(n(820)).default)().then(o.default)},3026:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){t.skinsModule=p.default,t.blocksModule=c.default,(0,s.default)(window.Calc,m.default,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(853),s=r(o),u=n(3027),a=r(u),l=n(2885),c=r(l),h=n(744),p=r(h),f=n(3031),m=r(f);window.Calc=a.default,t.exports=e.default},3027:function(t,e,n){"use strict";function r(t,e,n){t=i(t),e=i(e),n=U.valueOr(n,!1);var r;return t?(r=e?t.getTokenListDiff(e):t.getTokenList(n),Y.stripOuterParensFromTokenList(r)):null}function i(t){if(null===t||void 0===t)return t;if(t instanceof Y)return t;if(t instanceof j)return t.expression;if(q.isSchemeNumber(t)||"string"==typeof t)return new Y(t);throw new Error("unexpected")}function o(t,e){try{var n=new Z(Blockly.mainBlockSpace.getTopBlocks()),i=t.getInputTargetBlock("ACTUAL"),o=t.getInputTargetBlock("EXPECTED");C().feedback_.throwOnInvalidExampleBlocks(i,o);var s=Z.getEquationFromBlock(i),u=n.evaluateWithExpression(s.expression),a=Z.getEquationFromBlock(o),l=n.evaluateWithExpression(a.expression),c=q.equals(l.result,u.result);if(e){var h=r(a,null);l.err||(h.push(new G(" = ",!1)),h.push(new G(l.result,!c))),y("answerExpression"),T("userExpression",null,h,0,"errorToken")}return c?null:"Does not match definition"}catch(t){return"Evaluation Failed."}}function s(){y("userExpression"),u(H.targetSet)}function u(t){var e=t.computeEquation();if(e&&e.expression){var n,i=0,o=t.computesFunctionCall();if(!o&&!t.computesSingleVariable()){var s=t.sortedEquations();s.forEach(function(t){if(t.isFunction()&&s.length>1)throw new Error("Calc doesn't support goal with multiple functions or mixed functions/vars");n=r(t),T("answerExpression",t.signature,n,i++)})}n=r(e);var u=t.evaluate();if(u.err)throw u.err;o&&(n.push(new G(" = ",!1)),n.push(new G(u.result,!1))),T("answerExpression",e.signature,n,i)}}function a(t){if(t){if(0!==Blockly.mainBlockSpace.getTopBlocks().length)throw new Error("generateTargetExpression shouldn't be called with blocksif we already have blocks in the workspace");C().loadBlocks(t)}var e=new Z(Blockly.mainBlockSpace.getTopBlocks());return Blockly.mainBlockSpace.getTopBlocks().forEach(function(t){t.dispose()}),e}function l(t,e){return{result:w.ResultType.FAILURE,testResults:w.TestResults.APP_SPECIFIC_FAIL,message:t,failedInput:U.valueOr(e,null)}}function c(t){return t instanceof Y.DivideByZeroError?l(M.divideByZeroError(),null):t instanceof Y.ImaginaryNumberError?l(M.imaginaryNumberError(),null):(U.isInfiniteRecursionError(t)||console.log("Unexpected error: "+t),{result:w.ResultType.FAILURE,testResults:w.TestResults.LEVEL_INCOMPLETE_FAIL,message:null,failedInput:null})}function h(t){return t===w.TestResults.QUESTION_MARKS_IN_NUMBER_FIELD||t===w.TestResults.EMPTY_FUNCTIONAL_BLOCK||t===w.TestResults.EXTRA_TOP_BLOCKS_FAIL||t===w.TestResults.EXAMPLE_FAILED||t===w.TestResults.EMPTY_FUNCTION_NAME}function p(){y("userExpression");var t=H.userSet.clone(),e=H.targetSet,n=t.computeEquation();if(null!==n&&null!==n.expression){var i=f(t,e);if(!t.computesSingleConstant()){var o=e&&e.computeEquation(),s=r(n,o);(t.hasVariablesOrFunctions()||n.expression.depth()>0)&&(s=s.concat(m(t,e))),T("userExpression",null,s,i++,"errorToken"),s=d(t,e),s&&s.length&&T("userExpression",null,s,i++,"errorToken")}}}function f(t,e){var n=!e.computesFunctionCall()&&!e.computesSingleVariable();if(e.computesSingleVariable()&&null!==H.failedInput){e.getConstants().forEach(function(e,n){var r=e.name;t.getEquation(r).expression.setValue(H.failedInput[n])})}var i,o=0;return t.sortedEquations().forEach(function(t){var s=n?e.getEquation(t.name):null;i=r(t,s),T("userExpression",t.signature,i,o++,"errorToken")}),o}function m(t,e){var n=t.evaluate();if(n.err)return n.err instanceof Y.DivideByZeroError||n.err instanceof Y.ImaginaryNumberError||U.isInfiniteRecursionError(n.err)||console.log("Unexpected error: "+n.err),[];var i=n.result,o=i;return e.computesSingleVariable()?[new G(" = ",!1),new G(i,H.failedInput)]:(null!==e.computeEquation()&&(o=e.evaluate().result),r(" = ").concat(r(i,o)))}function d(t,e){if(null===H.failedInput||!e.computesFunctionCall())return[];for(var n=t.computeEquation(),i=n.expression.clone(),o=0;o<i.numChildren();o++)i.setChildValue(o,H.failedInput[o]);var s=t.evaluateWithExpression(i);if(s.err){if(!(s.err instanceof Y.DivideByZeroError||s.err instanceof Y.ImaginaryNumberError))throw s.err;s.result=""}var u=s.result;return r(i).concat(new G(" = ",!1)).concat(new G(u,!0))}function v(){H.animating=!1,I()}function y(t){var e=document.getElementById(t);if(e)for(;e.lastChild;)e.removeChild(e.lastChild)}function g(t){var e=H.userSet.computeEquation();if(!e)throw new Error("require user expression");var n=e.expression;if(!n)return!0;var i=!1;if(H.userSet.hasVariablesOrFunctions()||H.targetSet.hasVariablesOrFunctions())throw new Error("Can't animate if either user/target have functions/vars");y("userExpression");for(var o=n.clone(),s=o,u=0,a=0;a<=t&&!i;a++){var l;if(u===t)l=r(o,s);else if(u+1===t){var c=o.getDeepestOperation();c&&C().highlight("block_id_"+c.blockId),l=r(o,null,!0)}else l=r(o);var h=!1;a>0&&(h=!0,l=r("= ").concat(l)),T("userExpression",null,l,u,"markedToken",h),s=o.clone(),o.isDivZero()&&(i=!0),o.collapse()?u++:a===u+1&&(i=!0)}return i}function T(t,e,n,r,i,o){var s=document.getElementById(t),u=document.createElementNS(Blockly.SVG_NS,"g");s.appendChild(u);var a,l=0;e&&(a=new G(e+" = ",!1).renderToParent(u,l,null),l+=a);for(var c=0,h=0;h<n.length;h++)a=n[h].renderToParent(u,l,i),0===h&&(c=a),l+=a;var p;if(o){var f=Blockly.getRelativeXY(s.childNodes[0]);p=parseFloat(f.x)-c}else p=(z-u.getBBox().width)/2;var m=r*$;u.setAttribute("transform","translate("+p+", "+m+")")}function E(t){var e=document.getElementById(t).cloneNode(!0);e.removeAttribute("id");for(var n=e.getElementsByTagName("*"),r=0;r<n.length;r++){n[r].removeAttribute("id")}return e}function I(){if(!H.waitingForReport&&!H.animating){b.extraTopBlocks=M.extraTopBlocks();var t=null;h(H.testResults)||(t=E("svgCalc"),t.setAttribute("class","svgCalcFeedback"));var e={app:"calc",skin:x.id,response:H.response,level:b,feedbackType:H.testResults,tryAgainText:b.freePlay?A.keepPlaying():void 0,continueText:b.freePlay?A.nextPuzzle():void 0,appStrings:{reinfFeedbackMsg:M.reinfFeedbackMsg()},appDiv:t};H.message&&!b.edit_blocks&&(e.message=H.message),C().displayFeedback(e)}}function _(t){document.getElementById("runButton").disabled=!1,H.response=t,H.waitingForReport=!1,C().onReportComplete(t),I()}var b,x,k=n(1014),R=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(k),S=n(237),w=n(216),N=t.exports,B=n(1),F=n(32),C=n(597).singleton,q=n(2128),A=n(40),M=n(2881),O=n(53).Provider,L=n(944),D=n(3028),P=n(594),V=n(743),U=n(71),X=n(82),Y=n(2882),Z=n(3029),j=n(2884),G=n(2883),W=n(3030);C().setCheckForEmptyBlocks(!1);var z=400,$=24,H={targetSet:null,userSet:null,animating:!1,waitingForReport:!1,response:null,message:null,result:null,testResults:null,failedInput:null};N.appState_=H;var K=2e3;N.init=function(t){C().runButtonClick=this.runButtonClick.bind(this),x=t.skin,b=t.level,b.scale&&void 0!==b.scale.stepSpeed&&(K=b.scale.stepSpeed),t.grayOutUndeletableBlocks=!0,t.forceInsertTopBlock="functional_compute",t.enableShowCode=!1,t.skin.staticAvatar=null,t.skin.smallStaticAvatar=null,t.skin.failureAvatar=null,t.skin.winAvatar=null,t.loadAudio=function(){C().loadAudio(x.winSound,"win"),C().loadAudio(x.startSound,"start"),C().loadAudio(x.failureSound,"failure")},t.afterInject=function(){var e=document.getElementById("svgCalc");if(e.setAttribute("width",z),e.setAttribute("height",400),b.freePlay){document.getElementById("background").setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","/blockly/media/skins/calc/background_freeplay.png")}Blockly.BROKEN_CONTROL_POINTS=!1,Blockly.JavaScript.addReservedWords("Calc,code");var n=b.solutionBlocks;b.solutionBlocks&&""!==b.solutionBlocks&&(n=V.forceInsertTopBlock(b.solutionBlocks,t.forceInsertTopBlock)),H.targetSet=a(n),u(H.targetSet),document.getElementById("visualizationColumn").style.width="400px";var r=document.getElementById("resetButton");P.addClickTouchEvent(r,N.resetButtonClick),Blockly.contractEditor&&(Blockly.contractEditor.registerTestHandler(o),Blockly.contractEditor.registerTestResetHandler(s))},C().setPageConstants(t),F.render(B.createElement(O,{store:(0,S.getStore)()},B.createElement(L,{visualizationColumn:B.createElement(D,null),onMount:C().init.bind(C(),t)})),document.getElementById(t.containerId))},N.runButtonClick=function(){C().toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),C().attempts++,N.execute()},N.resetButtonClick=function(){H.animating=!1,H.waitingForReport=!1,H.response=null,H.message=null,H.result=null,H.testResults=null,H.failedInput=null,R.clearTimeouts(),y("userExpression")},N.evaluateFunction_=function(t,e){var n={result:w.ResultType.UNSET,testResults:w.TestResults.NO_TESTS_RUN,message:void 0,failedInput:null},r=t.computeEquation().expression.clone(),i=e.computeEquation(),o=i&&i.expression;if(!r.hasSameSignature(o)||!e.computesFunctionCall()){n.result=w.ResultType.FAILURE,n.testResults=w.TestResults.LEVEL_INCOMPLETE_FAIL;var s=r.getValue();return e.getEquation(s)||(n.message=M.missingFunctionError({functionName:s})),n}var u=t.evaluateWithExpression(r),a=e.evaluateWithExpression(r);if(u.err||a.err)return c(u.err||a.err);if(!q.equals(u.result,a.result))return n.result=w.ResultType.FAILURE,n.testResults=w.TestResults.LEVEL_INCOMPLETE_FAIL,n;for(var l=X.range(1,101).concat(X.range(-0,-101,-1)),h=r.numChildren(),p=new W(l,h),f=function(t,e){r.setChildValue(e,t)};p.remaining()>0&&!n.failedInput;){var m=p.next();if(m.forEach(f),u=t.evaluateWithExpression(r),a=e.evaluateWithExpression(r),u.err||a.err)return c(u.err||a.err);q.equals(u.result,a.result)||(n.failedInput=X.clone(m))}return n.failedInput?(n.result=w.ResultType.FAILURE,n.testResults=w.TestResults.APP_SPECIFIC_FAIL,n.message=M.failedInput()):t.computeEquation().expression.isIdenticalTo(e.computeEquation().expression)?(n.result=w.ResultType.SUCCESS,n.testResults=w.TestResults.ALL_PASS):(n.result=w.ResultType.FAILURE,n.testResults=w.TestResults.APP_SPECIFIC_FAIL,n.message=M.wrongInput()),n},N.evaluateSingleVariable_=function(t,e){var n={result:w.ResultType.UNSET,testResults:w.TestResults.NO_TESTS_RUN,message:void 0,failedInput:null};if(!t.computeEquation().expression.isIdenticalTo(e.computeEquation().expression))return l(M.levelIncompleteError());var r=t.getConstants();if(0===r.length)throw new Error("Unexpected: single variable with no constants");if(1!==r.length)throw new Error("No support for multiple constants");for(var i=e.getConstants(),o=i.map(function(t){return t.name}),s=0;s<r.length;s++)if(-1===o.indexOf(r[s].name))return l(M.missingVariableX({var:r[s].name}));var u=e.evaluate();if(u.err)return c(u.err);var a=u.result,h=t.clone(),p=e.clone(),f=function(t,e){var n=r[e].name;h.getEquation(n).expression.setValue(t),p.getEquation(n).expression.setValue(t)};if(u=t.evaluate(),u.err)throw u.err;var m=u.result;if(!q.equals(a,m)){if(r.forEach(function(t,e){var n=t.name,r=p.getEquation(n).expression.evaluate().result;f(r,e)}),u=h.evaluate(),u.err)return c(u.err);if(!q.equals(a,u.result))return l(M.wrongResult())}for(var d=X.range(1,101).concat(X.range(-0,-101,-1)),v=r.length,y=new W(d,v);y.remaining()>0&&!n.failedInput;){var g=y.next();g.forEach(f);var T=h.evaluate(),E=p.evaluate(),I=T.err||E.err;if(I)return c(I);q.equals(T.result,E.result)||(n.failedInput=X.clone(g))}if(n.failedInput){return l(M.wrongOtherValuesX({var:r[0].name}),n.failedInput)}return n.result=w.ResultType.SUCCESS,n.testResults=w.TestResults.ALL_PASS,n},N.evaluateResults_=function(t,e){var n,r,i={result:w.ResultType.UNSET,testResults:w.TestResults.NO_TESTS_RUN,message:void 0,failedInput:null};if(t.computesFunctionCall())return N.evaluateFunction_(t,e);if(t.computesSingleVariable())return N.evaluateSingleVariable_(t,e);if(e.hasVariablesOrFunctions()||t.hasVariablesOrFunctions())return t.isIdenticalTo(e)?(i.result=w.ResultType.SUCCESS,i.testResults=w.TestResults.ALL_PASS):t.isEquivalentTo(e)?(i.result=w.ResultType.FAILURE,i.testResults=w.TestResults.APP_SPECIFIC_FAIL,i.message=M.equivalentExpression()):(i.result=w.ResultType.FAILURE,i.testResults=w.TestResults.LEVEL_INCOMPLETE_FAIL),i;if(n=e.computeEquation(),r=t.computeEquation(),t.isIdenticalTo(e))i.result=w.ResultType.SUCCESS,i.testResults=w.TestResults.ALL_PASS;else{i.result=w.ResultType.FAILURE;var o=i.result===w.ResultType.SUCCESS;i.testResults=C().getTestResults(o),r&&n.expression&&n.expression.isEquivalentTo(r.expression)&&(i.testResults=w.TestResults.APP_SPECIFIC_FAIL,i.message=M.equivalentExpression())}return i},N.execute=function(){N.generateResults_();var t=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace),e=Blockly.Xml.domToText(t),n={app:"calc",level:b.id,result:H.result===w.ResultType.SUCCESS,testResult:H.testResults,program:encodeURIComponent(e),onComplete:_};if(b.isProjectLevel||(H.waitingForReport=!0),C().report(n),C().playAudio(H.result===w.ResultType.SUCCESS?"win":"failure"),h(H.testResults))return I();H.animating=!0,H.result===w.ResultType.SUCCESS&&H.userSet.isAnimatable()&&!b.edit_blocks?N.step(0):(p(),R.setTimeout(function(){v()},K))},N.generateResults_=function(){return H.message=void 0,C().hasUnwantedExtraTopBlocks()?(H.result=w.ResultType.FAILURE,void(H.testResults=w.TestResults.EXTRA_TOP_BLOCKS_FAIL)):C().hasUnfilledFunctionalBlock()?(H.result=w.ResultType.FAILURE,H.testResults=w.TestResults.EMPTY_FUNCTIONAL_BLOCK,void(H.message=C().getUnfilledFunctionalBlockError("functional_compute"))):C().hasQuestionMarksInNumberField()?(H.result=w.ResultType.FAILURE,void(H.testResults=w.TestResults.QUESTION_MARKS_IN_NUMBER_FIELD)):C().hasEmptyFunctionOrVariableName()?(H.result=w.ResultType.FAILURE,H.testResults=w.TestResults.EMPTY_FUNCTION_NAME,void(H.message=A.unnamedFunction())):(H.userSet=new Z(Blockly.mainBlockSpace.getTopUsedBlocks()),H.failedInput=null,H.userSet.hasDivZero()?(H.result=w.ResultType.FAILURE,H.testResults=w.TestResults.APP_SPECIFIC_FAIL,void(H.message=M.divideByZeroError())):H.userSet.hasImaginary()?(H.result=w.ResultType.FAILURE,H.testResults=w.TestResults.APP_SPECIFIC_FAIL,void(H.message=M.imaginaryNumberError())):(b.freePlay||b.edit_blocks?(H.result=w.ResultType.SUCCESS,H.testResults=w.TestResults.FREE_PLAY):(H=Object.assign(H,N.checkExamples_()),null===H.result&&(H=Object.assign(H,N.evaluateResults_(H.targetSet,H.userSet)))),H.result===w.ResultType.SUCCESS&&C().hasExtraTopBlocks()&&Blockly.showUnusedBlocks&&(H.testResults=w.TestResults.PASS_WITH_EXTRA_TOP_BLOCKS),void(H.testResults!==w.TestResults.LEVEL_INCOMPLETE_FAIL||H.message||(H.message=M.levelIncompleteError()))))},N.checkExamples_=function(){var t={};if(!b.examplesRequired)return t;var e=C().getFunctionWithoutTwoExamples();if(e)return t.result=w.ResultType.FAILURE,t.testResults=w.TestResults.EXAMPLE_FAILED,t.message=A.emptyExampleBlockErrorMsg({functionName:e}),t;var n=C().getUnfilledFunctionalExample();if(n){t.result=w.ResultType.FAILURE,t.testResults=w.TestResults.EXAMPLE_FAILED;var r=n.getRootBlock().getInputTargetBlock("ACTUAL").getTitleValue("NAME");return t.message=A.emptyExampleBlockErrorMsg({functionName:r}),t}var i=C().checkForFailingExamples(o);return i&&(t.result=!1,t.testResults=w.TestResults.EXAMPLE_FAILED,t.message=A.exampleErrorMessage({functionName:i})),t},N.step=function(t){var e=g(t);R.setTimeout(function(){e?(g(t+1),v()):N.step(t+1)},K)},N.__testonly__={displayGoal:u,displayComplexUserExpressions:p,appState:H}},3028:function(t,e,n){"use strict";var r=n(788),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=n(1),s=n(819).default,u=n(824),a=function(t){return o.createElement("span",null,o.createElement(i.default,null,o.createElement("svg",{version:"1.1",id:"svgCalc"},o.createElement("image",{id:"background",height:"400",width:"400",x:"0",y:"0",xlinkHref:"/blockly/media/skins/calc/background.png"}),o.createElement("g",{id:"userExpression",className:"expr",transform:"translate(0, 100)"}),o.createElement("g",{id:"answerExpression",className:"expr",transform:"translate(0, 350)"}))),o.createElement(s,null),o.createElement(u,null))};t.exports=a},3029:function(t,e,n){"use strict";var r=n(82),i=n(2882),o=n(2884),s=n(2128),u=n(71),a=function t(e){this.compute_=null,this.equations_=[],e&&e.forEach(function(e){var n=t.getEquationFromBlock(e);n&&this.addEquation_(n)},this)};t.exports=a,a.prototype.clone=function(){var t=new a;return t.compute_=null,this.compute_&&(t.compute_=this.compute_.clone()),t.equations_=this.equations_.map(function(t){return t.clone()}),t},a.prototype.addEquation_=function(t){if(t.name){if(this.getEquation(t.name))throw new Error("equation already exists: "+t.name);this.equations_.push(t)}else{if(this.compute_)throw new Error("compute expression already exists");this.compute_=t}},a.prototype.getEquation=function(t){if(null===t)return this.computeEquation();for(var e=0;e<this.equations_.length;e++)if(this.equations_[e].name===t)return this.equations_[e];return null},a.prototype.computeEquation=function(){return this.compute_},a.prototype.hasVariablesOrFunctions=function(){return this.equations_.length>0},a.prototype.computesFunctionCall=function(){return!!this.compute_&&this.compute_.expression.isFunctionCall()},a.prototype.computesSingleVariable=function(){return!!this.compute_&&this.compute_.expression.isVariable()},a.prototype.computesSingleConstant=function(){if(!this.compute_||1!==this.equations_.length)return!1;var t=this.equations_[0],e=this.compute_.expression;return e.isVariable()&&t.expression.isNumber()&&e.getValue()===t.name},a.prototype.isAnimatable=function(){return!!this.compute_&&(!this.hasVariablesOrFunctions()&&0!==this.compute_.expression.depth())},a.prototype.getConstants=function(){return this.equations_.filter(function(t){return 0===t.params.length&&t.expression.isNumber()})},a.prototype.isIdenticalTo=function(t){if(this.equations_.length!==t.equations_.length)return!1;var e=t.computeEquation().expression;if(!this.compute_.expression.isIdenticalTo(e))return!1;for(var n=0;n<this.equations_.length;n++){var r=this.equations_[n],i=t.getEquation(r.name);if(!i||!r.expression.isIdenticalTo(i.expression))return!1}return!0},a.prototype.isEquivalentTo=function(t){if(this.equations_.length!==t.equations_.length)return!1;var e=t.computeEquation().expression;if(!this.compute_.expression.isEquivalentTo(e))return!1;for(var n=0;n<this.equations_.length;n++){var r=this.equations_[n],i=t.getEquation(r.name);if(!i||!r.expression.isEquivalentTo(i.expression))return!1}return!0},a.prototype.sortedEquations=function(){return this.equations_.sort(function(t,e){return t.name.localeCompare(e.name)}),this.equations_},a.prototype.hasDivZero=function(){var t=this.evaluate();return t.err&&t.err instanceof i.DivideByZeroError},a.prototype.hasImaginary=function(){var t=this.evaluate();return t.err&&t.err instanceof i.ImaginaryNumberError},a.prototype.evaluate=function(){return this.evaluateWithExpression(this.compute_.expression)},a.prototype.evaluateWithExpression=function(t){if(0===this.equations_.length)return t.evaluate();var e,n,o,a={},l=function(t){n[t]=s.makeFloat(1)};do{e=!1;for(var c=0;c<this.equations_.length;c++){var h=this.equations_[c];if(h.isFunction()){if(a[h.name])continue;if(n=r.clone(a),n[h.name]={variables:h.params,expression:h.expression},h.params.forEach(l),o=h.expression.evaluate(n),o.err){if(o.err instanceof i.DivideByZeroError||o.err instanceof i.ImaginaryNumberError||u.isInfiniteRecursionError(o.err))return{err:o.err};continue}e=!0,a[h.name]={variables:h.params,expression:h.expression}}else if(void 0===a[h.name])if(o=h.expression.evaluate(a),o.err){if(o.err instanceof i.DivideByZeroError||o.err instanceof i.ImaginaryNumberError)return{err:o.err}}else e=!0,a[h.name]=o.result}}while(e);return t.evaluate(a)},a.getEquationFromBlock=function(t){var e;if(!t)return null;var n=t.getChildren()[0];switch(t.type){case"functional_compute":return n?a.getEquationFromBlock(n):new o(null,[],null);case"functional_plus":case"functional_minus":case"functional_times":case"functional_dividedby":case"functional_pow":case"functional_sqrt":case"functional_squared":var r=t.getTitles()[0].getValue(),s=["ARG1"];t.getInput("ARG2")&&s.push("ARG2");var u=s.map(function(e){var n=t.getInputTargetBlock(e);return n?a.getEquationFromBlock(n).expression:0},this);return new o(null,[],new i(r,u,t.id));case"functional_math_number":case"functional_math_number_dropdown":var l=t.getTitleValue("NUM")||0;return"???"===l&&(l=0),new o(null,[],new i(parseFloat(l),[],t.id));case"functional_call":e=t.getCallName();if(Blockly.Procedures.getDefinition(e,Blockly.mainBlockSpace).isVariable())return new o(null,[],new i(e));for(var c,h,p=[],f=0;c=t.getInput("ARG"+f);f++)h=c.connection.targetBlock(),p.push(h?a.getEquationFromBlock(h).expression:new i(0));return new o(null,[],new i(e,p));case"functional_definition":e=t.getTitleValue("NAME");var m=n?a.getEquationFromBlock(n).expression:new i(0);return new o(e,t.getVars(),m);case"functional_parameters_get":return new o(null,[],new i(t.getTitleValue("VAR")));case"functional_example":return null;default:throw"Unknown block type: "+t.type}}},3030:function(t,e,n){"use strict";var r=function(t,e){this.numParams_=e,this.remaining_=Math.pow(t.length,e),this.availableValues_=t,this.indices_=[-1];for(var n=1;n<e;n++)this.indices_[n]=0};t.exports=r,r.prototype.next=function(){if(0===this.remaining_)throw new Error("empty");var t,e=0;do{t=!1,++this.indices_[e]===this.availableValues_.length&&(this.indices_[e]=0,e++,t=!0)}while(t&&e<this.numParams_);return this.remaining_--,this.indices_.map(function(t){return this.availableValues_[t]},this)},r.prototype.remaining=function(){return this.remaining_}},3031:function(t,e,n){"use strict";var r=n(743);t.exports={example1:{solutionBlocks:r.calcBlockXml("functional_times",[r.calcBlockXml("functional_plus",[1,2]),r.calcBlockXml("functional_plus",[3,4])]),ideal:1/0,toolbox:r.createToolbox(r.blockOfType("functional_plus")+r.blockOfType("functional_minus")+r.blockOfType("functional_times")+r.blockOfType("functional_dividedby")+r.blockOfType("functional_math_number")+'<block type="functional_math_number_dropdown">  <title name="NUM" config="0,1,2,3,4,5,6,7,8,9,10">???</title></block>'),startBlocks:"",requiredBlocks:"",freePlay:!1},custom:{answer:"",ideal:1/0,toolbox:"",startBlocks:"",requiredBlocks:"",freePlay:!1}}}},[3024]);