webpackJsonp([20],{2747:function(t,e,a){"use strict";var l=a(744),n={flappy:{}};e.load=function(t,e){var a=l.load(t,e),o=n[a.id];return a.scifi={background:a.assetUrl("background_scifi.png"),avatar:a.assetUrl("avatar_scifi.png"),obstacle_bottom:a.assetUrl("obstacle_bottom_scifi.png"),obstacle_bottom_thumb:a.assetUrl("obstacle_bottom_scifi_thumb.png"),obstacle_top:a.assetUrl("obstacle_top_scifi.png"),ground:a.assetUrl("ground_scifi.png"),ground_thumb:a.assetUrl("ground_scifi_thumb.png")},a.underwater={background:a.assetUrl("background_underwater.png"),avatar:a.assetUrl("avatar_underwater.png"),obstacle_bottom:a.assetUrl("obstacle_bottom_underwater.png"),obstacle_bottom_thumb:a.assetUrl("obstacle_bottom_underwater_thumb.png"),obstacle_top:a.assetUrl("obstacle_top_underwater.png"),ground:a.assetUrl("ground_underwater.png"),ground_thumb:a.assetUrl("ground_underwater_thumb.png")},a.cave={background:a.assetUrl("background_cave.png"),avatar:a.assetUrl("avatar_cave.png"),obstacle_bottom:a.assetUrl("obstacle_bottom_cave.png"),obstacle_bottom_thumb:a.assetUrl("obstacle_bottom_cave_thumb.png"),obstacle_top:a.assetUrl("obstacle_top_cave.png"),ground:a.assetUrl("ground_cave.png"),ground_thumb:a.assetUrl("ground_cave_thumb.png")},a.santa={background:a.assetUrl("background_santa.png"),avatar:a.assetUrl("santa.png"),obstacle_bottom:a.assetUrl("obstacle_bottom_santa.png"),obstacle_bottom_thumb:a.assetUrl("obstacle_bottom_santa_thumb.png"),obstacle_top:a.assetUrl("obstacle_top_santa.png"),ground:a.assetUrl("ground_santa.png"),ground_thumb:a.assetUrl("ground_santa_thumb.png")},a.night={background:a.assetUrl("background_night.png")},a.redbird={avatar:a.assetUrl("avatar_redbird.png")},a.laser={obstacle_bottom:a.assetUrl("obstacle_bottom_laser.png"),obstacle_bottom_thumb:a.assetUrl("obstacle_bottom_laser_thumb.png"),obstacle_top:a.assetUrl("obstacle_top_laser.png")},a.lava={ground:a.assetUrl("ground_lava.png"),ground_thumb:a.assetUrl("ground_lava_thumb.png")},a.shark={avatar:a.assetUrl("shark.png")},a.easter={avatar:a.assetUrl("easterbunny.png")},a.batman={avatar:a.assetUrl("batman.png")},a.submarine={avatar:a.assetUrl("submarine.png")},a.unicorn={avatar:a.assetUrl("unicorn.png")},a.fairy={avatar:a.assetUrl("fairy.png")},a.superman={avatar:a.assetUrl("superman.png")},a.turkey={avatar:a.assetUrl("turkey.png")},a.ground=a.assetUrl("ground.png"),a.ground_thumb=a.assetUrl("ground_thumb.png"),a.obstacle_top=a.assetUrl("obstacle_top.png"),a.obstacle_bottom=a.assetUrl("obstacle_bottom.png"),a.obstacle_bottom_thumb=a.assetUrl("obstacle_bottom_thumb.png"),a.instructions=a.assetUrl("instructions.png"),a.clickrun=a.assetUrl("clickrun.png"),a.getready=a.assetUrl("getready.png"),a.gameover=a.assetUrl("gameover.png"),a.flapIcon=a.assetUrl("flap-bird.png"),a.crashIcon=a.assetUrl("when-crash.png"),a.collideObstacleIcon=a.assetUrl("when-obstacle.png"),a.collideGroundIcon=a.assetUrl("when-crash.png"),a.enterObstacleIcon=a.assetUrl("when-pass.png"),a.tiles=a.assetUrl("tiles.png"),a.goal=a.assetUrl("goal.png"),a.goalSuccess=a.assetUrl("goal_success.png"),a.obstacle=a.assetUrl("obstacle.png"),a.obstacleScale=o.obstacleScale||1,a.largerObstacleAnimationTiles=a.assetUrl(o.largerObstacleAnimationTiles),a.hittingWallAnimation=a.assetUrl(o.hittingWallAnimation),a.approachingGoalAnimation=a.assetUrl(o.approachingGoalAnimation),a.obstacleSound=[a.assetUrl("obstacle.mp3"),a.assetUrl("obstacle.ogg")],a.wallSound=[a.assetUrl("wall.mp3"),a.assetUrl("wall.ogg")],a.winGoalSound=[a.assetUrl("win_goal.mp3"),a.assetUrl("win_goal.ogg")],a.wall0Sound=[a.assetUrl("wall0.mp3"),a.assetUrl("wall0.ogg")],a.dieSound=[a.assetUrl("sfx_die.mp3"),a.assetUrl("sfx_die.ogg")],a.hitSound=[a.assetUrl("sfx_hit.mp3"),a.assetUrl("sfx_hit.ogg")],a.pointSound=[a.assetUrl("sfx_point.mp3"),a.assetUrl("sfx_point.ogg")],a.swooshingSound=[a.assetUrl("sfx_swooshing.mp3"),a.assetUrl("sfx_swooshing.ogg")],a.wingSound=[a.assetUrl("sfx_wing.mp3"),a.assetUrl("sfx_wing.ogg")],a.jetSound=[a.assetUrl("jet.mp3"),a.assetUrl("jet.ogg")],a.crashSound=[a.assetUrl("crash.mp3"),a.assetUrl("crash.ogg")],a.jingleSound=[a.assetUrl("jingle.mp3"),a.assetUrl("jingle.ogg")],a.laserSound=[a.assetUrl("laser.mp3"),a.assetUrl("laser.ogg")],a.splashSound=[a.assetUrl("splash.mp3"),a.assetUrl("splash.ogg")],a.graph=o.graph,a.background=a.assetUrl("background.png"),a}},2893:function(t,e,a){"use strict";t.exports={WORKSPACE_BUFFER:20,WORKSPACE_COL_WIDTH:210,WORKSPACE_ROW_HEIGHT:120,AVATAR_HEIGHT:24,AVATAR_WIDTH:34,AVATAR_Y_OFFSET:0}},3069:function(t,e,a){a(151),a(152),t.exports=a(3070)},3070:function(t,e,a){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}var n=a(3071),o=l(n);(0,l(a(820)).default)().then(o.default)},3071:function(t,e,a){"use strict";(function(l){function n(t){return t&&t.__esModule?t:{default:t}}function o(t){t.skinsModule=y.default,t.blocksModule=u.default,(0,r.default)(window.Flappy,g.default,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var s=a(853),r=n(s),i=a(3072),c=n(i),p=a(2894),u=n(p),d=a(3076),g=n(d),b=a(2747),y=n(b);window.Flappy=c.default,void 0!==l&&(l.Flappy=window.Flappy),t.exports=e.default}).call(e,a(59))},3072:function(t,e,a){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}function n(){var t=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace),e=Blockly.Xml.domToText(t);G.waitingForReport=!0,_().report({app:"flappy",level:I.id,result:G.result===c.ResultType.SUCCESS,testResult:G.testResults,program:encodeURIComponent(e),onComplete:G.onReportComplete})}var o=a(850),s=l(o),r=a(1735),i=a(237),c=a(216),p=a(3073),u=l(p),d=a(1157),g=a(498),b=a(1),y=a(32),_=a(597).singleton,h=a(40),f=a(2746),m=a(3074),A=a(53).Provider,E=a(944),S=a(3075),v=a(594),k=a(2893),w=a(71),G=t.exports;G.GameStates={WAITING:0,ACTIVE:1,ENDING:2,OVER:3},G.gameState=G.GameStates.WAITING,G.clickPending=!1,G.avatarVelocity=0;var I,C;G.obstacles=[];var T;_().setCheckForEmptyBlocks(!0);var O=function(){var t=G.MIN_OBSTACLE_HEIGHT,e=G.MAZE_HEIGHT-G.GROUND_HEIGHT-G.MIN_OBSTACLE_HEIGHT-G.GAP_SIZE;return Math.floor(Math.random()*(e-t)+t)};G.scale={snapRadius:1,stepSpeed:33};var x={text:f.shareFlappyTwitterDonor({donor:(0,r.getRandomDonorTwitter)()}),hashtag:"FlappyCode"},B=k.AVATAR_HEIGHT,H=k.AVATAR_WIDTH,R=function(){(T=w.valueOr(I.infoText,!0))||(G.gameState=G.GameStates.ACTIVE);for(var t in I.scale)G.scale[t]=I.scale[t];G.MARKER_HEIGHT=43,G.MARKER_WIDTH=50,G.MAZE_WIDTH=400,G.MAZE_HEIGHT=400,G.GROUND_WIDTH=400,G.GROUND_HEIGHT=48,G.GOAL_SIZE=55,G.OBSTACLE_WIDTH=52,G.OBSTACLE_HEIGHT=320,G.MIN_OBSTACLE_HEIGHT=48,G.setGapHeight(m.GapHeight.NORMAL),G.OBSTACLE_SPACING=250;var e=2*G.MAZE_WIDTH/G.OBSTACLE_SPACING;I.obstacles||(e=0);for(var a=function(t){this.x=t,this.gapStart=O(),this.hitAvatar=!1},l=function(){var t=G.avatarX+H,e=G.avatarY+B,a=this.x+G.OBSTACLE_WIDTH,l=this.gapStart+G.GAP_SIZE;return t>this.x&&t<a&&G.avatarY>this.gapStart&&e<l},n=0;n<e;n++)G.obstacles.push({x:1.5*G.MAZE_WIDTH+n*G.OBSTACLE_SPACING,gapStart:O(),hitAvatar:!1,reset:a,containsAvatar:l})},U=function(){var t,e,a=document.getElementById("svgFlappy");if(a.setAttribute("width",G.MAZE_WIDTH),a.setAttribute("height",G.MAZE_HEIGHT),document.getElementById("visualizationColumn").style.width=G.MAZE_WIDTH+"px",C.background&&(e=document.createElementNS(Blockly.SVG_NS,"image"),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C.background),e.setAttribute("id","background"),e.setAttribute("height",G.MAZE_HEIGHT),e.setAttribute("width",G.MAZE_WIDTH),e.setAttribute("x",0),e.setAttribute("y",0),a.appendChild(e)),G.obstacles.forEach(function(t,e){var l=document.createElementNS(Blockly.SVG_NS,"image");l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C.obstacle_top),l.setAttribute("id","obstacle_top"+e),l.setAttribute("height",G.OBSTACLE_HEIGHT),l.setAttribute("width",G.OBSTACLE_WIDTH),a.appendChild(l);var n=document.createElementNS(Blockly.SVG_NS,"image");n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C.obstacle_bottom),n.setAttribute("id","obstacle_bottom"+e),n.setAttribute("height",G.OBSTACLE_HEIGHT),n.setAttribute("width",G.OBSTACLE_WIDTH),a.appendChild(n)}),I.ground)for(t=0;t<G.MAZE_WIDTH/G.GROUND_WIDTH+1;t++){var l=document.createElementNS(Blockly.SVG_NS,"image");l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C.ground),l.setAttribute("id","ground"+t),l.setAttribute("height",G.GROUND_HEIGHT),l.setAttribute("width",G.GROUND_WIDTH),l.setAttribute("x",0),l.setAttribute("y",G.MAZE_HEIGHT-G.GROUND_HEIGHT),a.appendChild(l)}if(I.goal&&I.goal.startX){var n=document.createElementNS(Blockly.SVG_NS,"image");n.setAttribute("id","goal"),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C.goal),n.setAttribute("height",G.GOAL_SIZE),n.setAttribute("width",G.GOAL_SIZE),n.setAttribute("x",I.goal.startX),n.setAttribute("y",I.goal.startY),a.appendChild(n)}var o=document.createElementNS(Blockly.SVG_NS,"clipPath");o.setAttribute("id","avatArclipPath");var s=document.createElementNS(Blockly.SVG_NS,"rect");s.setAttribute("id","avatArclipRect"),s.setAttribute("width",G.MAZE_WIDTH),s.setAttribute("height",G.MAZE_HEIGHT-G.GROUND_HEIGHT),o.appendChild(s),a.appendChild(o);var r=document.createElementNS(Blockly.SVG_NS,"image");r.setAttribute("id","avatar"),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C.avatar),r.setAttribute("height",B),r.setAttribute("width",H),I.ground&&r.setAttribute("clip-path","url(#avatArclipPath)"),a.appendChild(r);var i=document.createElementNS(Blockly.SVG_NS,"image");i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C.instructions),i.setAttribute("id","instructions"),i.setAttribute("height",50),i.setAttribute("width",159),i.setAttribute("x",110),i.setAttribute("y",170),i.setAttribute("visibility","hidden"),a.appendChild(i);var c=document.createElementNS(Blockly.SVG_NS,"image");c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C.getready),c.setAttribute("id","getready"),c.setAttribute("height",50),c.setAttribute("width",183),c.setAttribute("x",108),c.setAttribute("y",80),c.setAttribute("visibility","hidden"),a.appendChild(c);var p=document.createElementNS(Blockly.SVG_NS,"image");p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C.clickrun),p.setAttribute("id","clickrun"),p.setAttribute("height",41),p.setAttribute("width",273),p.setAttribute("x",64),p.setAttribute("y",200),p.setAttribute("visibility","visibile"),a.appendChild(p);var u=document.createElementNS(Blockly.SVG_NS,"image");u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C.gameover),u.setAttribute("id","gameover"),u.setAttribute("height",41),u.setAttribute("width",192),u.setAttribute("x",104),u.setAttribute("y",80),u.setAttribute("visibility","hidden"),a.appendChild(u);var d=document.createElementNS(Blockly.SVG_NS,"text");d.setAttribute("id","score"),d.setAttribute("class","flappy-score"),d.setAttribute("x",G.MAZE_WIDTH/2),d.setAttribute("y",60),d.appendChild(document.createTextNode("0")),d.setAttribute("visibility","hidden"),a.appendChild(d);var g=document.createElementNS(Blockly.SVG_NS,"rect");g.setAttribute("width",G.MAZE_WIDTH),g.setAttribute("height",G.MAZE_HEIGHT),g.setAttribute("fill-opacity",0),g.addEventListener("touchstart",function(t){G.onMouseDown(t),t.preventDefault()}),g.addEventListener("mousedown",function(t){G.onMouseDown(t)}),a.appendChild(g)};G.calcDistance=function(t,e){return Math.sqrt(t*t+e*e)};var F=function(t){return!!(G.avatarX+H>=t.x&&G.avatarX<=t.x+G.OBSTACLE_WIDTH&&(G.avatarY<=t.gapStart||G.avatarY+B>=t.gapStart+G.GAP_SIZE))};G.activeTicks=function(){return G.firstActiveTick<0?0:G.tickCount-G.firstActiveTick},G.callUserGeneratedCode=function(t){try{t.call(G,m)}catch(t){console&&console.log(t)}},G.onTick=function(){var t,e;if(G.firstActiveTick<0&&G.gameState===G.GameStates.ACTIVE&&(G.firstActiveTick=G.tickCount),G.tickCount++,1===G.tickCount&&G.callUserGeneratedCode(G.whenRunButton),G.clickPending&&G.gameState<=G.GameStates.ACTIVE&&(G.callUserGeneratedCode(G.whenClick),G.clickPending=!1),t=G.avatarY+B<G.MAZE_HEIGHT-G.GROUND_HEIGHT,G.gameState===G.GameStates.ACTIVE){G.avatarVelocity+=G.gravity,G.avatarY=G.avatarY+G.avatarVelocity;var a=I.ground?G.MAZE_HEIGHT-G.GROUND_HEIGHT-B+1:1.5*G.MAZE_HEIGHT;G.avatarY=Math.min(G.avatarY,a),G.avatarY=Math.max(G.avatarY,-.5*G.MAZE_HEIGHT),G.obstacles.forEach(function(t,e){var a=t.x>G.avatarX+H;t.x-=G.SPEED;var l=t.x>G.avatarX+H;if(a&&!l&&G.avatarY>t.gapStart&&G.avatarY+B<t.gapStart+G.GAP_SIZE&&G.callUserGeneratedCode(G.whenEnterObstacle),!t.hitAvatar&&F(t)){t.hitAvatar=!0;try{G.whenCollideObstacle(m)}catch(t){}}var n=G.obstacles.length,o=(e-1+n)%n;t.x+G.OBSTACLE_WIDTH<0&&t.reset(G.obstacles[o].x+G.OBSTACLE_SPACING)}),e=G.avatarY+B<G.MAZE_HEIGHT-G.GROUND_HEIGHT,t&&!e&&G.callUserGeneratedCode(G.whenCollideGround),I.goal&&I.goal.moving&&(G.goalX-=G.SPEED,G.goalX+G.GOAL_SIZE<0&&(G.goalX=G.MAZE_WIDTH+G.GOAL_SIZE))}if(G.gameState===G.GameStates.ENDING){G.avatarY+=10;var l=G.MAZE_HEIGHT-G.GROUND_HEIGHT-H+4;G.avatarY>=l&&(G.avatarY=l,G.gameState=G.GameStates.OVER,G.gameOverTick=G.tickCount),document.getElementById("avatar").setAttribute("transform","translate("+H+", 0) rotate(90, "+G.avatarX+", "+G.avatarY+")"),T&&document.getElementById("gameover").setAttribute("visibility","visibile")}G.displayAvatar(G.avatarX,G.avatarY),G.displayObstacles(),G.gameState<=G.GameStates.ACTIVE&&(G.displayGround(G.tickCount),G.displayGoal()),L()&&G.onPuzzleComplete()},G.onMouseDown=function(t){if(G.intervalId){if(G.clickPending=!0,G.gameState===G.GameStates.WAITING)G.gameState=G.GameStates.ACTIVE;else if(G.gameState===G.GameStates.OVER&&G.gameOverTick+10<G.tickCount){var e=document.getElementById("resetButton");e&&e.click()}document.getElementById("instructions").setAttribute("visibility","hidden"),document.getElementById("getready").setAttribute("visibility","hidden")}else G.gameState===G.GameStates.WAITING&&G.runButtonClick()},G.init=function(t){_().reset=this.reset.bind(this),_().runButtonClick=this.runButtonClick.bind(this),G.clearEventHandlersKillTickLoop(),C=t.skin,I=t.level,t.grayOutUndeletableBlocks=I.grayOutUndeletableBlocks,R(),t.loadAudio=function(){_().loadAudio(C.winSound,"win"),_().loadAudio(C.startSound,"start"),_().loadAudio(C.failureSound,"failure"),_().loadAudio(C.obstacleSound,"obstacle"),_().loadAudio(C.dieSound,"sfx_die"),_().loadAudio(C.hitSound,"sfx_hit"),_().loadAudio(C.pointSound,"sfx_point"),_().loadAudio(C.swooshingSound,"sfx_swooshing"),_().loadAudio(C.wingSound,"sfx_wing"),_().loadAudio(C.winGoalSound,"winGoal"),_().loadAudio(C.jetSound,"jet"),_().loadAudio(C.jingleSound,"jingle"),_().loadAudio(C.crashSound,"crash"),_().loadAudio(C.laserSound,"laser"),_().loadAudio(C.splashSound,"splash"),_().loadAudio(C.wallSound,"wall"),_().loadAudio(C.wall0Sound,"wall0")},t.afterInject=function(){Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=G.scale.snapRadius,U()},t.trashcan=!1,t.twitter=x,t.makeYourOwn=t.share,t.makeString=h.makeYourOwnFlappy(),t.makeUrl="http://code.org/flappy",t.makeImage=_().assetUrl("media/flappy_promo.png"),t.enableShowCode=!1,t.enableShowBlockCount=!1,I.isK1&&(k.WORKSPACE_ROW_HEIGHT*=1.5);var e=k.WORKSPACE_BUFFER,a=e+k.WORKSPACE_COL_WIDTH,l=k.WORKSPACE_BUFFER,n=l+k.WORKSPACE_ROW_HEIGHT,o=n+k.WORKSPACE_ROW_HEIGHT;t.blockArrangement={flappy_whenClick:{x:e,y:l},when_run:{x:e,y:l},flappy_whenCollideGround:{x:a,y:l},flappy_whenCollideObstacle:{x:a,y:n},flappy_whenEnterObstacle:{x:a,y:o}},-1===I.startBlocks.indexOf("whenCollide")&&(t.blockArrangement.flappy_whenEnterObstacle={x:a,y:l}),-1!==I.startBlocks.indexOf("when_run")&&(t.blockArrangement.flappy_whenClick.y=n),t.embed&&t.level.markdownInstructions&&!t.level.instructions&&(t.noInstructionsWhenCollapsed=!0,t.centerEmbedded=!1);var s=function(){_().init(t);var e=document.getElementById("rightButton");e&&v.addClickTouchEvent(e,G.onPuzzleComplete)};_().setPageConstants(t),y.render(b.createElement(A,{store:(0,i.getStore)()},b.createElement(E,{visualizationColumn:b.createElement(S,{showFinishButton:!t.level.isProjectLevel}),onMount:s})),document.getElementById(t.containerId))},G.clearEventHandlersKillTickLoop=function(){G.whenClick=null,G.whenCollideGround=null,G.whenCollideObstacle=null,G.whenEnterObstacle=null,G.whenRunButton=null,G.intervalId&&window.clearInterval(G.intervalId),G.intervalId=0},G.reset=function(t){G.clearEventHandlersKillTickLoop(),G.gameState=G.GameStates.WAITING,G.playerScore=0,G.avatarVelocity=0,G.obstacles.forEach(function(t,e){t.reset(1.5*G.MAZE_WIDTH+e*G.OBSTACLE_SPACING)}),G.SPEED=0,G.FLAP_VELOCITY=-11,G.setBackground("flappy"),G.setObstacle("flappy"),G.setPlayer("flappy"),G.setGround("flappy"),G.setGapHeight(m.GapHeight.NORMAL),G.gravity=m.Gravity.NORMAL,G.avatarX=110,G.avatarY=150,I.goal&&I.goal.startX&&(G.goalX=I.goal.startX,G.goalY=I.goal.startY),document.getElementById("avatar").setAttribute("transform",""),document.getElementById("score").setAttribute("visibility","hidden"),document.getElementById("instructions").setAttribute("visibility","hidden"),document.getElementById("clickrun").setAttribute("visibility","visible"),document.getElementById("getready").setAttribute("visibility","hidden"),document.getElementById("gameover").setAttribute("visibility","hidden"),G.displayAvatar(G.avatarX,G.avatarY),G.displayObstacles(),G.displayGround(0),G.displayGoal()},G.runButtonClick=function(){I.edit_blocks&&G.onPuzzleComplete();var t=document.getElementById("runButton"),e=document.getElementById("resetButton");if(e.style.minWidth||(e.style.minWidth=t.offsetWidth+"px"),document.getElementById("clickrun").setAttribute("visibility","hidden"),document.getElementById("instructions").setAttribute("visibility","visible"),document.getElementById("getready").setAttribute("visibility","visible"),_().toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),_().attempts++,G.execute(),I.freePlay&&!I.isProjectLevel){document.getElementById("right-button-cell").className="right-button-cell-enabled"}I.score&&(document.getElementById("score").setAttribute("visibility","visible"),G.displayScore())};var N=function(){var t=(0,i.getStore)().getState().progress.signInState===g.SignInState.SignedIn;G.waitingForReport||(0,d.dataURIFromURI)(u.default).then(function(e){_().displayFeedback({feedbackType:G.testResults,response:G.response,level:I,showingSharing:I.freePlay&&I.shareable,twitter:x,appStrings:{reinfFeedbackMsg:f.reinfFeedbackMsg(),sharingText:f.shareGame()},saveToProjectGallery:!0,feedbackImage:e,disableSaveToGallery:!t})})};G.onReportComplete=function(t){G.response=t,G.waitingForReport=!1,_().onReportComplete(t),N()},G.execute=function(){G.result=c.ResultType.UNSET,G.testResults=c.TestResults.NO_TESTS_RUN,G.waitingForReport=!1,G.response=null;var t=Blockly.Generator.blockSpaceToCode.bind(Blockly.Generator,"JavaScript"),e={whenClick:{code:t("flappy_whenClick")},whenCollideGround:{code:t("flappy_whenCollideGround")},whenEnterObstacle:{code:t("flappy_whenEnterObstacle")},whenCollideObstacle:{code:t("flappy_whenCollideObstacle")},whenRunButton:{code:t("when_run")}};s.default.evalWithEvents({Flappy:m},e).hooks.forEach(function(t){G[t.name]=t.func}),_().playAudio("start"),G.tickCount=0,G.firstActiveTick=-1,G.gameOverTick=0,G.intervalId&&window.clearInterval(G.intervalId),G.intervalId=window.setInterval(G.onTick,G.scale.stepSpeed)},G.onPuzzleComplete=function(){I.freePlay&&(G.result=c.ResultType.SUCCESS),G.clearEventHandlersKillTickLoop();var t=G.result===c.ResultType.SUCCESS;I.freePlay?G.testResults=c.TestResults.FREE_PLAY:G.testResults=_().getTestResults(t),!I.appSpecificFailError||G.testResults!==c.TestResults.TOO_FEW_BLOCKS_FAIL&&G.testResults!==c.TestResults.LEVEL_INCOMPLETE_FAIL||(G.testResults=c.TestResults.APP_SPECIFIC_FAIL),G.testResults>=c.TestResults.FREE_PLAY?_().playAudioOnWin():_().playAudioOnFailure(),I.editCode&&(G.testResults=t?c.TestResults.ALL_PASS:c.TestResults.TOO_FEW_BLOCKS_FAIL),n()},G.displayAvatar=function(t,e){var a=document.getElementById("avatar");a.setAttribute("x",t),a.setAttribute("y",e)},G.displayGoal=function(){if(G.goalX){var t=document.getElementById("goal");t.setAttribute("x",G.goalX),t.setAttribute("y",G.goalY)}},G.displayGround=function(t){if(I.ground){var e=t*G.SPEED;e%=G.GROUND_WIDTH;for(var a=0;a<G.MAZE_WIDTH/G.GROUND_WIDTH+1;a++){var l=document.getElementById("ground"+a);l.setAttribute("x",-e+a*G.GROUND_WIDTH),l.setAttribute("y",G.MAZE_HEIGHT-G.GROUND_HEIGHT)}}},G.displayObstacles=function(){for(var t=0;t<G.obstacles.length;t++){var e=G.obstacles[t],a=document.getElementById("obstacle_top"+t);a.setAttribute("x",e.x),a.setAttribute("y",e.gapStart-G.OBSTACLE_HEIGHT);var l=document.getElementById("obstacle_bottom"+t);l.setAttribute("x",e.x),l.setAttribute("y",e.gapStart+G.GAP_SIZE)}},G.displayScore=function(){document.getElementById("score").textContent=G.playerScore},G.flap=function(t){var e=I.defaultFlap||"NORMAL";G.avatarVelocity=t||m.FlapHeight[e]},G.setGapHeight=function(t){var e=G.MAZE_HEIGHT-G.MIN_OBSTACLE_HEIGHT-G.OBSTACLE_HEIGHT;t<e&&(t=e),G.GAP_SIZE=t};var P=function(t){return"flappy"===t?C:C[t]};G.setBackground=function(t){document.getElementById("background").setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",P(t).background)},G.setPlayer=function(t){document.getElementById("avatar").setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",P(t).avatar)},G.setObstacle=function(t){var e;G.obstacles.forEach(function(a,l){e=document.getElementById("obstacle_top"+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",P(t).obstacle_top),e=document.getElementById("obstacle_bottom"+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",P(t).obstacle_bottom)})},G.setGround=function(t){if(I.ground){var e,a;for(a=0;a<G.MAZE_WIDTH/G.GROUND_WIDTH+1;a++)e=document.getElementById("ground"+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",P(t).ground)}};var L=function(){return I.goal&&I.goal.successCondition&&I.goal.successCondition()?(G.result=c.ResultType.SUCCESS,!0):!!(I.goal&&I.goal.failureCondition&&I.goal.failureCondition())&&(G.result=c.ResultType.FAILURE,!0)}},3073:function(t,e,a){t.exports=a.p+"placeholderwpa6fe4f1306776d8b941704e83016db21.jpg"},3074:function(t,e,a){"use strict";var l=a(597).singleton;e.FlapHeight={VERY_SMALL:-6,SMALL:-8,NORMAL:-11,LARGE:-13,VERY_LARGE:-15},e.LevelSpeed={VERY_SLOW:1,SLOW:3,NORMAL:4,FAST:6,VERY_FAST:8},e.GapHeight={VERY_SMALL:65,SMALL:75,NORMAL:100,LARGE:125,VERY_LARGE:150},e.Gravity={VERY_LOW:.5,LOW:.75,NORMAL:1,HIGH:1.25,VERY_HIGH:1.5},e.random=function(t){return t[Math.floor(Math.random()*t.length)]},e.setScore=function(t,e){l().highlight(t),Flappy.playerScore=e,Flappy.displayScore()},e.setGravity=function(t,e){l().highlight(t),Flappy.gravity=e},e.setGround=function(t,e){l().highlight(t),Flappy.setGround(e)},e.setObstacle=function(t,e){l().highlight(t),Flappy.setObstacle(e)},e.setPlayer=function(t,e){l().highlight(t),Flappy.setPlayer(e)},e.setGapHeight=function(t,e){l().highlight(t),Flappy.setGapHeight(e)},e.setBackground=function(t,e){l().highlight(t),Flappy.setBackground(e)},e.setSpeed=function(t,e){l().highlight(t),Flappy.SPEED=e},e.playSound=function(t,e){l().highlight(t),l().playAudio(e)},e.flap=function(t,e){l().highlight(t),Flappy.flap(e)},e.endGame=function(t){l().highlight(t),Flappy.gameState=Flappy.GameStates.ENDING},e.incrementPlayerScore=function(t){l().highlight(t),Flappy.playerScore++,Flappy.displayScore()}},3075:function(t,e,a){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}var n=a(1),o=l(n),s=a(788),r=l(s),i=a(40),c=a(819).default,p=a(824),u=function(t){var e=t.showFinishButton;return o.default.createElement("span",null,o.default.createElement(r.default,null,o.default.createElement("svg",{version:"1.1",id:"svgFlappy"})),o.default.createElement(c,null,e&&o.default.createElement("div",{id:"right-button-cell"},o.default.createElement("button",{id:"rightButton",className:"share"},o.default.createElement("img",{src:"/blockly/media/1x1.gif"}),i.finish()))),o.default.createElement(p,null))};u.propTypes={showFinishButton:n.PropTypes.bool.isRequired},t.exports=u},3076:function(t,e,a){"use strict";var l=a(2893),n=a(2746),o=a(743).createToolbox,s=a(71),r='<block type="flappy_flap"></block>',i='<block type="flappy_flap_height"></block>',c='<block type="flappy_endGame"></block>',p='<block type="flappy_playSound"></block>',u='<block type="flappy_incrementPlayerScore"></block>',d='<block type="flappy_setSpeed"></block>',g='<block type="flappy_setBackground"></block>',b='<block type="flappy_setPlayer"></block>',y='<block type="flappy_setScore"></block>',_=l.AVATAR_HEIGHT,h=l.AVATAR_WIDTH,f=function(t,e){return'<block type="'+t+'" deletable="false">'+(e?"<next>"+e+"</next>":"")+"</block>"},m=function(t,e){return'<block type="'+t+'" deletable="false" movable="false">'+(e?"<next>"+e+"</next>":"")+"</block>"};t.exports={1:{instructionsImportant:!0,requiredBlocks:[[{test:"flap",type:"flappy_flap"}]],obstacles:!1,ground:!1,score:!1,freePlay:!1,goal:{startX:100,startY:0,successCondition:function(){return Flappy.avatarY<=40},failureCondition:function(){return Flappy.avatarY>Flappy.MAZE_HEIGHT}},scale:{snapRadius:2},toolbox:o(r+p),startBlocks:f("flappy_whenClick"),appSpecificFailError:n.flappySpecificFail()},2:{requiredBlocks:[[{test:"endGame",type:"flappy_endGame"}]],obstacles:!1,ground:!0,score:!1,freePlay:!1,goal:{startX:100,startY:324,successCondition:function(){return 322===Flappy.avatarY&&110===Flappy.avatarX},failureCondition:function(){return Flappy.avatarY+_>=Flappy.MAZE_HEIGHT-Flappy.GROUND_HEIGHT&&Flappy.gameState===Flappy.GameStates.ACTIVE}},scale:{snapRadius:2},toolbox:o(r+c+p),startBlocks:f("flappy_whenClick",r)+f("flappy_whenCollideGround")},3:{requiredBlocks:[[{test:"setSpeed",type:"flappy_setSpeed"}]],obstacles:!1,ground:!0,score:!1,freePlay:!1,goal:{startX:345,startY:0,moving:!0,successCondition:function(){var t={x:(Flappy.avatarX+h)/2,y:(Flappy.avatarY+_)/2},e={x:(Flappy.goalX+Flappy.GOAL_SIZE)/2,y:(Flappy.goalY+Flappy.GOAL_SIZE)/2},a={x:Math.abs(t.x-e.x),y:Math.abs(t.y-e.y)};return a.x<15&&a.y<15},failureCondition:function(){return Flappy.activeTicks()>=120&&0===Flappy.SPEED}},scale:{snapRadius:2},toolbox:o(r+p+d),startBlocks:f("flappy_whenClick",r)+f("when_run")},4:{requiredBlocks:[[{test:"endGame",type:"flappy_endGame"}]],obstacles:!0,ground:!0,score:!1,freePlay:!1,goal:{startX:572,startY:324,moving:!0,successCondition:function(){return Flappy.obstacles[0].hitAvatar&&Flappy.gameState===Flappy.GameStates.OVER},failureCondition:function(){return Flappy.obstacles[0].x+Flappy.OBSTACLE_WIDTH<Flappy.avatarX}},scale:{snapRadius:2},toolbox:o(r+c+p+d),startBlocks:f("flappy_whenClick",r)+f("when_run",d)+f("flappy_whenCollideObstacle")},5:{requiredBlocks:[[{test:"incrementPlayerScore",type:"flappy_incrementPlayerScore"}]],defaultFlap:"SMALL",obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){var t=!1;return Flappy.obstacles.forEach(function(e){!e.hitAvatar&&e.containsAvatar()&&(t=!0)}),t&&Flappy.playerScore>0},failureCondition:function(){var t=!1;return Flappy.obstacles.forEach(function(e){!e.hitAvatar&&e.containsAvatar()&&(t=!0)}),t&&0===Flappy.playerScore}},scale:{snapRadius:2},toolbox:o(r+c+u+p+d),startBlocks:f("flappy_whenClick",r)+f("flappy_whenEnterObstacle")+f("when_run",d)},6:{requiredBlocks:[[{test:"flap",type:"flappy_flap_height"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){var t=!1;return Flappy.obstacles.forEach(function(e){e.containsAvatar()&&(t=!0)}),t&&Flappy.playerScore>0},failureCondition:function(){var t=!1;return Flappy.obstacles.forEach(function(e){e.containsAvatar()&&(t=!0)}),t&&0===Flappy.playerScore}},scale:{snapRadius:2},toolbox:o(i+c+u+p+d),startBlocks:f("flappy_whenClick")+f("flappy_whenEnterObstacle",u)+f("when_run",d)},7:{requiredBlocks:[[{test:"setBackground",type:"flappy_setBackground"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:o(i+c+u+p+d+g),startBlocks:f("flappy_whenClick",i)+f("flappy_whenCollideGround",c)+f("flappy_whenCollideObstacle",c)+f("flappy_whenEnterObstacle",u)+f("when_run",d)},8:{requiredBlocks:[[{test:function(t){return("flappy_setBackground"===t.type||"flappy_setPlayer"===t.type)&&"random"===t.getTitleValue("VALUE")},type:"flappy_setBackground",titles:{VALUE:"random"}}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:o(i+c+u+p+d+g+b),startBlocks:f("flappy_whenClick",i)+f("flappy_whenCollideGround",c)+f("flappy_whenCollideObstacle",c)+f("flappy_whenEnterObstacle",u)+f("when_run",d)},9:{requiredBlocks:[[{test:function(t){return"flappy_setScore"===t.type},type:"flappy_setScore"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:o(i+c+u+p+d+g+b+y),startBlocks:f("flappy_whenClick",i)+f("flappy_whenCollideGround",c)+f("flappy_whenCollideObstacle")+f("flappy_whenEnterObstacle",u)+f("when_run",d)},11:{shareable:!0,requiredBlocks:[],obstacles:!0,ground:!0,score:!0,freePlay:!0,scale:{snapRadius:2},toolbox:o(i+p+u+c+d+g+b+'<block type="flappy_setObstacle"></block><block type="flappy_setGround"></block><block type="flappy_setGapHeight"></block><block type="flappy_setGravity"></block>'+y),startBlocks:f("flappy_whenClick")+f("flappy_whenCollideGround")+f("flappy_whenCollideObstacle")+f("flappy_whenEnterObstacle")+f("when_run")},k1:{requiredBlocks:[],obstacles:!0,ground:!0,score:!0,freePlay:!0,isK1:!0,scale:{snapRadius:2},toolbox:o(r+c+g+b+'<block type="flappy_setObstacle"></block><block type="flappy_setGround"></block>'+p+i+d+u+'<block type="flappy_setGapHeight"></block><block type="flappy_setGravity"></block>'+y),startBlocks:f("flappy_whenClick")+f("flappy_whenCollideGround")+f("flappy_whenCollideObstacle")+f("flappy_whenEnterObstacle")+f("when_run")}},t.exports.k1_1={isK1:!0,grayOutUndeletableBlocks:!0,requiredBlocks:[],obstacles:!0,ground:!0,score:!0,freePlay:!0,scale:{snapRadius:2},toolbox:"",startBlocks:m("flappy_whenClick",m("flappy_flap"))+m("flappy_whenCollideGround",m("flappy_endGame"))+m("flappy_whenCollideObstacle",m("flappy_endGame"))+m("flappy_whenEnterObstacle",m("flappy_incrementPlayerScore"))+m("when_run",m("flappy_setSpeed"))},t.exports.k1_2=s.extend(t.exports[1],{isK1:!0}),t.exports.k1_3=s.extend(t.exports[2],{isK1:!0}),t.exports.k1_4=s.extend(t.exports[3],{isK1:!0}),t.exports.k1_5=s.extend(t.exports[4],{isK1:!0}),t.exports.k1_6=s.extend(t.exports[5],{isK1:!0}),t.exports.k1_7={isK1:!0,requiredBlocks:[[{test:"incrementPlayerScore",type:"flappy_incrementPlayerScore"}]],defaultFlap:"SMALL",obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){var t=!1;return Flappy.obstacles.forEach(function(e){!e.hitAvatar&&e.containsAvatar()&&(t=!0)}),t&&Flappy.playerScore>1},failureCondition:function(){var t=!1;return Flappy.obstacles.forEach(function(e){!e.hitAvatar&&e.containsAvatar()&&(t=!0)}),t&&Flappy.playerScore<=1}},scale:{snapRadius:2},toolbox:o(r+c+u+p+d),startBlocks:f("flappy_whenClick",r)+f("flappy_whenEnterObstacle")+f("when_run",d)},t.exports.k1_8=s.extend(t.exports[7],{isK1:!0,toolbox:o(r+c+u+p+d+g),startBlocks:f("flappy_whenClick",r)+f("flappy_whenCollideGround",c)+f("flappy_whenCollideObstacle",c)+f("flappy_whenEnterObstacle",u)+f("when_run",d)}),t.exports.k1_9={isK1:!0,requiredBlocks:[[{test:"setPlayer",type:"flappy_setPlayer"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:o(r+c+u+p+d+g+b),startBlocks:f("flappy_whenClick",r)+f("flappy_whenCollideGround",c)+f("flappy_whenCollideObstacle",c)+f("flappy_whenEnterObstacle",u)+f("when_run",d)},t.exports.custom={requiredBlocks:[],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:o(r+c+u+p+d+g+b),startBlocks:f("flappy_whenClick",r)+f("flappy_whenCollideGround",c)+f("flappy_whenCollideObstacle",c)+f("flappy_whenEnterObstacle",u)+f("when_run",d)}}},[3069]);