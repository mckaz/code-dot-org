webpackJsonp([19],{2983:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){var n=[],a=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(a=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n(1),u=a(s),c=n(40),d=a(c),f=n(220),h=a(f),p=n(2092),m=a(p),y={unit6Form:{marginTop:15},question:{marginBottom:5,fontFamily:'"Gotham 7r", sans-serif'},radio:{margin:"0px 10px"},submit:{marginTop:5},errorText:{color:"red"}},b=function(e){function t(n){i(this,t);var a=o(this,e.call(this,n));return a.handleChangeIntention=function(e){a.setState({choice:e.target.value})},a.handleSubmit=function(){a.setState({submitting:!0}),$.ajax({url:"/maker/apply",type:"post",dataType:"json",data:{unit_6_intention:a.state.choice}}).done(function(e){a.props.onSubmit(e.eligible),a.setState({submitting:!1,errorText:""})}).fail(function(e,t){console.error(t),a.setState({submitting:!1,errorText:"We're sorry, but something went wrong. Try refreshing the page and submitting again.  If this does not work, please contact support@code.org."})})},a.state={choice:n.initialChoice,submitting:!1},a}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.showRadioButtons,a=t.stepStatus,i=this.state.errorText;return u.default.createElement(m.default,{stepName:d.default.eligibilityReqYear(),stepStatus:a,alwaysShowChildren:!0},n&&u.default.createElement("div",null,d.default.eligibilityReqYearFail(),u.default.createElement("form",{style:y.unit6Form},u.default.createElement("strong",{style:y.question},d.default.eligibilityReqYearConfirmInstructions()),[["no",d.default.eligibilityYearNo()],["yes1718",d.default.eligibilityYearYes1718()],["yes1819",d.default.eligibilityYearYes1819()],["yesAfter",d.default.eligibilityYearAfter()],["unsure",d.default.eligibilityYearUnknown()]].map(function(t){var n=l(t,2),i=n[0],o=n[1];return u.default.createElement("label",{key:i},u.default.createElement("input",{style:y.radio,type:"radio",name:"year",value:i,checked:e.state.choice===i,onChange:e.handleChangeIntention,disabled:a!==p.Status.UNKNOWN}),o)}),a===p.Status.UNKNOWN&&u.default.createElement(h.default,{style:y.submit,color:h.default.ButtonColor.orange,text:this.state.submitting?d.default.submitting():d.default.submit(),onClick:this.handleSubmit,disabled:this.state.submitting||this.props.disabled}),i&&u.default.createElement("div",{style:y.errorText},i))),a===p.Status.FAILED&&u.default.createElement("div",null,d.default.eligibilityYearDecline()))},t}(s.Component);b.propTypes={showRadioButtons:s.PropTypes.bool.isRequired,stepStatus:s.PropTypes.oneOf(Object.values(p.Status)).isRequired,initialChoice:s.PropTypes.string,onSubmit:s.PropTypes.func.isRequired,disabled:s.PropTypes.bool},t.default=b,e.exports=t.default},3520:function(e,t,n){n(151),n(152),e.exports=n(3521)},3521:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var i=n(35),o=a(i),r=n(1),l=a(r),s=n(32),u=a(s),c=n(3522),d=a(c),f=n(3529),h=a(f),p=n(2092),m=n(596),y=a(m);(0,o.default)(document).ready(function(){var e=(0,y.default)("discountcode"),t=e.application,n=e.is_admin;u.default.render(l.default.createElement("div",null,n&&l.default.createElement(h.default,null),!n&&l.default.createElement(d.default,{statusPD:t.is_pd_eligible?p.Status.SUCCEEDED:p.Status.FAILED,statusStudentCount:t.is_progress_eligible?p.Status.SUCCEEDED:p.Status.FAILED,unit6Intention:t.unit_6_intention,schoolId:t.school_id,schoolName:t.school_name,hasConfirmedSchool:t.has_confirmed_school,getsFullDiscount:t.gets_full_discount,initialDiscountCode:t.discount_code,initialExpiration:t.expiration,adminSetStatus:t.admin_set_status})),document.getElementById("discountcode"))})},3522:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=n(1),u=a(s),c=n(40),d=a(c),f=n(44),h=a(f),p=n(220),m=a(p),y=n(2092),b=a(y),g=n(3523),E=a(g),S=n(2983),v=a(S),C=n(3524),w=a(C),_=n(3525),T=a(_),x={main:{color:h.default.charcoal},discountMessage:{marginTop:10,marginBottom:10},bold:{fontFamily:'"Gotham 7r", sans-serif',display:"inline"}},D=function(e){function t(n){i(this,t);var a=o(this,e.call(this,n));return a.state={statusYear:y.Status.UNKNOWN,yearChoice:null,submitting:!1,discountAmount:null,confirming:!1,discountCode:null},a.handleSchoolConfirmed=function(e){a.setState({discountAmount:e?"$0":"$97.50"})},a.handleUnit6Submitted=function(e){a.setState({statusYear:e?y.Status.SUCCEEDED:y.Status.FAILED})},a.confirmEligibility=function(){return a.setState({confirming:!0})},a.handleCancelDialog=function(){return a.setState({confirming:!1})},a.handleSuccessDialog=function(e,t){a.setState({discountCode:e,expiration:t})},n.unit6Intention&&(a.state=l({},a.state,{yearChoice:n.unit6Intention,statusYear:"yes1718"===n.unit6Intention||"yes1819"===n.unit6Intention?y.Status.SUCCEEDED:y.Status.FAILED})),n.adminSetStatus&&(a.state=l({},a.state,{statusYear:y.Status.SUCCEEDED})),(n.hasConfirmedSchool||n.adminSetStatus)&&(a.state=l({},a.state,{discountAmount:n.getsFullDiscount?"$0":"$97.50"})),a.state=l({},a.state,{discountCode:n.initialDiscountCode,expiration:n.initialExpiration}),a}return r(t,e),t.prototype.render=function(){return this.state.discountCode?u.default.createElement(T.default,{discountCode:this.state.discountCode,fullDiscount:this.props.getsFullDiscount,expiration:this.state.expiration}):u.default.createElement("div",{style:x.main},u.default.createElement("h2",null,d.default.eligibilityRequirements()),u.default.createElement("div",null,d.default.eligibilityExplanation()),u.default.createElement(b.default,{stepName:d.default.eligibilityReqPD(),stepStatus:this.props.statusPD},d.default.eligibilityReqPDFail()),u.default.createElement(b.default,{stepName:d.default.eligibilityReqStudentCount(),stepStatus:this.props.statusStudentCount},d.default.eligibilityReqStudentCountFail()),u.default.createElement(v.default,{showRadioButtons:this.props.statusStudentCount===y.Status.SUCCEEDED&&this.props.statusPD===y.Status.SUCCEEDED&&!this.props.adminSetStatus,stepStatus:this.state.statusYear,initialChoice:this.props.unit6Intention,onSubmit:this.handleUnit6Submitted}),this.state.statusYear===y.Status.SUCCEEDED&&!this.props.adminSetStatus&&u.default.createElement(E.default,{initialSchoolId:this.props.schoolId,initialSchoolName:this.props.schoolName,schoolConfirmed:this.props.hasConfirmedSchool,onSchoolConfirmed:this.handleSchoolConfirmed}),"$97.50"===this.state.discountAmount&&!this.props.adminSetStatus&&u.default.createElement("div",{style:x.discountMessage},"According to our data, your school has fewer than 50% of students that are eligible for free/reduced-price lunches. This means that we can bring down the cost of the $325 kit to just $97.50."," ",u.default.createElement("strong",{style:x.bold},"If this data seems inaccurate and you believe there are over 50% of students that are eligible for free/reduced-price lunch at your school, please contact teacher@code.org.")," ",'Otherwise, click "Get Code" below.'),this.props.adminSetStatus&&u.default.createElement("div",{style:x.discountMessage},d.default.eligibilityReqYearFail()),this.state.discountAmount&&u.default.createElement(m.default,{color:m.default.ButtonColor.orange,text:d.default.getCodePrice({price:this.state.discountAmount}),onClick:this.confirmEligibility}),this.state.confirming&&u.default.createElement(w.default,{onCancel:this.handleCancelDialog,onSuccess:this.handleSuccessDialog}))},t}(s.Component);D.propTypes={statusPD:s.PropTypes.oneOf(Object.values(y.Status)).isRequired,statusStudentCount:s.PropTypes.oneOf(Object.values(y.Status)).isRequired,unit6Intention:s.PropTypes.string,schoolId:s.PropTypes.string,schoolName:s.PropTypes.string,hasConfirmedSchool:s.PropTypes.bool,getsFullDiscount:s.PropTypes.bool,initialDiscountCode:s.PropTypes.string,initialExpiration:s.PropTypes.string,adminSetStatus:s.PropTypes.bool.isRequired},t.default=D,e.exports=t.default},3523:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),s=a(l),u=n(40),c=a(u),d=n(220),f=a(d),h=n(1707),p=a(h),m=n(1149),y={confirmed:{marginBottom:5},button:{marginTop:10},errorText:{color:"red"}},b=function(e){function t(n){i(this,t);var a=o(this,e.call(this,n));return a.handleDropdownChange=function(e,t){"nces"===e&&a.setState({schoolId:t.value,schoolName:t.label})},a.handleClickConfirmSchool=function(){a.setState({confirming:!0}),$.ajax({url:"/maker/schoolchoice",type:"post",dataType:"json",data:{nces:a.state.schoolId}}).done(function(e){a.props.onSchoolConfirmed(e.full_discount),a.setState({confirming:!1,confirmed:!0,errorText:""})}).fail(function(e,t){console.error(t),a.setState({confirming:!1,confirmed:!1,errorText:"We're sorry, but something went wrong. Try refreshing the page and submitting again.  If this does not work, please contact support@code.org."})})},a.state={confirming:!1,confirmed:n.schoolConfirmed,schoolId:n.initialSchoolId,schoolName:n.initialSchoolName,errorText:""},a}return r(t,e),t.prototype.render=function(){var e=this.state,t=e.schoolId,n=e.schoolName,a=e.confirming;return e.confirmed?s.default.createElement("div",{style:y.confirmed},s.default.createElement("div",{style:m.styles.question},c.default.schoolName()),n):s.default.createElement("div",null,s.default.createElement(p.default,{setField:this.handleDropdownChange,value:t,showErrorMsg:!1}),"-1"!==this.state.schoolId&&s.default.createElement(f.default,{color:f.default.ButtonColor.orange,text:a?c.default.confirming():c.default.confirmSchool(),onClick:this.handleClickConfirmSchool,style:y.button,disabled:a||!this.state.schoolId}),"-1"===this.state.schoolId&&s.default.createElement("div",null,c.default.eligibilitySchoolUnknown(),s.default.createElement("b",null," ",c.default.contactToContinue())),this.state.errorText&&s.default.createElement("div",{style:y.errorText},this.state.errorText))},t}(l.Component);b.propTypes={initialSchoolId:l.PropTypes.string,initialSchoolName:l.PropTypes.string,schoolConfirmed:l.PropTypes.bool.isRequired,onSchoolConfirmed:l.PropTypes.func.isRequired},t.default=b,e.exports=t.default},3524:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),s=a(l),u=n(40),c=a(u),d=n(500),f=a(d),h=n(965),p=a(h),m=n(220),y=a(m),b={subtitle:{fontSize:16},form:{margin:"10px 0"},signature:{margin:"5px 0"},signatureBox:{height:40,width:"100%",boxSizing:"border-box",padding:10},checkboxes:{paddingLeft:5,marginBottom:20},checkboxLabel:{marginLeft:25},checkbox:{marginLeft:-25,width:25},error:{color:"red",marginTop:20},bold:{fontFamily:'"Gotham 7r", sans-serif',display:"inline"}},g=function(e){function t(){var n,a,r;i(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,e.call.apply(e,[this].concat(s))),a.state={signature:"",validInput:!1,submitting:!1,error:""},a.verifyResponse=function(){a.setState({validInput:a.check1.checked&&a.check2.checked&&a.check3.checked&&/\S/.test(a.state.signature)})},a.handleSubmit=function(){a.setState({submitting:!0}),$.ajax({url:"/maker/complete",type:"post",dataType:"json",data:{signature:a.state.signature}}).done(function(e){a.props.onSuccess(e.code,e.expiration)}).fail(function(e,t){a.setState({error:"We're sorry, but something went wrong. Try refreshing the page and submitting again.  If this does not work, please contact support@code.org."})})},a.setSignature=function(e){a.setState({signature:e.target.value},a.verifyResponse)},r=n,o(a,r)}return r(t,e),t.prototype.render=function(){var e=this;return s.default.createElement(f.default,{useUpdatedStyles:!0,uncloseable:!0,isOpen:!0,style:{padding:20}},s.default.createElement("h2",null,c.default.getCode()),s.default.createElement("div",{style:b.subtitle},c.default.verifyStatementsforCode()),s.default.createElement("form",{style:b.form},s.default.createElement("div",{style:b.checkboxes},s.default.createElement("label",{style:b.checkboxLabel},s.default.createElement("input",{style:b.checkbox,type:"checkbox",ref:function(t){return e.check1=t},disabled:this.state.submitting,onChange:this.verifyResponse}),c.default.verifyStudentCount()),s.default.createElement("label",{style:b.checkboxLabel},s.default.createElement("input",{style:b.checkbox,type:"checkbox",ref:function(t){return e.check2=t},disabled:this.state.submitting,onChange:this.verifyResponse}),c.default.verifyYear()),s.default.createElement("label",{style:b.checkboxLabel},s.default.createElement("input",{style:b.checkbox,type:"checkbox",ref:function(t){return e.check3=t},disabled:this.state.submitting,onChange:this.verifyResponse}),c.default.verifySingleCode())),s.default.createElement("label",null,s.default.createElement("div",null,c.default.verifySignature()),s.default.createElement("div",{style:b.signature},s.default.createElement("strong",{style:b.bold},"Electronic Signature")," ",c.default.typeName()),s.default.createElement("input",{value:this.state.signature,disabled:this.state.submitting,style:b.signatureBox,onChange:this.setSignature}))),s.default.createElement("div",null,c.default.contactSupport()),this.state.error&&s.default.createElement("div",{style:b.error},this.state.error),s.default.createElement(p.default,null,s.default.createElement(y.default,{text:c.default.dialogCancel(),onClick:this.props.onCancel,color:y.default.ButtonColor.gray}),s.default.createElement(y.default,{text:c.default.getCode(),onClick:this.handleSubmit,disabled:!this.state.validInput||this.state.submitting})))},t}(l.Component);g.propTypes={onCancel:l.PropTypes.func.isRequired,onSuccess:l.PropTypes.func.isRequired},t.default=g,e.exports=t.default},3525:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),s=a(l),u=n(3526),c=a(u),d=n(3527),f=a(d),h=n(3528),p=a(h),m={title:{fontSize:32},image:{width:300,marginTop:10,marginLeft:50},step:{marginTop:25,fontSize:16},bold:{fontFamily:'"Gotham 7r", sans-serif',display:"inline"}},y=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return r(t,e),t.prototype.render=function(){var e=new Date(this.props.expiration).toLocaleString("en-us",{timeZone:"UTC",year:"numeric",month:"long",day:"numeric"});return s.default.createElement("div",null,s.default.createElement("h1",{style:m.title},"Subsidized Circuit Playground Kits"),s.default.createElement("h2",null,s.default.createElement("div",null,"Discount code for subsidized kit: ",this.props.discountCode),s.default.createElement("div",null,"(Expires ",e,")")),s.default.createElement("div",null,"We're happy to share with you this discount code that will bring down the cost of a $325 Circuit Playground kit to"," ",this.props.fullDiscount?"$0":"only $97.50"," including standard ground shipping. We're excited that you will be bringing this opportunity to your students!"),s.default.createElement("br",null),s.default.createElement("div",null,"To order your kit with the discount code, follow the steps below."," ",s.default.createElement("div",{style:m.bold},"You must use your discount code by December 31, 2018.")),s.default.createElement("div",{style:m.step},s.default.createElement("div",null,"1) Go to ",s.default.createElement("a",{href:"https://www.adafruit.com/product/3399"},"https://www.adafruit.com/product/3399")," ","and add the kit to your cart."),s.default.createElement("a",{href:f.default},s.default.createElement("img",{style:m.image,src:f.default}))),s.default.createElement("div",{style:m.step},s.default.createElement("div",null,"2) Go to your cart."),s.default.createElement("a",{href:c.default},s.default.createElement("img",{style:m.image,src:c.default}))),s.default.createElement("div",{style:m.step},s.default.createElement("div",null,"3) Put in your discount code (",this.props.discountCode,') and hit "Apply".'),s.default.createElement("a",{href:p.default},s.default.createElement("img",{style:m.image,src:p.default}))),s.default.createElement("div",{style:m.step},"4) Proceed to checkout. Your total cost should be ",this.props.fullDiscount?"$0":"$97.50","."),s.default.createElement("div",{style:{marginTop:20}},"If you run into any issues with ordering on the Adafruit website, please check out"," ",s.default.createElement("a",{href:"https://www.adafruit.com/support"},"https://www.adafruit.com/support"),". For any other questions, please contact ",s.default.createElement("a",{href:"mailto:teacher@code.org"},"teacher@code.org.")))},t}(l.Component);y.propTypes={discountCode:l.PropTypes.string.isRequired,fullDiscount:l.PropTypes.bool.isRequired,expiration:l.PropTypes.string.isRequired},t.default=y,e.exports=t.default},3526:function(e,t,n){e.exports=n.p+"viewCartwpaac00d1ebbc297f4081e3c370fd8992b.png"},3527:function(e,t,n){e.exports=n.p+"addToCartwp051471e567d87b36e0af8f088833e894.png"},3528:function(e,t,n){e.exports=n.p+"enterDiscountCodewp47ccfc39fe4ad4668b4887912e8e8556.png"},3529:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),s=a(l),u=n(40),c=a(u),d=n(220),f=a(d),h=n(2092),p=a(h),m=n(2983),y=a(m),b={title:{fontSize:32},teacherContainer:{display:"flex",marginTop:5},teacherInput:{marginRight:10,padding:"0 10px"},radioContainer:{margin:"5px 0"},radio:{marginRight:5}},g=function(e){function t(){var n,a,r;i(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,e.call.apply(e,[this].concat(s))),a.state={submitting:!1,teacherID:"",statusPD:h.Status.UNKNOWN,statusStudentCount:h.Status.UNKNOWN,statusYear:h.Status.UNKNOWN,unit6Intention:"",userSchool:{},applicationSchool:{},adminOverride:"None",fullDiscount:!1,discountCode:"",overrideValue:null},a.handleSubmitId=function(){var e=a.teacherID.value;a.setState({submitting:!0}),$.ajax({url:"/maker/application_status",type:"get",dataType:"json",data:{user:e}}).done(function(t){a.updateApplicationStatus(t,e)}).fail(function(e,t){console.log("failure"),a.setState({submitting:!1})})},a.handleDiscountCodeOverride=function(){var e=a.state.teacherID;a.setState({submitting:!0}),$.ajax({url:"/maker/override",type:"post",dataType:"json",data:{user:e,full_discount:"full"===a.state.overrideValue}}).done(function(t){a.updateApplicationStatus(t,e)}).fail(function(e,t){console.log("failure"),a.setState({submitting:!1})})},a.handleOverrideChange=function(e){a.setState({overrideValue:e.target.value})},r=n,o(a,r)}return r(t,e),t.prototype.updateApplicationStatus=function(e,t){var n=e.application;this.setState({teacherID:t,submitting:!1,statusPD:n.is_pd_eligible?h.Status.SUCCEEDED:h.Status.FAILED,statusStudentCount:n.is_progress_eligible?h.Status.SUCCEEDED:h.Status.FAILED,statusYear:"yes1718"===n.unit_6_intention||"yes1819"===n.unit_6_intention?h.Status.SUCCEEDED:h.Status.FAILED,unit6Intention:n.unit_6_intention,userSchool:n.user_school,applicationSchool:n.application_school,adminOverride:n.admin_set_status?n.full_discount?"Full Discount":"Partial Discount":"None",fullDiscount:n.full_discount,discountCode:n.discount_code,overrideValue:null})},t.prototype.render=function(){var e=this;return s.default.createElement("div",null,s.default.createElement("h1",{style:b.title},"Circuit Playground Kits Admin Override"),s.default.createElement("label",null,s.default.createElement("div",null,"Teacher email address, username, or user_id (for the account they are using in the classroom):"),s.default.createElement("div",{style:b.teacherContainer},s.default.createElement("input",{ref:function(t){return e.teacherID=t},style:b.teacherInput}),s.default.createElement(f.default,{color:f.default.ButtonColor.orange,text:this.state.submitting?c.default.submitting():c.default.submit(),onClick:this.handleSubmitId,disabled:this.state.submitting}))),this.state.teacherID&&s.default.createElement("div",null,s.default.createElement("h2",null,"Eligibility requirements for ",this.state.teacherID),s.default.createElement(p.default,{stepName:c.default.eligibilityReqPD(),stepStatus:this.state.statusPD}),s.default.createElement(p.default,{stepName:c.default.eligibilityReqStudentCount(),stepStatus:this.state.statusStudentCount}),s.default.createElement(y.default,{key:this.state.teacherID,showRadioButtons:!1,previousStepsSucceeded:!0,stepStatus:this.state.statusYear,initialChoice:this.state.unit6Intention,disabled:!0,onSubmit:function(){}}),s.default.createElement("h2",null,"School Data"),s.default.createElement("div",null,"We track both the user's current school, and also the school that they confirmed in the application (if they made it that far into the process). These will be different if (a) the user hasn't confirmed a school in the application or (b) the user changed their school after confirming in the application."),s.default.createElement("table",null,s.default.createElement("thead",null,s.default.createElement("tr",null,s.default.createElement("td",null),s.default.createElement("td",null,"Current school"),s.default.createElement("td",null,"Application school"))),s.default.createElement("tbody",null,s.default.createElement("tr",null,s.default.createElement("td",null,"Id:"),s.default.createElement("td",null,this.state.userSchool.id),s.default.createElement("td",null,this.state.applicationSchool.id)),s.default.createElement("tr",null,s.default.createElement("td",null,"Name:"),s.default.createElement("td",null,this.state.userSchool.name),s.default.createElement("td",null,this.state.applicationSchool.name)),s.default.createElement("tr",null,s.default.createElement("td",null,"High Needs?:"),s.default.createElement("td",null,null!==this.state.userSchool.high_needs&&this.state.userSchool.high_needs.toString()),s.default.createElement("td",null,null!==this.state.applicationSchool.high_needs&&this.state.applicationSchool.high_needs.toString())))),s.default.createElement("h2",null,"Admin Options"),s.default.createElement("div",null,"Current code:"," ",this.state.discountCode&&this.state.discountCode+" ("+(this.state.fullDiscount?"FULL":"PARTIAL")+")"),s.default.createElement("div",null,"Current override: ",this.state.adminOverride),s.default.createElement("h4",null,"Option 1: Link teacher account with other accounts"),s.default.createElement("div",null,"If teacher meets the eligibity requirements but is simply using a different email address for their account than what we have on file, please go to the ",s.default.createElement("a",{href:"https://studio.code.org/admin/studio_person"},"Studio Person ID admin page ")," to link this acccount to the account associated with the email address we have on file."),s.default.createElement("h4",null,"Option 2: Give teacher a discount code"),s.default.createElement("div",null,"If the teacher has already received their code and it was for the incorrect amount, email ",s.default.createElement("a",{href:"mailto:adaaccounts@adafruit.com"}," adaaccounts@adafruit.com "),"so they can disable that code first. We should not be doing this override if the teacher has already used the incorrect code to purchase a kit."),s.default.createElement("div",{style:b.radioContainer},s.default.createElement("label",null,s.default.createElement("input",{style:b.radio,type:"radio",name:"discountAmount",value:"full",checked:"full"===this.state.overrideValue,onChange:this.handleOverrideChange}),"Teacher should receive 100% discount code (kit price would become $0)"),s.default.createElement("label",null,s.default.createElement("input",{style:b.radio,type:"radio",name:"discountAmount",value:"partial",checked:"partial"===this.state.overrideValue,onChange:this.handleOverrideChange}),"Teacher should receive partial discount code (kit price would become $97.50)")),s.default.createElement(f.default,{color:f.default.ButtonColor.orange,text:this.state.submitting?c.default.submitting():c.default.submit(),onClick:this.handleDiscountCodeOverride,disabled:this.state.submitting||!this.state.overrideValue})))},t}(l.Component);t.default=g,e.exports=t.default}},[3520]);