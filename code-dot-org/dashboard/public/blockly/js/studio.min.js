webpackJsonp([12],{2080:function(e,t,i){"use strict";var o=function(e,t,i,o,n,a){this.tileType_=e,this.speed_=t,this.size_=i,this.direction_=o,this.emotion_=n,this.sprite_=a};e.exports=o,o.prototype.getTileType=function(){return this.tileType_},o.prototype.clone=function(){return new o(this.tileType_,this.speed_,this.size_,this.direction_,this.emotion_,this.sprite_)},o.prototype.serialize=function(){return{tileType:this.tileType_,speed:this.speed_,size:this.size_,direction:this.direction_,emotion:this.emotion_,sprite:this.sprite_}},o.deserialize=function(e){return new o(e.tileType,e.speed,e.size,e.direction,e.emotion,e.sprite)}},2151:function(e,t,i){"use strict";function o(e){e.preloadAssets=!0,e.sortDrawOrder=!0,e.hideIconInClearPuzzle=!0,e.defaultBackground="endor",e.projectileFrames=10,e.itemFrames=10,e.instructions2ImageSubstitutions={pufferpig:e.assetUrl("instructions_pufferpig.png"),mynock:e.assetUrl("instructions_mynock.png"),rebelpilot:e.assetUrl("instructions_rebelpilot.png"),stormtrooper:e.assetUrl("instructions_stormtrooper.png"),mousedroid:e.assetUrl("instructions_mousedroid.png"),tauntaun:e.assetUrl("instructions_tauntaun.png"),probot:e.assetUrl("instructions_probot.png")},e.ProjectileClassNames=[],e.ItemClassNames=["pufferpig","stormtrooper","tauntaun","mynock","probot","mousedroid","rebelpilot"],e.AutohandlerTouchItems={whenTouchPufferPig:"pufferpig",whenTouchStormtrooper:"stormtrooper",whenTouchTauntaun:"tauntaun",whenTouchMynock:"mynock",whenTouchProbot:"probot",whenTouchMouseDroid:"mousedroid",whenTouchRebelPilot:"rebelpilot",whenGetPufferPig:"pufferpig",whenGetStormtrooper:"stormtrooper",whenGetTauntaun:"tauntaun",whenGetMynock:"mynock",whenGetProbot:"probot",whenGetMouseDroid:"mousedroid",whenGetRebelPilot:"rebelpilot"},e.AutohandlerGetAllItems={whenGetAllPufferPigs:"pufferpig",whenGetAllStormtroopers:"stormtrooper",whenGetAllTauntauns:"tauntaun",whenGetAllMynocks:"mynock",whenGetAllProbots:"probot",whenGetAllMouseDroids:"mousedroid",whenGetAllRebelPilots:"rebelpilot"},e.specialItemProperties={pufferpig:{frames:12,width:100,height:100,scale:1,renderOffset:{x:0,y:-15},activity:"roam",speed:a.SpriteSpeed.VERY_SLOW,spritesCounterclockwise:!0},stormtrooper:{frames:12,width:100,height:100,scale:1.1,renderOffset:{x:0,y:-15},activity:"chase",speed:a.SpriteSpeed.VERY_SLOW,spritesCounterclockwise:!0},tauntaun:{frames:15,width:100,height:100,scale:1.6,renderOffset:{x:0,y:20},activity:"roam",speed:a.SpriteSpeed.SLOW,spritesCounterclockwise:!0},mynock:{frames:8,width:100,height:100,scale:.9,renderOffset:{x:0,y:-20},activity:"roam",speed:a.SpriteSpeed.SLOW,spritesCounterclockwise:!0},probot:{frames:12,width:100,height:100,scale:1.2,renderOffset:{x:0,y:-10},activity:"chase",speed:a.SpriteSpeed.LITTLE_SLOW,spritesCounterclockwise:!0},mousedroid:{frames:1,width:100,height:100,scale:.5,renderOffset:{x:0,y:-20},activity:"flee",speed:a.SpriteSpeed.LITTLE_SLOW,spritesCounterclockwise:!0},rebelpilot:{frames:13,width:100,height:100,scale:1,renderOffset:{x:0,y:-20},activity:"flee",speed:a.SpriteSpeed.SLOW,spritesCounterclockwise:!0}},e.customObstacleZones={endor:{},hoth:{},starship:{}},e.customObstacleZones.endor.grid=e.customObstacleZones.hoth.grid=e.customObstacleZones.starship.grid=function(){for(var e=[],t=0;t<4;t++)for(var i=0;i<4;i++){var o={minX:50+100*i+5,maxX:50+100*i+49-5,minY:50+100*t+15,maxY:50+100*t+49-5};e.push(o)}return e}(),e.customObstacleZones.endor.blobs=[{minX:346,maxX:413,minY:261,maxY:344},{minX:318,maxX:404,minY:342,maxY:397},{minX:308,maxX:348,minY:72,maxY:110},{minX:264,maxX:348,minY:112,maxY:197},{minX:96,maxX:149,minY:289,maxY:349},{minX:96,maxX:199,minY:238,maxY:288},{minX:83,maxX:125,minY:125,maxY:147},{minX:58,maxX:99,minY:72,maxY:91},{minX:57,maxX:149,minY:92,maxY:123}],e.customObstacleZones.endor.horizontal=[{minX:51,maxX:299,minY:269,maxY:293},{minX:150,maxX:348,minY:168,maxY:189},{minX:53,maxX:97,minY:159,maxY:199},{minX:50,maxX:198,minY:71,maxY:94},{minX:255,maxX:345,minY:71,maxY:94}],e.customObstacleZones.endor.circle=[{minX:251,maxX:317,minY:332,maxY:348},{minX:83,maxX:198,minY:332,maxY:348},{minX:250,maxX:317,minY:77,maxY:93},{minX:313,maxX:337,minY:77,maxY:348},{minX:163,maxX:236,minY:202,maxY:244},{minX:83,maxX:200,minY:77,maxY:93},{minX:62,maxX:85,minY:77,maxY:348}],e.customObstacleZones.hoth.blobs=[{minX:100,maxX:142,minY:283,maxY:342},{minX:100,maxX:187,minY:226,maxY:281},{minX:356,maxX:394,minY:264,maxY:311},{minX:311,maxX:393,minY:313,maxY:388},{minX:310,maxX:344,minY:61,maxY:106},{minX:258,maxX:344,minY:108,maxY:192},{minX:117,maxX:146,minY:120,maxY:132},{minX:57,maxX:117,minY:70,maxY:132}],e.customObstacleZones.hoth.horizontal=[{minX:54,maxX:299,minY:268,maxY:294},{minX:150,maxX:350,minY:171,maxY:198},{minX:53,maxX:99,minY:171,maxY:198},{minX:252,maxX:350,minY:66,maxY:92},{minX:54,maxX:195,minY:66,maxY:92}],e.customObstacleZones.hoth.circle=[{minX:250,maxX:298,minY:312,maxY:342},{minX:300,maxX:346,minY:65,maxY:342},{minX:252,maxX:302,minY:65,maxY:100},{minX:99,maxX:192,minY:311,maxY:342},{minX:101,maxX:196,minY:65,maxY:91},{minX:50,maxX:100,minY:65,maxY:342},{minX:163,maxX:242,minY:188,maxY:238}],e.customObstacleZones.starship.blobs=[{minX:301,maxX:344,minY:58,maxY:120},{minX:353,maxX:405,minY:260,maxY:308},{minX:306,maxX:405,minY:310,maxY:393},{minX:101,maxX:144,minY:300,maxY:350},{minX:101,maxX:197,minY:208,maxY:299},{minX:261,maxX:344,minY:120,maxY:192},{minX:55,maxX:133,minY:77,maxY:141}],e.customObstacleZones.starship.horizontal=[{minX:52,maxX:298,minY:267,maxY:300},{minX:151,maxX:351,minY:167,maxY:198},{minX:49,maxX:99,minY:165,maxY:201},{minX:51,maxX:199,minY:66,maxY:102},{minX:251,maxX:351,minY:68,maxY:104}],e.customObstacleZones.starship.circle=[{minX:251,maxX:316,minY:315,maxY:351},{minX:153,maxX:242,minY:165,maxY:251},{minX:252,maxX:314,minY:66,maxY:100},{minX:310,maxX:339,minY:66,maxY:351},{minX:80,maxX:200,minY:316,maxY:351},{minX:82,maxX:200,minY:66,maxY:100},{minX:63,maxX:86,minY:66,maxY:351}],e.explosion=e.assetUrl("vanish.png"),e.explosionFrames=17,e.animatedGoal=e.assetUrl("goal_idle.png"),e.goalSpriteWidth=100,e.goalSpriteHeight=100,e.animatedGoalFrames=16,e.timePerGoalAnimationFrame=100,e.finishCollideDistanceScaling=.8,e.goalCollisionRectWidth=50,e.goalCollisionRectHeight=75,e.fadeOutGoal=!0,e.goalSuccess=null,e.goalRenderOffsetX=-25,e.goalRenderOffsetY=-45,e.projectileSpriteWidth=70,e.projectileSpriteHeight=70,e.itemCollisionRectWidth=50,e.itemCollisionRectHeight=50,e.spriteCollisionRectWidth=50,e.spriteCollisionRectHeight=50,e.wallCollisionRectOffsetX=0,e.wallCollisionRectOffsetY=24,e.wallCollisionRectWidth=30,e.wallCollisionRectHeight=20,e.gridSpriteRenderOffsetX=-30,e.gridSpriteRenderOffsetY=-40,e.avatarList=["r2-d2","c-3po"],e.avatarList.forEach(function(t){e[t]={sprite:e.assetUrl("avatar_"+t+".png"),walk:e.assetUrl("walk_"+t+".png"),dropdownThumbnail:e.assetUrl("avatar_"+t+"_thumb.png"),frameCounts:{normal:"r2-d2"===t?14:16,turns:8,emotions:0,walk:"r2-d2"===t?14:8},animations:{turns:8},animationFrameDuration:3}}),e["r2-d2"].movementAudio=[{begin:"r2-d2_move1_start",loop:"r2-d2_move1_loop",end:"r2-d2_move1_end",volume:2.2},{begin:"r2-d2_move2_start",loop:"r2-d2_move2_loop",end:"r2-d2_move2_end",volume:2.2},{begin:"r2-d2_move3_start",loop:"r2-d2_move3_loop",end:"r2-d2_move3_end",volume:2.2}],e["c-3po"].movementAudio=[{loop:"c-3po_move_loop",end:"c-3po_move_end",volume:.6}],e.preventProjectileLoop=function(e){return""===e},e.preventItemLoop=function(e){return""===e},e.winAvatar=null,e.failureAvatar=null,e.pufferpig=e.assetUrl("walk_pufferpig.png"),e.stormtrooper=e.assetUrl("walk_stormtrooper.png"),e.tauntaun=e.assetUrl("walk_tauntaun.png"),e.mynock=e.assetUrl("walk_mynock.png"),e.probot=e.assetUrl("walk_probot.png"),e.mousedroid=e.assetUrl("walk_mousedroid.png"),e.rebelpilot=e.assetUrl("walk_rebelpilot.png"),e.endor={background:e.assetUrl("background_endor.jpg"),tiles:e.assetUrl("tiles_endor.png"),jumboTiles:e.assetUrl("jumbotiles_endor.png"),jumboTilesAddOffset:-5,jumboTilesSize:60,jumboTilesRows:4,jumboTilesCols:4,clouds:[e.assetUrl("cloud_light.png"),e.assetUrl("cloud_light2.png")]},e.hoth={background:e.assetUrl("background_hoth.jpg"),tiles:e.assetUrl("tiles_hoth.png"),jumboTiles:e.assetUrl("jumbotiles_hoth.png"),jumboTilesAddOffset:-5,jumboTilesSize:60,jumboTilesRows:4,jumboTilesCols:4,clouds:[e.assetUrl("cloud_dark.png"),e.assetUrl("cloud_dark2.png")]},e.starship={background:e.assetUrl("background_starship.jpg"),tiles:e.assetUrl("tiles_starship.png"),jumboTiles:e.assetUrl("jumbotiles_starship.png"),jumboTilesAddOffset:-5,jumboTilesSize:60,jumboTilesRows:4,jumboTilesCols:4},e.enlargeWallTiles={minCol:0,maxCol:3,minRow:3,maxRow:5},e.getMap=function(e,t){return"hoth"!==e||"circle"!==t&&"horizontal"!==t?t:t+"_nonjumbo"},e.blank=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],e.circle_nonjumbo=[[0,0,0,0,0,0,0,0],[0,17,2,3,0,68,69,0],[0,4,0,0,0,0,3,0],[0,20,0,289,289,0,5,0],[0,2,0,289,289,0,21,0],[0,3,0,0,0,0,2,0],[0,36,37,2,0,52,53,0],[0,0,0,0,0,0,0,0]],e.circle=[[0,0,0,0,0,0,0,0],[0,512,531,531,0,531,513,0],[0,530,0,0,0,0,530,0],[0,530,0,289,289,0,530,0],[0,530,0,289,289,0,530,0],[0,530,0,0,0,0,530,0],[0,514,531,531,0,531,515,0],[0,0,0,0,0,0,0,0]],e.horizontal_nonjumbo=[[0,0,0,0,0,0,0,0],[0,2,3,32,0,36,37,0],[0,0,0,0,0,0,0,0],[0,16,0,52,53,32,35,0],[0,0,0,0,0,0,0,0],[0,3,2,34,32,33,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],e.horizontal=[[0,0,0,0,0,0,0,0],[0,531,531,531,0,531,531,0],[0,0,0,0,0,0,0,0],[0,48,0,531,531,531,531,0],[0,0,0,0,0,0,0,0],[0,531,531,531,531,531,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],e.grid=[[0,0,0,0,0,0,0,0],[0,33,0,16,0,32,0,3],[0,0,0,0,0,0,0,0],[0,2,0,17,0,33,0,2],[0,0,0,0,0,0,0,0],[0,3,0,32,0,34,0,17],[0,0,0,0,0,0,0,0],[0,16,0,33,0,35,0,16]],e.blobs=[[0,0,0,0,0,0,0,0],[0,259,259,0,0,0,34,0],[0,259,259,0,0,272,272,0],[0,0,0,0,0,272,272,0],[0,0,306,306,0,0,0,0],[0,0,306,306,0,0,0,35],[0,0,49,0,0,0,289,289],[0,0,0,0,0,0,289,289]],e.sounds=["R2-D2sound1","R2-D2sound2","R2-D2sound3","R2-D2sound4","R2-D2sound5","R2-D2sound6","R2-D2sound7","R2-D2sound8","R2-D2sound9","C-3POsound1","C-3POsound2","C-3POsound3","C-3POsound4","PufferPigSound1","PufferPigSound2","PufferPigSound3","PufferPigSound4","TauntaunSound1","TauntaunSound2","TauntaunSound3","TauntaunSound4","MynockSound1","MynockSound2","MynockSound3","ProbotSound1","ProbotSound2","ProbotSound3","MouseDroidSound1","MouseDroidSound2","MouseDroidSound3","alert1","alert2","alert3","alert4","applause"],e.soundGroups={"R2-D2sound":{randomValue:"R2-D2random",minSuffix:1,maxSuffix:9},"C-3POsound":{randomValue:"C-3POrandom",minSuffix:1,maxSuffix:4},PufferPigSound:{randomValue:"PufferPigRandom",minSuffix:1,maxSuffix:4},TauntaunSound:{randomValue:"TauntaunRandom",minSuffix:1,maxSuffix:4},MynockSound:{randomValue:"MynockRandom",minSuffix:1,maxSuffix:3},ProbotSound:{randomValue:"ProbotSoundRandom",minSuffix:1,maxSuffix:3},MouseDroidSound:{randomValue:"MouseDroidSoundRandom",minSuffix:1,maxSuffix:3}},e.soundChoices=[[l.default.playSoundRandom(),a.RANDOM_VALUE],[l.default.playSoundR2D2Random(),"R2-D2random"],[l.default.playSoundR2D2Sound1(),"R2-D2sound1"],[l.default.playSoundR2D2Sound2(),"R2-D2sound2"],[l.default.playSoundR2D2Sound3(),"R2-D2sound3"],[l.default.playSoundR2D2Sound4(),"R2-D2sound4"],[l.default.playSoundR2D2Sound5(),"R2-D2sound5"],[l.default.playSoundR2D2Sound6(),"R2-D2sound6"],[l.default.playSoundR2D2Sound7(),"R2-D2sound7"],[l.default.playSoundR2D2Sound8(),"R2-D2sound8"],[l.default.playSoundR2D2Sound9(),"R2-D2sound9"],[l.default.playSoundC3PORandom(),"C-3POrandom"],[l.default.playSoundC3POSound1(),"C-3POsound1"],[l.default.playSoundC3POSound2(),"C-3POsound2"],[l.default.playSoundC3POSound3(),"C-3POsound3"],[l.default.playSoundC3POSound4(),"C-3POsound4"],[l.default.playSoundPufferPigRandom(),"PufferPigRandom"],[l.default.playSoundPufferPigSound1(),"PufferPigSound1"],[l.default.playSoundPufferPigSound2(),"PufferPigSound2"],[l.default.playSoundPufferPigSound3(),"PufferPigSound3"],[l.default.playSoundPufferPigSound4(),"PufferPigSound4"],[l.default.playSoundTauntaunRandom(),"TauntaunRandom"],[l.default.playSoundTauntaunSound1(),"TauntaunSound1"],[l.default.playSoundTauntaunSound2(),"TauntaunSound2"],[l.default.playSoundTauntaunSound3(),"TauntaunSound3"],[l.default.playSoundTauntaunSound4(),"TauntaunSound4"],[l.default.playSoundMynockRandom(),"MynockRandom"],[l.default.playSoundMynockSound1(),"MynockSound1"],[l.default.playSoundMynockSound2(),"MynockSound2"],[l.default.playSoundMynockSound3(),"MynockSound3"],[l.default.playSoundProbotRandom(),"ProbotRandom"],[l.default.playSoundProbotSound1(),"ProbotSound1"],[l.default.playSoundProbotSound2(),"ProbotSound2"],[l.default.playSoundProbotSound3(),"ProbotSound3"],[l.default.playSoundMouseDroidRandom(),"MouseDroidRandom"],[l.default.playSoundMouseDroidSound1(),"MouseDroidSound1"],[l.default.playSoundMouseDroidSound2(),"MouseDroidSound2"],[l.default.playSoundMouseDroidSound3(),"MouseDroidSound3"],[l.default.playSoundAlert1(),"alert1"],[l.default.playSoundAlert2(),"alert2"],[l.default.playSoundAlert3(),"alert3"],[l.default.playSoundAlert4(),"alert4"],[l.default.playSoundApplause(),"applause"]],e.soundChoicesK1=[],e.soundMetadata=[{name:"start",volume:.2},{name:"win",volume:.2},{name:"failure",volume:.2},{name:"flag",volume:.2},{name:"R2-D2sound1",volume:.2},{name:"R2-D2sound2",volume:.2},{name:"R2-D2sound3",volume:.2},{name:"R2-D2sound4",volume:.2},{name:"R2-D2sound5",volume:.2},{name:"R2-D2sound6",volume:.2},{name:"R2-D2sound7",volume:.2},{name:"R2-D2sound8",volume:.2},{name:"R2-D2sound9",volume:.2},{name:"C-3POsound1",volume:.2},{name:"C-3POsound2",volume:.2},{name:"C-3POsound3",volume:.2},{name:"C-3POsound4",volume:.2},{name:"PufferPigSound1",volume:.2},{name:"PufferPigSound2",volume:.2},{name:"PufferPigSound3",volume:.2},{name:"PufferPigSound4",volume:.2},{name:"TauntaunSound1",volume:.2},{name:"TauntaunSound2",volume:.2},{name:"TauntaunSound3",volume:.2},{name:"TauntaunSound4",volume:.2},{name:"MynockSound1",volume:.2},{name:"MynockSound2",volume:.2},{name:"MynockSound3",volume:.2},{name:"ProbotSound1",volume:.2},{name:"ProbotSound2",volume:.2},{name:"ProbotSound3",volume:.2},{name:"MouseDroidSound1",volume:.2},{name:"MouseDroidSound2",volume:.2},{name:"MouseDroidSound3",volume:.2},{name:"alert1",volume:.2},{name:"alert2",volume:.2},{name:"alert3",volume:.2},{name:"alert4",volume:.2},{name:"applause",volume:.2}],e.musicMetadata=s,e.playFinalGoalSound=!0,e.mapChoices=[[l.default.setMapRandom(),a.RANDOM_VALUE],[l.default.setMapBlank(),"blank"],[l.default.setMapCircle(),"circle"],[l.default.setMapHorizontal(),"horizontal"],[l.default.setMapGrid(),"grid"],[l.default.setMapBlobs(),"blobs"]],e.backgroundChoices=[[l.default.setBackgroundRandom(),a.RANDOM_VALUE],[l.default.setBackgroundEndor(),'"endor"'],[l.default.setBackgroundHoth(),'"hoth"'],[l.default.setBackgroundStarship(),'"starship"']],e.backgroundChoicesK1=[[e.endor.background,'"endor"'],[e.hoth.background,'"hoth"'],[e.starship.background,'"starship"'],[e.randomPurpleIcon,a.RANDOM_VALUE]],e.spriteChoices=[[l.default.setDroidHidden(),a.HIDDEN_VALUE],[l.default.setDroidRandom(),a.RANDOM_VALUE],[l.default.setDroidR2D2(),'"r2-d2"'],[l.default.setDroidC3PO(),'"c-3po"']],e.setSpritePrefix=l.default.setDroid(),e.projectileChoices=[],e.itemChoices=[[l.default.itemStormtrooper(),'"stormtrooper"'],[l.default.itemRebelPilot(),'"rebelpilot"'],[l.default.itemPufferPig(),'"pufferpig"'],[l.default.itemMynock(),'"mynock"'],[l.default.itemMouseDroid(),'"mousedroid"'],[l.default.itemTauntaun(),'"tauntaun"'],[l.default.itemProbot(),'"probot"'],[l.default.itemRandom(),a.RANDOM_VALUE]],e.msgOverrides={ifSprite:l.default.ifDroid,ifSpriteN:l.default.ifDroidN,moveSprite:l.default.moveDroid,moveSpriteN:l.default.moveDroidN,setSpriteN:l.default.setDroidN,stopSprite:l.default.stopDroid,stopSpriteN:l.default.stopDroidN,whenSpriteClicked:l.default.whenDroidClicked,whenSpriteClickedN:l.default.whenDroidClickedN}}function n(e){e.preloadAssets=!0,e.sortDrawOrder=!0,e.gridAlignedMovement=!0,e.gridAlignedExtraPauseSteps=1,e.slowExecutionFactor=10,e.hideIconInClearPuzzle=!0,e.defaultBackground="main",e.projectileFrames=10,e.itemFrames=10,e.instructions2ImageSubstitutions={bb8:e.assetUrl("instructions_bb8.png"),hazard:e.assetUrl("instructions_hazard.png"),scrapmetal1:e.assetUrl("goal1.png"),scrapmetal2:e.assetUrl("goal2.png")},e.blankAvatar=e.assetUrl("blank.png"),e.avatarAllowedScripts=["starwars","starwarsblocks"],e.ProjectileClassNames=[],e.ItemClassNames=["hazard"],e.AutohandlerTouchItems={},e.AutohandlerGetAllItems={},e.specialItemProperties={hazard:{frames:13,animationFrameDuration:6,width:100,height:100,scale:1.3,renderOffset:{x:0,y:-25},activity:a.BEHAVIOR_WATCH_ACTOR,speed:a.SpriteSpeed.VERY_SLOW,isHazard:!0}},e.goal1=e.assetUrl("goal1.png"),e.goal2=e.assetUrl("goal2.png"),e.goalSpriteWidth=50,e.goalSpriteHeight=50,e.animatedGoalFrames=1,e.disableClipRectOnGoals=!0,e.goalEffect="glow",e.timePerGoalAnimationFrame=100,e.goalCollisionRectWidth=50,e.goalCollisionRectHeight=50,e.fadeOutGoal=!0,e.goalSuccess=null,e.goalRenderOffsetX=0,e.goalRenderOffsetY=0,e.projectileSpriteWidth=70,e.projectileSpriteHeight=70,e.itemCollisionRectWidth=50,e.itemCollisionRectHeight=50,e.spriteCollisionRectWidth=50,e.spriteCollisionRectHeight=50,e.wallCollisionRectOffsetX=0,e.wallCollisionRectOffsetY=24,e.wallCollisionRectWidth=30,e.wallCollisionRectHeight=20,e.gridSpriteRenderOffsetX=-20,e.gridSpriteRenderOffsetY=-40,e.avatarList=["bb-8"],e.avatarList.forEach(function(t){e[t]={sprite:e.assetUrl("avatar_"+t+".png"),walk:e.assetUrl("walk_"+t+".png"),dropdownThumbnail:e.assetUrl("avatar_"+t+"_thumb.png"),frameCounts:{normal:21,turns:8,emotions:0,walk:19},drawScale:2,animations:{turns:8},animationFrameDuration:3}}),e["bb-8"].movementAudio=[{begin:"move1",volume:.3},{begin:"move2",volume:.3},{begin:"move3",volume:.3},{begin:"move4",volume:.3}],e.preventProjectileLoop=function(e){return""===e},e.preventItemLoop=function(e){return""===e},e.winAvatar=null,e.hazard=e.assetUrl("hazard_idle.png"),e.main={background:e.assetUrl("background_background1.jpg"),tiles:e.assetUrl("tiles_background1.png"),clouds:[e.assetUrl("cloud_light.png"),e.assetUrl("cloud_light2.png")]},e.enlargeWallTiles={minCol:0,maxCol:3,minRow:3,maxRow:5},e.sounds=["move1","move2","move3","move4"],e.soundChoices=[],e.soundChoicesK1=[],e.musicMetadata=s,e.playFinalGoalSound=!0,e.mapChoices=[],e.backgroundChoices=[],e.backgroundChoicesK1=[],e.spriteChoices=[[l.default.setDroidHidden(),a.HIDDEN_VALUE],[l.default.setDroidRandom(),a.RANDOM_VALUE],[l.default.setDroidBB8(),'"bb-8"']],e.setSpritePrefix=l.default.setDroid(),e.projectileChoices=[],e.itemChoices=[]}Object.defineProperty(t,"__esModule",{value:!0}),t.loadStarWarsEvents=o,t.loadStarWarsGrid=n;var a=i(789),r=i(1706),l=function(e){return e&&e.__esModule?e:{default:e}}(r),s=[{name:"song1",volume:.5},{name:"song2",volume:.5},{name:"song3",volume:.5},{name:"song4",volume:.4},{name:"song5",volume:.4},{name:"song6",volume:.5},{name:"song7",volume:.4},{name:"song8",volume:.4},{name:"song9",volume:.4},{name:"song10",volume:.5},{name:"song11",volume:.45},{name:"song12",volume:.4},{name:"song13",volume:.4},{name:"song14",volume:.5},{name:"song15",volume:.55}]},2794:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=i(2946),a=o(n),r=i(850),l=o(r),s=function(e){this.studio_=e,this.cached_={}};s.prototype.onTick=function(){throw new Error("should be overridden by child")},s.prototype.reset=function(){},s.prototype.cacheBlock=function(e,t){this.cached_[e]=t},s.prototype.resolveCachedBlock_=function(e){var t="",i=this.cached_[e];if(!i)return t;var o="return "+Blockly.JavaScript.blockToCode(i);return t=l.default.evalWith(o,{Studio:a.default,Globals:Studio.Globals},{legacy:!0})},s.prototype.getVar_=function(e){return this.resolveCachedBlock_(e)},s.prototype.getFunc_=function(e){return this.resolveCachedBlock_(e)||function(){}},e.exports=s},2795:function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(t,i,n){o(this,e),this.gridAlignedMovement=i.gridAlignedMovement,this.wallCollisionRectOffsetX=i.wallCollisionRectOffsetX,this.wallCollisionRectOffsetY=i.wallCollisionRectOffsetY,this.wallCollisionRectWidth=i.wallCollisionRectWidth,this.wallCollisionRectHeight=i.wallCollisionRectHeight,this.drawDebugRect=n}return e.prototype.setBackground=function(e){this.background=e},e.prototype.setWallMapRequested=function(e){this.wallMapRequested=e},e.prototype.willCollidableTouchWall=function(e,t,i){var o=e.width,n=e.height;return this.gridAlignedMovement||(t+=this.wallCollisionRectOffsetX,i+=this.wallCollisionRectOffsetY,o=this.wallCollisionRectWidth||o,n=this.wallCollisionRectHeight||n),this.drawDebugRect("avatarCollision",t,i,o,n),this.willRectTouchWall(t,i,o,n)},e.prototype.willRectTouchWall=function(e,t,i,o){return!1},e.prototype.overlappingTest=function(e,t,i,o,n,a){return Math.abs(e-t)<i&&Math.abs(o-n)<a},e.prototype.getWallOverlayURI=function(){return null},e.prototype.setColor=function(e){},e}();t.default=n,e.exports=t.default},2796:function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=i(71),a=i(216),r=0,l=function(){function e(t){o(this,e),this.spriteSheet_=t.spriteSheet,this.renderScale_=(0,n.valueOr)(t.renderScale,1),this.opacity_=(0,n.valueOr)(t.opacity,1),this.currentAnimationType_=0,this.specialAnimations_={},this.currentAnimationIndex_=0,this.loop_=(0,n.valueOr)(t.loop,!1),this.skewAnimations_=(0,n.valueOr)(t.skewAnimations,!1),this.element_=null,this.clipPath_=null,this.animationFrameDuration_=t.animationFrameDuration||1}return e.__resetIds=function(){r=0},e.prototype.getElement=function(){return this.element_},e.prototype.createElement=function(e){this.animId=r++,this.clipPath_=document.createElementNS(a.SVG_NS,"clipPath");var t="studioanimation_clippath_"+this.animId;this.clipPath_.setAttribute("id",t);var i=document.createElementNS(a.SVG_NS,"rect");i.setAttribute("width",this.spriteSheet_.frameWidth*this.renderScale_),i.setAttribute("height",this.spriteSheet_.frameHeight*this.renderScale_),this.clipPath_.appendChild(i),e.appendChild(this.clipPath_);var o="studioanimation_"+this.animId;this.element_=document.createElementNS(a.SVG_NS,"image"),this.element_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.spriteSheet_.assetPath),this.element_.setAttribute("id",o),this.element_.setAttribute("height",this.spriteSheet_.assetHeight()*this.renderScale_),this.element_.setAttribute("width",this.spriteSheet_.assetWidth()*this.renderScale_),e.appendChild(this.element_),this.element_.setAttribute("clip-path","url(#"+t+")")},e.prototype.removeElement=function(){this.element_&&(this.element_.parentNode.removeChild(this.element_),this.element_=null),this.clipPath_&&(this.clipPath_.parentNode.removeChild(this.clipPath_),this.clipPath_=null)},e.prototype.hasType=function(e){return!!this.specialAnimations_[e]||!!this.spriteSheet_.animationFrameCounts[e]},e.prototype.getAnimationFrameCount=function(){var e=this.specialAnimations_[this.currentAnimationType_];return e?e[this.currentAnimationIndex_].length:this.spriteSheet_.getAnimationFrameCount(this.currentAnimationType_)},e.prototype.getFrame=function(e){var t=this.specialAnimations_[this.currentAnimationType_];return t?t[this.currentAnimationIndex_][e]:this.spriteSheet_.getFrame(this.currentAnimationType_,this.currentAnimationIndex_,e)},e.prototype.redrawCenteredAt=function(e,t){var i=t;this.skewAnimations_&&(i=t+this.animId*(this.animationFrameDuration_+1));var o=Math.floor(i/this.animationFrameDuration_),n=this.getAnimationFrameCount();this.loop_?o%=n:o=Math.min(o,n-1);var a=this.getFrame(o),r=this.renderScale_,l={x:e.x-a.width/2*r,y:e.y-a.height/2*(2*r-1)};this.element_.setAttribute("x",l.x-a.left*r),this.element_.setAttribute("y",l.y-a.top*r),this.element_.setAttribute("opacity",this.opacity_);var s=this.clipPath_.childNodes[0];s.setAttribute("x",l.x),s.setAttribute("y",l.y)},e.prototype.setCurrentAnimation=function(e,t){this.currentAnimationType_=e,this.currentAnimationIndex_=t},e.prototype.createSpecialAnimation=function(e,t,i){this.specialAnimations_[e]||(this.specialAnimations_[e]=[]);for(var o=[],n=0;n<i.length;n++)o.push(this.spriteSheet_.getFrame(i[n].type,i[n].index,i[n].frame));this.specialAnimations_[e][t]=o},e.prototype.setAnimationFrameDuration=function(e){this.animationFrameDuration_=e},e.prototype.setOpacity=function(e){this.opacity_=e},e.prototype.hide=function(){this.element_.setAttribute("visibility","hidden")},e.prototype.show=function(){this.element_.setAttribute("visibility","visible")},e}();t.default=l,e.exports=t.default},2797:function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=i(71),a=function(){function e(t){o(this,e),this.animations=t.animations||[],this.frameWidth=t.frameWidth,this.frameHeight=t.frameHeight,this.assetPath=t.assetPath,this.defaultFramesPerAnimation=t.defaultFramesPerAnimation||1,this.packedSheetFrameCount=t.packedSheetFrameCount,this.animationOffsets={},this.animationFrameCounts={};for(var i=0,a=0,r=0;r<this.animations.length;r++){this.animationOffsets[this.animations[r].type]=this.packedSheetFrameCount?i:a,a+=this.animations[r].count;var l=(0,n.valueOr)(this.animations[r].frames,this.defaultFramesPerAnimation);this.animationFrameCounts[this.animations[r].type]=l,i+=l*this.animations[r].count}if(this.totalAnimations=(0,n.valueOr)(t.totalAnimations,a),this.totalFrames=i||this.totalAnimations*this.defaultFramesPerAnimation,this.horizontalAnimation=(0,n.valueOr)(t.horizontalAnimation,!1),this.packedSheetFrameCount){var s=Math.ceil(this.totalFrames/this.packedSheetFrameCount),u=Math.ceil(this.totalFrames/s);this.columnCount=this.horizontalAnimation?u:s,this.rowCount=this.horizontalAnimation?s:u}else this.rowCount=this.horizontalAnimation?this.totalAnimations:this.defaultFramesPerAnimation,this.columnCount=this.horizontalAnimation?this.defaultFramesPerAnimation:this.totalAnimations}return e.prototype.assetWidth=function(){return this.frameWidth*this.columnCount},e.prototype.assetHeight=function(){return this.frameHeight*this.rowCount},e.prototype.getAnimationFrameCount=function(e){return(0,n.valueOr)(this.animationFrameCounts[e],this.defaultFramesPerAnimation)},e.prototype.getFrame=function(e,t,i){var o,n;if(this.packedSheetFrameCount){var a=this.animationOffsets[e]+this.animationFrameCounts[e]*t;a+=i,this.horizontalAnimation?(o=this.frameWidth*(a%this.columnCount),n=this.frameHeight*Math.floor(a/this.columnCount)):(o=this.frameWidth*Math.floor(a/this.rowCount),n=this.frameHeight*(a%this.rowCount))}else e&&(t+=this.animationOffsets[e]),o=this.frameWidth*(this.horizontalAnimation?i:t),n=this.frameHeight*(this.horizontalAnimation?t:i);return{x:o,y:n,width:this.frameWidth,height:this.frameHeight,top:n,left:o,right:o+this.frameWidth,bottom:n+this.frameHeight}},e}();t.default=a,e.exports=t.default},2800:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){e.twitterOptions=g,e.defaultBackground="dots",e.projectileFrames=10,e.itemFrames=10,e.spriteHeight=110,e.spriteWidth=110,e.spriteCollisionRectWidth=60,e.spriteCollisionRectHeight=60,e.ProjectileClassNames=["projectile_banana","projectile_dodgeball","projectile_donkey","projectile_handbag","projectile_hotdog","projectile_pompom","projectile_toaster","projectile_waterball"],e.ItemClassNames=["item_projectile_banana","item_projectile_dodgeball","item_projectile_donkey","item_projectile_handbag","item_projectile_hotdog","item_projectile_pompom","item_projectile_toaster","item_projectile_waterball"],e.projectile_banana=e.assetUrl("projectile_banana.png"),e.projectile_dodgeball=e.assetUrl("projectile_dodgeball.png"),e.projectile_donkey=e.assetUrl("projectile_donkey.png"),e.projectile_handbag=e.assetUrl("projectile_handbag.png"),e.projectile_hotdog=e.assetUrl("projectile_hotdog.png"),e.projectile_pompom=e.assetUrl("projectile_pompom.png"),e.projectile_toaster=e.assetUrl("projectile_toaster.png"),e.projectile_waterball=e.assetUrl("projectile_waterball.png"),e.item_projectile_banana=e.assetUrl("projectile_banana.png"),e.item_projectile_dodgeball=e.assetUrl("projectile_dodgeball.png"),e.item_projectile_donkey=e.assetUrl("projectile_donkey.png"),e.item_projectile_handbag=e.assetUrl("projectile_handbag.png"),e.item_projectile_hotdog=e.assetUrl("projectile_hotdog.png"),e.item_projectile_pompom=e.assetUrl("projectile_pompom.png"),e.item_projectile_toaster=e.assetUrl("projectile_toaster.png"),e.item_projectile_waterball=e.assetUrl("projectile_waterball.png"),e.explosion=e.assetUrl("explosion.png"),e.explosionThumbnail=e.assetUrl("explosion_thumb.png"),e.explosionFrames=40,e.fadeExplosion=!1,e.timePerExplosionFrame=20,e.characters={background:e.assetUrl("background_characters.png")},e.checkers={background:e.assetUrl("background_checkers.png")},e.clouds={background:e.assetUrl("background_clouds.png")},e.cornered={background:e.assetUrl("background_cornered.png")},e.dots={background:e.assetUrl("background_dots.png")},e.graffiti={background:e.assetUrl("background_graffiti.png")},e.space={background:e.assetUrl("background_space.png")},e.squares={background:e.assetUrl("background_squares.png")},e.stripes={background:e.assetUrl("background_stripes.png")},e.wood={background:e.assetUrl("background_wood.png")},e.avatarList=["anais","anton","bananajoe","darwin","gumball","nicole","penny","richard"],e.walkValues=[8,8,8,12,12,8,10,12],e.avatarList.forEach(function(t,i){e[t]={sprite:e.assetUrl("idle_"+t+".png"),walk:e.assetUrl("walk_"+t+".png"),dropdownThumbnail:e.assetUrl("avatar_"+t+"_thumb.png"),frameCounts:{normal:19,turns:8,emotions:0,walk:e.walkValues[i],extraEmotions:3,walkingEmotions:3},animations:{turns:8,walkingEmotions:3},animationFrameDuration:3}}),e.backgroundChoices=[[d.default.setBackgroundRandom(),s.RANDOM_VALUE],[d.default.setBackgroundCharacters(),'"characters"'],[d.default.setBackgroundCheckers(),'"checkers"'],[d.default.setBackgroundClouds(),'"clouds"'],[d.default.setBackgroundCornered(),'"cornered"'],[d.default.setBackgroundDots(),'"dots"'],[d.default.setBackgroundGraffiti(),'"graffiti"'],[d.default.setBackgroundSpace(),'"space"'],[d.default.setBackgroundSquares(),'"squares"'],[d.default.setBackgroundStripes(),'"stripes"'],[d.default.setBackgroundWood(),'"wood"']],e.backgroundChoicesK1=[[e.characters.background,'"characters"'],[e.checkers.background,'"checkers"'],[e.clouds.background,'"clouds"'],[e.cornered.background,'"cornered"'],[e.dots.background,'"dots"'],[e.graffiti.background,'"graffiti"'],[e.space.background,'"space"'],[e.squares.background,'"squares"'],[e.stripes.background,'"stripes"'],[e.wood.background,'"wood"'],[e.randomPurpleIcon,s.RANDOM_VALUE]],e.spriteChoices=[[d.default.setSpriteHidden(),s.HIDDEN_VALUE],[d.default.setSpriteRandom(),s.RANDOM_VALUE],[d.default.setSpriteAnais(),'"anais"'],[d.default.setSpriteAnton(),'"anton"'],[d.default.setSpriteBananajoe(),'"bananajoe"'],[d.default.setSpriteDarwin(),'"darwin"'],[d.default.setSpriteGumball(),'"gumball"'],[d.default.setSpriteNicole(),'"nicole"'],[d.default.setSpritePenny(),'"penny"'],[d.default.setSpriteRichard(),'"richard"']],e.projectileChoices=[[d.default.projectileBanana(),'"projectile_banana"'],[d.default.projectileDodgeball(),'"projectile_dodgeball"'],[d.default.projectileDonkey(),'"projectile_donkey"'],[d.default.projectileHandbag(),'"projectile_handbag"'],[d.default.projectileHotdog(),'"projectile_hotdog"'],[d.default.projectilePompom(),'"projectile_pompom"'],[d.default.projectileToaster(),'"projectile_toaster"'],[d.default.projectileWaterball(),'"projectile_waterball"'],[d.default.projectileRandom(),s.RANDOM_VALUE]],e.makeProjectileChoices=[[d.default.makeProjectileBanana(),'"projectile_banana"'],[d.default.makeProjectileDodgeball(),'"projectile_dodgeball"'],[d.default.makeProjectileDonkey(),'"projectile_donkey"'],[d.default.makeProjectileHandbag(),'"projectile_handbag"'],[d.default.makeProjectileHotdog(),'"projectile_hotdog"'],[d.default.makeProjectilePompom(),'"projectile_pompom"'],[d.default.makeProjectileToaster(),'"projectile_toaster"'],[d.default.makeProjectileWaterball(),'"projectile_waterball"']],e.whenProjectileCollidedChoices=[[d.default.whenSpriteCollidedWithProjectileBanana(),"projectile_banana"],[d.default.whenSpriteCollidedWithProjectileDodgeball(),"projectile_dodgeball"],[d.default.whenSpriteCollidedWithProjectileDonkey(),"projectile_donkey"],[d.default.whenSpriteCollidedWithProjectileHandbag(),"projectile_handbag"],[d.default.whenSpriteCollidedWithProjectileHotdog(),"projectile_hotdog"],[d.default.whenSpriteCollidedWithProjectilePompom(),"projectile_pompom"],[d.default.whenSpriteCollidedWithProjectileToaster(),"projectile_toaster"],[d.default.whenSpriteCollidedWithProjectileWaterball(),"projectile_waterball"]],e.itemChoices=[[d.default.itemProjectileBanana(),'"item_projectile_banana"'],[d.default.itemProjectileDodgeball(),'"item_projectile_dodgeball"'],[d.default.itemProjectileDonkey(),'"item_projectile_donkey"'],[d.default.itemProjectileHandbag(),'"item_projectile_handbag"'],[d.default.itemProjectileHotdog(),'"item_projectile_hotdog"'],[d.default.itemProjectilePompom(),'"item_projectile_pompom"'],[d.default.itemProjectileToaster(),'"item_projectile_toaster"'],[d.default.itemProjectileWaterball(),'"item_projectile_waterball"'],[d.default.itemRandom(),s.RANDOM_VALUE]]}function a(e){e.twitterOptions=g,e.defaultBackground="icy1",e.projectileFrames=10,e.itemFrames=10,e.spriteHeight=130,e.spriteWidth=130,e.spriteCollisionRectWidth=60,e.spriteCollisionRectHeight=60,e.ProjectileClassNames=["ia_projectile_1","ia_projectile_2","ia_projectile_3","ia_projectile_4","ia_projectile_5"],e.ItemClassNames=["item_ia_projectile_1","item_ia_projectile_2","item_ia_projectile_3","item_ia_projectile_4","item_ia_projectile_5"],e.ia_projectile_1=e.assetUrl("ia_projectile_1.png"),e.ia_projectile_2=e.assetUrl("ia_projectile_2.png"),e.ia_projectile_3=e.assetUrl("ia_projectile_3.png"),e.ia_projectile_4=e.assetUrl("ia_projectile_4.png"),e.ia_projectile_5=e.assetUrl("ia_projectile_5.png"),e.item_ia_projectile_1=e.assetUrl("ia_projectile_1.png"),e.item_ia_projectile_2=e.assetUrl("ia_projectile_2.png"),e.item_ia_projectile_3=e.assetUrl("ia_projectile_3.png"),e.item_ia_projectile_4=e.assetUrl("ia_projectile_4.png"),e.item_ia_projectile_5=e.assetUrl("ia_projectile_5.png"),e.explosion=e.assetUrl("explosion.png"),e.explosionThumbnail=e.assetUrl("explosion_thumb.png"),e.explosionFrames=17,e.fadeExplosion=!1,e.timePerExplosionFrame=40,e.icy1={background:e.assetUrl("background_icy1.jpg")},e.icy2={background:e.assetUrl("background_icy2.jpg")},e.icy3={background:e.assetUrl("background_icy3.jpg")},e.icy4={background:e.assetUrl("background_icy4.jpg")},e.icy5={background:e.assetUrl("background_icy5.jpg")},e.ground={background:e.assetUrl("background_ground.jpg")},e.avatarList=["manny","sid","scrat","diego","granny"],e.avatarList.forEach(function(t){e[t]={sprite:e.assetUrl("avatar_"+t+".png"),walk:e.assetUrl("walk_"+t+".png"),dropdownThumbnail:e.assetUrl("avatar_"+t+"_thumb.png"),frameCounts:{normal:19,turns:8,emotions:0,walk:12,extraEmotions:3,walkingEmotions:3},animations:{turns:8,walkingEmotions:3},animationFrameDuration:3}}),e.backgroundChoices=[[d.default.setBackgroundRandom(),s.RANDOM_VALUE],[d.default.setBackgroundIcy1(),'"icy1"'],[d.default.setBackgroundIcy2(),'"icy2"'],[d.default.setBackgroundIcy3(),'"icy3"'],[d.default.setBackgroundIcy4(),'"icy4"'],[d.default.setBackgroundIcy5(),'"icy5"'],[d.default.setBackgroundGround(),'"ground"']],e.backgroundChoicesK1=[[e.icy1.background,'"icy1"'],[e.icy2.background,'"icy2"'],[e.icy3.background,'"icy3"'],[e.icy4.background,'"icy4"'],[e.icy5.background,'"icy5"'],[e.ground.background,'"ground"'],[e.randomPurpleIcon,s.RANDOM_VALUE]],e.spriteChoices=[[d.default.setSpriteHidden(),s.HIDDEN_VALUE],[d.default.setSpriteRandom(),s.RANDOM_VALUE],[d.default.setSpriteManny(),'"manny"'],[d.default.setSpriteSid(),'"sid"'],[d.default.setSpriteScrat(),'"scrat"'],[d.default.setSpriteDiego(),'"diego"'],[d.default.setSpriteGranny(),'"granny"']],e.projectileChoices=[[d.default.projectileIAProjectile1(),'"ia_projectile_1"'],[d.default.projectileIAProjectile2(),'"ia_projectile_2"'],[d.default.projectileIAProjectile3(),'"ia_projectile_3"'],[d.default.projectileIAProjectile4(),'"ia_projectile_4"'],[d.default.projectileIAProjectile5(),'"ia_projectile_5"'],[d.default.projectileRandom(),s.RANDOM_VALUE]],e.makeProjectileChoices=[[d.default.makeProjectileIAProjectile1(),'"ia_projectile_1"'],[d.default.makeProjectileIAProjectile2(),'"ia_projectile_2"'],[d.default.makeProjectileIAProjectile3(),'"ia_projectile_3"'],[d.default.makeProjectileIAProjectile4(),'"ia_projectile_4"'],[d.default.makeProjectileIAProjectile5(),'"ia_projectile_5"']],e.whenProjectileCollidedChoices=[[d.default.whenSpriteCollidedWithIAProjectile1(),"ia_projectile_1"],[d.default.whenSpriteCollidedWithIAProjectile2(),"ia_projectile_2"],[d.default.whenSpriteCollidedWithIAProjectile3(),"ia_projectile_3"],[d.default.whenSpriteCollidedWithIAProjectile4(),"ia_projectile_4"],[d.default.whenSpriteCollidedWithIAProjectile5(),"ia_projectile_5"]],e.itemChoices=[[d.default.itemIAProjectile1(),'"item_ia_projectile_1"'],[d.default.itemIAProjectile2(),'"item_ia_projectile_2"'],[d.default.itemIAProjectile3(),'"item_ia_projectile_3"'],[d.default.itemIAProjectile4(),'"item_ia_projectile_4"'],[d.default.itemIAProjectile5(),'"item_ia_projectile_5"'],[d.default.itemRandom(),s.RANDOM_VALUE]]}function r(e){e.preloadAssets=!0,e.defaultBackground="leafy",e.projectileFrames=10,e.itemFrames=10,e.ProjectileClassNames=["projectile_hiro","projectile_anna","projectile_elsa","projectile_baymax","projectile_rapunzel","projectile_cherry","projectile_ice","projectile_duck"],e.specialProjectileProperties={projectile_cherry:{frames:13},projectile_ice:{frames:12},projectile_duck:{frames:12}},e.ItemClassNames=["item_hiro","item_anna","item_elsa","item_baymax","item_rapunzel","item_cherry","item_ice","item_duck"],e.specialItemProperties={item_cherry:{frames:13},item_ice:{frames:12},item_duck:{frames:12}},e.explosion=e.assetUrl("vanish.png"),e.explosionFrames=17,e.fadeExplosion=!0,e.timePerExplosionFrame=100,e.projectileSpriteWidth=70,e.projectileSpriteHeight=70,e.avatarList=["anna","elsa","hiro","baymax","rapunzel"],e.avatarList.forEach(function(t){e[t]={sprite:e.assetUrl("avatar_"+t+".png"),walk:e.assetUrl("walk_"+t+".png"),dropdownThumbnail:e.assetUrl("avatar_"+t+"_thumb.png"),frameCounts:{normal:19,turns:8,emotions:0,walk:12},animations:{turns:8},animationFrameDuration:3}}),e.preventProjectileLoop=function(e){return"projectile_hiro"===e},e.preventItemLoop=function(e){return"item_hiro"===e},e.projectile_hiro=e.assetUrl("projectile_hiro.png"),e.projectile_anna=e.assetUrl("projectile_anna.png"),e.projectile_elsa=e.assetUrl("projectile_elsa.png"),e.projectile_baymax=e.assetUrl("projectile_baymax.png"),e.projectile_rapunzel=e.assetUrl("projectile_rapunzel.png"),e.projectile_cherry=e.assetUrl("projectile_cherry.png"),e.projectile_ice=e.assetUrl("projectile_ice.png"),e.projectile_duck=e.assetUrl("projectile_duck.png"),e.item_hiro=e.assetUrl("projectile_hiro.png"),e.item_anna=e.assetUrl("projectile_anna.png"),e.item_elsa=e.assetUrl("projectile_elsa.png"),e.item_baymax=e.assetUrl("projectile_baymax.png"),e.item_rapunzel=e.assetUrl("projectile_rapunzel.png"),e.item_cherry=e.assetUrl("projectile_cherry.png"),e.item_ice=e.assetUrl("projectile_ice.png"),e.item_duck=e.assetUrl("projectile_duck.png"),e.leafy={background:e.assetUrl("background_leafy.jpg")},e.grassy={background:e.assetUrl("background_grassy.jpg")},e.flower={background:e.assetUrl("background_flower.jpg")},e.tile={background:e.assetUrl("background_tile.jpg")},e.icy={background:e.assetUrl("background_icy.jpg")},e.snowy={background:e.assetUrl("background_snowy.jpg")},e.backgroundChoices=[[d.default.setBackgroundRandom(),s.RANDOM_VALUE],[d.default.setBackgroundLeafy(),'"leafy"'],[d.default.setBackgroundGrassy(),'"grassy"'],[d.default.setBackgroundFlower(),'"flower"'],[d.default.setBackgroundTile(),'"tile"'],[d.default.setBackgroundIcy(),'"icy"'],[d.default.setBackgroundSnowy(),'"snowy"']],e.backgroundChoicesK1=[[e.leafy.background,'"leafy"'],[e.grassy.background,'"grassy"'],[e.flower.background,'"flower"'],[e.tile.background,'"tile"'],[e.icy.background,'"icy"'],[e.snowy.background,'"snowy"'],[e.randomPurpleIcon,s.RANDOM_VALUE]],e.spriteChoices=[[d.default.setSpriteHidden(),s.HIDDEN_VALUE],[d.default.setSpriteRandom(),s.RANDOM_VALUE],[d.default.setSpriteAnna(),'"anna"'],[d.default.setSpriteElsa(),'"elsa"'],[d.default.setSpriteHiro(),'"hiro"'],[d.default.setSpriteBaymax(),'"baymax"'],[d.default.setSpriteRapunzel(),'"rapunzel"']],e.projectileChoices=[[d.default.projectileHiro(),'"projectile_hiro"'],[d.default.projectileAnna(),'"projectile_anna"'],[d.default.projectileElsa(),'"projectile_elsa"'],[d.default.projectileBaymax(),'"projectile_baymax"'],[d.default.projectileRapunzel(),'"projectile_rapunzel"'],[d.default.projectileCherry(),'"projectile_cherry"'],[d.default.projectileIce(),'"projectile_ice"'],[d.default.projectileDuck(),'"projectile_duck"'],[d.default.projectileRandom(),s.RANDOM_VALUE]],e.itemChoices=[[d.default.itemHiro(),'"item_hiro"'],[d.default.itemAnna(),'"item_anna"'],[d.default.itemElsa(),'"item_elsa"'],[d.default.itemBaymax(),'"item_baymax"'],[d.default.itemRapunzel(),'"item_rapunzel"'],[d.default.itemCherry(),'"item_cherry"'],[d.default.itemIce(),'"item_ice"'],[d.default.itemDuck(),'"item_duck"'],[d.default.itemRandom(),s.RANDOM_VALUE]]}function l(e){e.defaultBackground="cave",e.projectileFrames=8,e.itemFrames=8,e.explosion=e.assetUrl("explosion.png"),e.explosionThumbnail=e.assetUrl("explosion_thumb.png"),e.explosionFrames=20,e.fadeExplosion=!1,e.timePerExplosionFrame=40,e.hardcourt={background:e.assetUrl("background.png")},e.black={background:e.assetUrl("retro_background.png")},e.cave={background:e.assetUrl("background_cave.png")},e.night={background:e.assetUrl("background_santa.png")},e.cloudy={background:e.assetUrl("background_scifi.png")},e.underwater={background:e.assetUrl("background_underwater.png")},e.city={background:e.assetUrl("background_city.png")},e.desert={background:e.assetUrl("background_desert.png")},e.rainbow={background:e.assetUrl("background_rainbow.png")},e.soccer={background:e.assetUrl("background_soccer.png")},e.space={background:e.assetUrl("background_space.png")},e.tennis={background:e.assetUrl("background_tennis.png")},e.winter={background:e.assetUrl("background_winter.png")},e.grid={background:e.assetUrl("background_grid.png")},e.mapChoices=[[d.default.setMapRandom(),s.RANDOM_VALUE],[d.default.setMapBlank(),"blank"],[d.default.setMapCircle(),"circle"],[d.default.setMapHorizontal(),"horizontal"],[d.default.setMapGrid(),"grid"],[d.default.setMapBlobs(),"blobs"]],e.wallMaps={blank:{srcUrl:e.assetUrl("obstacle_blank.png")},circle:{srcUrl:e.assetUrl("obstacle_circle.png")},horizontal:{srcUrl:e.assetUrl("obstacle_horizontal.png")},grid:{srcUrl:e.assetUrl("obstacle_grid.png")},blobs:{srcUrl:e.assetUrl("obstacle_blobs.png")}},e.avatarList=["dog","cat","penguin","dinosaur","octopus","witch","bat","bird","dragon","squirrel","wizard","alien","ghost","monster","robot","unicorn","zombie","knight","ninja","pirate","caveboy","cavegirl","princess","spacebot","soccergirl","soccerboy","tennisgirl","tennisboy"],e.avatarList.forEach(function(t){e[t]={sprite:e.assetUrl(t+"_spritesheet_200px.png"),dropdownThumbnail:e.assetUrl(t+"_thumb.png"),frameCounts:{normal:2,holdIdleFrame0Count:8,turns:7,emotions:3},animationFrameDuration:6}}),e.backgroundChoices=[[d.default.setBackgroundRandom(),s.RANDOM_VALUE],[d.default.setBackgroundCave(),'"cave"'],[d.default.setBackgroundNight(),'"night"'],[d.default.setBackgroundCloudy(),'"cloudy"'],[d.default.setBackgroundUnderwater(),'"underwater"'],[d.default.setBackgroundHardcourt(),'"hardcourt"'],[d.default.setBackgroundBlack(),'"black"'],[d.default.setBackgroundCity(),'"city"'],[d.default.setBackgroundDesert(),'"desert"'],[d.default.setBackgroundRainbow(),'"rainbow"'],[d.default.setBackgroundSoccer(),'"soccer"'],[d.default.setBackgroundSpace(),'"space"'],[d.default.setBackgroundTennis(),'"tennis"'],[d.default.setBackgroundWinter(),'"winter"']],e.backgroundChoicesK1=[[e.cave.background,'"cave"'],[e.night.background,'"night"'],[e.cloudy.background,'"cloudy"'],[e.underwater.background,'"underwater"'],[e.hardcourt.background,'"hardcourt"'],[e.black.background,'"black"'],[e.city.background,'"city"'],[e.desert.background,'"desert"'],[e.rainbow.background,'"rainbow"'],[e.soccer.background,'"soccer"'],[e.space.background,'"space"'],[e.tennis.background,'"tennis"'],[e.winter.background,'"winter"'],[e.randomPurpleIcon,s.RANDOM_VALUE]],e.spriteChoices=[[d.default.setSpriteHidden(),s.HIDDEN_VALUE],[d.default.setSpriteRandom(),s.RANDOM_VALUE],[d.default.setSpriteWitch(),'"witch"'],[d.default.setSpriteCat(),'"cat"'],[d.default.setSpriteDinosaur(),'"dinosaur"'],[d.default.setSpriteDog(),'"dog"'],[d.default.setSpriteOctopus(),'"octopus"'],[d.default.setSpritePenguin(),'"penguin"'],[d.default.setSpriteBat(),'"bat"'],[d.default.setSpriteBird(),'"bird"'],[d.default.setSpriteDragon(),'"dragon"'],[d.default.setSpriteSquirrel(),'"squirrel"'],[d.default.setSpriteWizard(),'"wizard"'],[d.default.setSpriteAlien(),'"alien"'],[d.default.setSpriteGhost(),'"ghost"'],[d.default.setSpriteMonster(),'"monster"'],[d.default.setSpriteRobot(),'"robot"'],[d.default.setSpriteUnicorn(),'"unicorn"'],[d.default.setSpriteZombie(),'"zombie"'],[d.default.setSpriteKnight(),'"knight"'],[d.default.setSpriteNinja(),'"ninja"'],[d.default.setSpritePirate(),'"pirate"'],[d.default.setSpriteCaveBoy(),'"caveboy"'],[d.default.setSpriteCaveGirl(),'"cavegirl"'],[d.default.setSpritePrincess(),'"princess"'],[d.default.setSpriteSpacebot(),'"spacebot"'],[d.default.setSpriteSoccerGirl(),'"soccergirl"'],[d.default.setSpriteSoccerBoy(),'"soccerboy"'],[d.default.setSpriteTennisGirl(),'"tennisgirl"'],[d.default.setSpriteTennisBoy(),'"tennisboy"']],e.projectileChoices=[[d.default.projectileAirplane(),'"airplane"'],[d.default.projectileBasketball(),'"basketball"'],[d.default.projectileDisc(),'"disc"'],[d.default.projectilePie(),'"pie"'],[d.default.projectilePumpkin(),'"pumpkin"'],[d.default.projectileStar(),'"star"'],[d.default.projectileSandwich(),'"sandwich"'],[d.default.projectileSnowball(),'"snowball"'],[d.default.projectileBlueFireball(),'"blue_fireball"'],[d.default.projectilePurpleFireball(),'"purple_fireball"'],[d.default.projectileRedFireball(),'"red_fireball"'],[d.default.projectileYellowHearts(),'"yellow_hearts"'],[d.default.projectilePurpleHearts(),'"purple_hearts"'],[d.default.projectileRedHearts(),'"red_hearts"'],[d.default.projectileRandom(),s.RANDOM_VALUE]],e.makeProjectileChoices=[[d.default.makeProjectileAirplane(),'"airplane"'],[d.default.makeProjectileBasketball(),'"basketball"'],[d.default.makeProjectileDisc(),'"disc"'],[d.default.makeProjectilePie(),'"pie"'],[d.default.makeProjectilePumpkin(),'"pumpkin"'],[d.default.makeProjectileStar(),'"star"'],[d.default.makeProjectileSandwich(),'"sandwich"'],[d.default.makeProjectileSnowball(),'"snowball"'],[d.default.makeProjectileBlueFireball(),'"blue_fireball"'],[d.default.makeProjectilePurpleFireball(),'"purple_fireball"'],[d.default.makeProjectileRedFireball(),'"red_fireball"'],[d.default.makeProjectileYellowHearts(),'"yellow_hearts"'],[d.default.makeProjectilePurpleHearts(),'"purple_hearts"'],[d.default.makeProjectileRedHearts(),'"red_hearts"']],e.whenProjectileCollidedChoices=[[d.default.whenSpriteCollidedWithAirplane(),"airplane"],[d.default.whenSpriteCollidedWithBasketball(),"basketball"],[d.default.whenSpriteCollidedWithDisc(),"disc"],[d.default.whenSpriteCollidedWithPie(),"pie"],[d.default.whenSpriteCollidedWithPumpkin(),"pumpkin"],[d.default.whenSpriteCollidedWithStar(),"star"],[d.default.whenSpriteCollidedWithSandwich(),"sandwich"],[d.default.whenSpriteCollidedWithSnowball(),"snowball"],[d.default.whenSpriteCollidedWithBlueFireball(),"blue_fireball"],[d.default.whenSpriteCollidedWithPurpleFireball(),"purple_fireball"],[d.default.whenSpriteCollidedWithRedFireball(),"red_fireball"],[d.default.whenSpriteCollidedWithYellowHearts(),"yellow_hearts"],[d.default.whenSpriteCollidedWithPurpleHearts(),"purple_hearts"],[d.default.whenSpriteCollidedWithRedHearts(),"red_hearts"]],e.itemChoices=[[d.default.itemAirplane(),'"item_airplane"'],[d.default.itemBasketball(),'"item_basketball"'],[d.default.itemDisc(),'"item_disc"'],[d.default.itemPie(),'"item_pie"'],[d.default.itemPumpkin(),'"item_pumpkin"'],[d.default.itemStar(),'"item_star"'],[d.default.itemSandwich(),'"item_sandwich"'],[d.default.itemSnowball(),'"item_snowball"'],[d.default.itemBlueFireball(),'"item_blue_fireball"'],[d.default.itemPurpleFireball(),'"item_purple_fireball"'],[d.default.itemRedFireball(),'"item_red_fireball"'],[d.default.itemYellowHearts(),'"item_yellow_hearts"'],[d.default.itemPurpleHearts(),'"item_purple_hearts"'],[d.default.itemRedHearts(),'"item_red_hearts"'],[d.default.itemRandom(),s.RANDOM_VALUE]]}var s=i(789),u=i(1706),d=o(u),c=i(40),p=o(c),m=i(744),h=o(m),f=i(2151),g={text:p.default.defaultTwitterText()+" @codeorg",hashtag:"HourOfCode"};t.load=function(e,t){var i=h.default.load(e,t);switch(i.ProjectileClassNames=["airplane","basketball","disc","pie","pumpkin","star","sandwich","snowball","blue_fireball","purple_fireball","red_fireball","purple_hearts","red_hearts","yellow_hearts"],i.specialProjectileProperties={airplane:{frames:10},basketball:{frames:10},disc:{frames:10},pie:{frames:10},pumpkin:{frames:10},star:{frames:10},sandwich:{frames:10},snowball:{frames:10}},i.ItemClassNames=["item_airplane","item_basketball","item_disc","item_pie","item_pumpkin","item_star","item_sandwich","item_snowball","item_blue_fireball","item_purple_fireball","item_red_fireball","item_purple_hearts","item_red_hearts","item_yellow_hearts"],i.airplane=i.assetUrl("projectile_airplane.png"),i.basketball=i.assetUrl("projectile_basketball.png"),i.disc=i.assetUrl("projectile_disc.png"),i.pie=i.assetUrl("projectile_pie.png"),i.pumpkin=i.assetUrl("projectile_pumpkin.png"),i.star=i.assetUrl("projectile_star.png"),i.sandwich=i.assetUrl("projectile_sandwich.png"),i.snowball=i.assetUrl("projectile_snowball.png"),i.yellow_hearts=i.assetUrl("yellow_hearts.gif"),i.purple_hearts=i.assetUrl("purple_hearts.gif"),i.red_hearts=i.assetUrl("red_hearts.gif"),i.blue_fireball=i.assetUrl("blue_fireball.png"),i.purple_fireball=i.assetUrl("purple_fireball.png"),i.red_fireball=i.assetUrl("red_fireball.png"),i.item_airplane=i.assetUrl("projectile_airplane.png"),i.item_basketball=i.assetUrl("projectile_basketball.png"),i.item_disc=i.assetUrl("projectile_disc.png"),i.item_pie=i.assetUrl("projectile_pie.png"),i.item_pumpkin=i.assetUrl("projectile_pumpkin.png"),i.item_star=i.assetUrl("projectile_star.png"),i.item_sandwich=i.assetUrl("projectile_sandwich.png"),i.item_snowball=i.assetUrl("projectile_snowball.png"),i.item_yellow_hearts=i.assetUrl("yellow_hearts.gif"),i.item_purple_hearts=i.assetUrl("purple_hearts.gif"),i.item_red_hearts=i.assetUrl("red_hearts.gif"),i.item_blue_fireball=i.assetUrl("blue_fireball.png"),i.item_purple_fireball=i.assetUrl("purple_fireball.png"),i.item_red_fireball=i.assetUrl("red_fireball.png"),i.whenUp=i.assetUrl("when-up.png"),i.whenDown=i.assetUrl("when-down.png"),i.whenLeft=i.assetUrl("when-left.png"),i.whenRight=i.assetUrl("when-right.png"),i.collide=i.assetUrl("when-sprite-collide.png"),i.emotionAngry=i.assetUrl("emotion-angry.png"),i.emotionNormal=i.assetUrl("emotion-nothing.png"),i.emotionSad=i.assetUrl("emotion-sad.png"),i.emotionHappy=i.assetUrl("emotion-happy.png"),i.speechBubble=i.assetUrl("say-sprite.png"),i.goal=i.assetUrl("goal.png"),i.goalSuccess=i.assetUrl("goal_success.png"),i.builtinSounds=["start","win","failure","flag"],i.sounds=["rubber","crunch","goal1","goal2","wood","retro","slap","hit","winpoint","winpoint2","losepoint","losepoint2"],i.soundChoices=[[d.default.playSoundRandom(),s.RANDOM_VALUE],[d.default.playSoundHit(),"hit"],[d.default.playSoundWood(),"wood"],[d.default.playSoundRetro(),"retro"],[d.default.playSoundSlap(),"slap"],[d.default.playSoundRubber(),"rubber"],[d.default.playSoundCrunch(),"crunch"],[d.default.playSoundWinPoint(),"winpoint"],[d.default.playSoundWinPoint2(),"winpoint2"],[d.default.playSoundLosePoint(),"losepoint"],[d.default.playSoundLosePoint2(),"losepoint2"],[d.default.playSoundGoal1(),"goal1"],[d.default.playSoundGoal2(),"goal2"]],i.soundChoicesK1=[[d.default.soundRandom(),s.RANDOM_VALUE],[d.default.soundHit(),"hit"],[d.default.soundWood(),"wood"],[d.default.soundRetro(),"retro"],[d.default.soundSlap(),"slap"],[d.default.soundRubber(),"rubber"],[d.default.soundCrunch(),"crunch"],[d.default.soundWinPoint(),"winpoint"],[d.default.soundWinPoint2(),"winpoint2"],[d.default.soundLosePoint(),"losepoint"],[d.default.soundLosePoint2(),"losepoint2"],[d.default.soundGoal1(),"goal1"],[d.default.soundGoal2(),"goal2"]],i.background=i.assetUrl("background.png"),i.spriteHeight=100,i.spriteWidth=100,i.dropdownThumbnailWidth=50,i.dropdownThumbnailHeight=50,i.preloadAssets=!0,i.wallCollisionRectOffsetX=0,i.wallCollisionRectOffsetY=0,i.setSpritePrefix=d.default.setSprite(),i.activityChoices=[[d.default.setActivityRandom(),s.RANDOM_VALUE],[d.default.setActivityRoam(),'"roam"'],[d.default.setActivityChase(),'"chase"'],[d.default.setActivityFlee(),'"flee"'],[d.default.setActivityNone(),'"none"']],i.id){case"gumball":n(i);break;case"iceage":a(i);break;case"infinity":r(i);break;case"hoc2015":(0,f.loadStarWarsEvents)(i),i.twitterOptions=g;break;case"hoc2015x":(0,f.loadStarWarsGrid)(i);break;case"studio":l(i)}return i}},2945:function(e,t,i){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function r(){return Ct.customObstacleZones?new me.default(Et,Ct,kt.drawDebugRect):Ct.wallMaps?new K.default(Et,Ct,kt.drawDebugRect,kt.drawDebugOverlay,kt.MAZE_WIDTH,kt.MAZE_HEIGHT):new De.default(Et,Ct,kt.drawDebugRect,kt.SQUARE_SIZE,kt.ROWS,kt.COLS,kt.getWallValue)}function l(e,t){return t=t||0,q.default.flattenDeep([e.slice(t),e.slice(0,t)])}function s(e,t,i,o,n,a){return Math.abs(e-t)<=i&&Math.abs(o-n)<=a}function u(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(Et.autoArrowSteer){var o;switch(e){case"when-up":o=ht.NORTH;break;case"when-down":o=ht.SOUTH;break;case"when-left":o=ht.WEST;break;case"when-right":o=ht.EAST}o&&kt.queueCmd(null,"move",{spriteIndex:kt.protagonistSpriteIndex||0,dir:o})}kt.eventHandlers.forEach(function(o){if((0,Je.singleton)().isUsingBlockly()){if(o.name===e&&(t||0===o.cmdQueue.length)){kt.currentCmdQueue=o.cmdQueue;try{kt.legacyRuntime?o.func.apply(o,[Oe.default,kt.Globals].concat(a(i))):o.func.apply(o,a(i))}catch(e){console.error(e)}kt.currentCmdQueue=null}}else o.name===e&&o.func.apply(null,i)})}function d(e){for(var t=e.length-1;t>=0;t--)e[t].moveToNextPosition(),e[t].outOfBounds()&&(e[t].removeElement(),e.splice(t,1))}function c(e){for(var t=e.length-1;t>=0;t--)e[t].display()}function p(){if(Ct.sortDrawOrder){for(var e,t=document.getElementById("spriteLayer"),i=[],o=0;o<kt.items.length;o++)e={element:kt.items[o].getElement(),y:kt.items[o].y+kt.items[o].height/2+kt.items[o].renderOffset.y},i.push(e),kt.drawDebugRect("itemLocation",kt.items[o].x,kt.items[o].y,4,4),kt.drawDebugRect("itemBottom",kt.items[o].x,e.y,4,4);for(o=0;o<kt.sprite.length;o++){var n=kt.sprite[o],a=n.displayY+n.height;e={element:document.getElementById("explosion"+o),y:a},e.element&&i.push(e),e={element:n.getElement(),y:a},e.element&&i.push(e),e={element:n.getLegacyElement(),y:a},e.element&&i.push(e),kt.drawDebugRect("spriteBottom",kt.sprite[o].x,n.y,4,4)}for(o=0;o<kt.tiles.length;o++)i.push({element:document.getElementById("tile_"+o),y:kt.tiles[o].bottomY});var r=Ct.goalCollisionRectHeight||kt.MARKER_HEIGHT;kt.allGoals_().forEach(function(e){i.push({element:e.marker,y:e.y+r})}),i=q.default.sortBy(i,"y");var l;for(o=i.length-1;o>=0;o--)l?t.insertBefore(i[o].element,l):t.appendChild(i[o].element),l=i[o].element}}function m(e,t,i){var o=Ct.spriteCollisionRectWidth||kt.sprite[e].width,n=Ct.spriteCollisionRectHeight||kt.sprite[e].height,a=Ct.spriteCollisionRectWidth||kt.sprite[t].width,r=Ct.spriteCollisionRectHeight||kt.sprite[t].height,l=i?n:o,s=i?r:a;return L.SPRITE_COLLIDE_DISTANCE_SCALING*(l+s)/2}function h(e,t,i){var o=Ct.spriteCollisionRectWidth||kt.sprite[e].width,n=Ct.spriteCollisionRectHeight||kt.sprite[e].height,a=Ct.itemCollisionRectWidth||t.width,r=Ct.itemCollisionRectHeight||t.height,l=i?n:o,s=i?r:a;return L.SPRITE_COLLIDE_DISTANCE_SCALING*(l+s)/2}function f(e,t,i){var o,n=i?e.height:e.width;return o="left"===t||"right"===t?i?kt.MAZE_HEIGHT:0:i?0:kt.MAZE_WIDTH,(n+o)/2}function g(e,t,i,o,n){for(var a,r,l,d=L.SPRITE_COLLIDE_DISTANCE_SCALING,c=o.filter(function(e){return!(e.isFading&&e.isFading())}),p=c.length-1;p>=0;p--)a=c[p],r=a.getNextPosition(),kt.drawDebugRect("itemCollision",r.x,r.y,d*(Ct.itemCollisionRectWidth||a.width),d*(Ct.itemCollisionRectHeight||a.height)),kt.drawDebugRect("spriteCollision",t,i,d*(Ct.spriteCollisionRectWidth||kt.sprite[e].width),d*(Ct.spriteCollisionRectHeight||kt.sprite[e].height)),s(t,r.x,h(e,a,!1),i,r.y,h(e,a,!0))?a.startCollision(e)&&(kt.currentEventParams={eventObject:a},P(e,a.className,!0),kt.currentEventParams=null,n&&(o===kt.items&&(1===c.length&&(u("whenGetAllItems"),kt.trackedBehavior.gotAllItems=!0),l=a.className,1===c.reduce(function(e,t){return e+(l===t.className?1:0)},0)&&u("whenGetAll-"+l)),a.beginRemoveElement?a.beginRemoveElement():(a.removeElement(),o.splice(o.indexOf(a),1)),c.splice(p,1))):a.endCollision(e)}function _(e,t,i,o){for(var n=0;n<xt.length&&!kt.allowSpritesOutsidePlayspace;n++){var a,r,l=xt[n];switch(l){case"top":a=kt.MAZE_WIDTH/2,r=0;break;case"left":a=0,r=kt.MAZE_HEIGHT/2;break;case"bottom":a=kt.MAZE_WIDTH/2,r=kt.MAZE_HEIGHT;break;case"right":a=kt.MAZE_WIDTH,r=kt.MAZE_HEIGHT/2}s(t,a,f(e,l,!1),i,r,f(e,l,!0))?e.startCollision(l)&&o(l):e.endCollision(l)}}function b(e){return function(t){P(e,t)}}function S(){k();for(var e=0;e<kt.spriteCount;e++){for(var t=kt.sprite[e],i=t.width/2,o=t.height/2,n=Ft(e,!1),a=n.x+i,r=n.y+o,l=0;l<kt.spriteCount;l++)if(e!==l&&t.visible&&kt.sprite[l].visible){var u=Ft(l,!1),d=u.x+kt.sprite[l].width/2,c=u.y+kt.sprite[l].height/2;s(a,d,m(e,l,!1),r,c,m(e,l,!0))?kt.collideSpriteWith(e,l):t.endCollision(l),M(e,l)}else M(e,l);for(t.visible&&(g(e,a,r,kt.projectiles),g(e,a,r,kt.items,Et.removeItemsWhenActorCollides),_(t,a,r,b(e)),kt.wallMapCollisions&&(kt.willSpriteTouchWall(t,n.x,n.y)?(jt(e,!1),jt(e,!0),kt.throttledCollideSpriteWithWallFunctions[e]()):t.endCollision("wall"))),M(e,"wall"),l=0;l<xt.length;l++)M(e,xt[l]);for(l=0;l<Ct.ProjectileClassNames.length;l++)M(e,Ct.ProjectileClassNames[l]);for(l=0;l<Ct.ItemClassNames.length;l++)M(e,Ct.ItemClassNames[l]),Et.removeItemsWhenActorCollides&&kt.executeQueue("whenGetAll-"+Ct.ItemClassNames[l]);Et.removeItemsWhenActorCollides&&kt.executeQueue("whenGetAllItems")}}function y(e){return function(t){kt.currentEventParams={eventObject:e},O(e.className,t,!0),kt.currentEventParams=null}}function v(){for(var e=kt.items.length-1;e>=0;e--){var t=kt.items[e];t.update(),t.hasCompletedFade()&&(t.removeElement(),kt.items.splice(e,1))}kt.sprite.forEach(function(e){e.update()})}function k(){for(var e=0;e<kt.items.length;e++){var t=kt.items[e],i=t.getNextPosition();if(!t.isFading||!t.isFading()){kt.wallMapCollisions&&(kt.walls.willCollidableTouchWall(t,i.x,i.y)?(kt.currentEventParams={eventObject:t},kt.collideItemWith(t,"wall",!0),kt.currentEventParams=null):t.endCollision("wall")),kt.allowSpritesOutsidePlayspace||_(t,i.x,i.y,y(t)),N(t.className,"wall");for(var o=0;o<xt.length;o++)N(t.className,xt[o])}}}function w(e){for(var t=0;t<e.length;t++)e[t].removeElement();e.length=0}function A(){return Et.coordinateGridBackground?"grid":Et.background||Ct.defaultBackground}function x(){return kt.wallMapCollisions?Et.wallMap:void 0}function E(e,t,i){(0,$e.outputError)(i,t),kt.executionError={err:e,lineNumber:t},e instanceof SyntaxError?(kt.preExecutionFailure=!0,kt.testResults=pt.TestResults.SYNTAX_ERROR_FAIL,kt.onPuzzleComplete()):Et.freePlay||kt.onPuzzleComplete()}function C(e,t,i){return/.gif$/.test(Ct[e])?1:t&&t[e]&&t[e].frames?t[e].frames:i}function T(e){return/^\d*$/.test(e)}function I(e){return-1!==xt.indexOf(e)}function R(e){return-1!==Ct.ProjectileClassNames.indexOf(e)}function D(e){return-1!==Ct.ItemClassNames.indexOf(e)}function P(e,t,i){var o="whenSpriteCollided-"+e+"-";u(o+t,i),u(o+"anything",i),T(t)?(u(o+"any_actor",i),u(o+kt.sprite[t].imageName,!1,[t])):I(t)?u(o+"any_edge",i):R(t)?u(o+"any_projectile",i):D(t)&&u(o+"any_item",i)}function O(e,t,i){var o="whenItemCollided-"+e+"-";u(o+t,i),I(t)&&u(o+"any_edge",i)}function N(e,t){var i="whenItemCollided-"+e+"-";kt.executeQueue(i+t),I(t)&&kt.executeQueue(i+"any_edge")}function M(e,t){var i="whenSpriteCollided-"+e+"-";kt.executeQueue(i+t),T(t)&&kt.executeQueue(i+kt.sprite[t].imageName),kt.executeQueue(i+"any_actor"),kt.executeQueue(i+"anything"),kt.executeQueue(i+"goal"),I(t)?kt.executeQueue(i+"any_edge"):R(t)?kt.executeQueue(i+"any_projectile"):D(t)&&kt.executeQueue(i+"any_item")}function B(e){return kt.sprite.filter(function(t){return t.imageName===e&&t.visible})}function U(e,t){var i=W.valueOr(Ct.goalSpriteWidth,kt.MARKER_WIDTH),o=W.valueOr(Ct.goalSpriteHeight,kt.MARKER_HEIGHT),n=Ct.goalCollisionRectWidth||kt.MARKER_WIDTH,a=Ct.goalCollisionRectHeight||kt.MARKER_HEIGHT,r=Ct.itemCollisionRectWidth||e.width,l=Ct.itemCollisionRectHeight||e.height,u=e.x+e.width/2,d=e.y+e.height/2,c=t.x+i/2+W.valueOr(Ct.goalRenderOffsetX,0),p=t.y+o/2+W.valueOr(Ct.goalRenderOffsetY,0),m=W.valueOr(Ct.finishCollideDistanceScaling,L.FINISH_COLLIDE_DISTANCE_SCALING);kt.drawDebugRect("goalCollisionSprite",u,d,m*r,m*l),kt.drawDebugRect("goalCollisionGoal",c,p,m*n,m*a);var h=function(e){return m*((e?l:r)+(e?a:n))/2};return s(u,c,h(!1),d,p,h(!0))}var j=i(35),F=n(j),G=i(789),L=o(G),H=i(71),W=o(H),V=i(82),q=n(V),X=i(944),Y=n(X),z=i(3305),Z=n(z),Q=i(3306),K=n(Q),J=i(2879),$=n(J),ee=i(3307),te=n(ee),ie=i(3309),oe=n(ie),ne=i(2947),ae=n(ne),re=i(1291),le=n(re),se=i(1731),ue=n(se),de=i(1954),ce=n(de),pe=i(3310),me=n(pe),he=i(3311),fe=n(he),ge=i(1),_e=n(ge),be=i(32),Se=n(be),ye=i(3312),ve=n(ye),ke=i(3313),we=n(ke),Ae=i(3314),xe=n(Ae),Ee=i(3315),Ce=n(Ee),Te=i(3316),Ie=n(Te),Re=i(3317),De=n(Re),Pe=i(2946),Oe=n(Pe),Ne=i(2798),Me=n(Ne),Be=i(850),Ue=n(Be),je=i(40),Fe=n(je),Ge=i(594),Le=n(Ge),He=i(3318),We=n(He),Ve=i(2799),qe=n(Ve),Xe=i(2080),Ye=n(Xe),ze=i(1706),Ze=n(ze),Qe=i(2949),Ke=i(53),Je=i(597),$e=i(849),et=i(1734),tt=n(et),it=i(1005),ot=i(237),nt=i(764),at=n(nt),rt=i(1158),lt=i(745),st=n(lt),ut=i(743),dt=i(845),ct=i(1735);i(1724);var pt=i(216),mt=i(498),ht=L.Direction,ft=L.CardinalDirections,gt=L.NextTurn,_t=L.SquareType,bt=L.Emotions,St=L.turnRight90,yt=L.turnLeft90,vt=!1,kt=e.exports;kt.keyState={},kt.gesturesObserved={},kt.btnState={};var wt={UP:0,DOWN:1},At={LEFT:"leftButton",UP:"upButton",RIGHT:"rightButton",DOWN:"downButton"};kt.GameStates={WAITING:0,ACTIVE:1,OVER:2};var xt=["top","left","bottom","right"],Et=void 0,Ct=void 0,Tt=["gumball","studio","iceage","infinity","hoc2015"];(0,Je.singleton)().setCheckForEmptyBlocks(!0);var It={whenRun:"whenGameStarts",whenDown:"when-down",whenUp:"when-up",whenLeft:"when-left",whenRight:"when-right",whenGetCharacter:"whenSpriteCollided-"+(kt.protagonistSpriteIndex||0)+"-any_item",whenTouchCharacter:"whenSpriteCollided-"+(kt.protagonistSpriteIndex||0)+"-any_item",whenTouchObstacle:"whenSpriteCollided-"+(kt.protagonistSpriteIndex||0)+"-wall",whenGetAllCharacters:"whenGetAllItems",whenTouchGoal:"whenTouchGoal",whenTouchAllGoals:"whenTouchAllGoals",whenScore1000:"whenScore1000"};kt.scale={snapRadius:1,stepSpeed:33};var Rt={text:Ze.default.shareStudioTwitterDonor({donor:(0,ct.getRandomDonorTwitter)()}),hashtag:"StudioCode"},Dt=null,Pt=[[16,0,0,16,0,0,16,0],[0,0,0,0,0,0,0,0],[16,0,0,16,0,0,16,0],[0,0,0,0,0,0,0,0],[16,0,0,16,0,0,16,0],[0,0,0,0,0,0,0,0],[16,0,0,16,0,0,16,0],[0,0,0,0,0,0,0,0]],Ot=[{defaultValues:{map:Pt,firstSpriteIndex:1,spritesHiddenToStart:!0},generateBlocks:function(e){for(var t=[],i=1,o=0;o<kt.ROWS;o++)for(var n=0;n<kt.COLS;n++){var a=kt.map[o][n].serialize();if(a.tileType&L.SquareType.SPRITESTART){var r=function(){return{x:(i-1)%3*3,y:2*parseInt((i-1)/3)}}();1===Et.firstSpriteIndex&&!a.sprite||Et.spritesHiddenToStart||t.push((0,ut.blockAsXmlNode)("studio_setSpriteParams",{titles:{VALUE:'"'+kt.startAvatars[a.sprite?a.sprite:i+(Et.firstSpriteIndex||0)]+'"'},values:{SPRITE:{type:"math_number",titleName:"NUM",titleValue:i}}})),n===r.x&&o===r.y||t.push((0,ut.blockAsXmlNode)("studio_setSpriteXY",{values:{SPRITE:{type:"math_number",titleName:"NUM",titleValue:i},XPOS:{type:"math_number",titleName:"NUM",titleValue:n*kt.SQUARE_SIZE+kt.sprite[i-1].width/2},YPOS:{type:"math_number",titleName:"NUM",titleValue:o*kt.SQUARE_SIZE+kt.sprite[i-1].height/2}}})),void 0!==a.speed&&a.speed!==L.DEFAULT_SPRITE_SPEED&&t.push((0,ut.blockAsXmlNode)("studio_setSpriteSpeedParams",{values:{SPRITE:{type:"math_number",titleName:"NUM",titleValue:i},VALUE:{type:"math_number",titleName:"NUM",titleValue:a.speed}}})),void 0!==a.size&&a.size!==L.DEFAULT_SPRITE_SIZE&&t.push((0,ut.blockAsXmlNode)("studio_setSpriteSizeParams",{values:{SPRITE:{type:"math_number",titleName:"NUM",titleValue:i},VALUE:{type:"math_number",titleName:"NUM",titleValue:a.size}}})),a.emotion&&a.emotion!==bt.NORMAL&&t.push((0,ut.blockAsXmlNode)("studio_setSpriteEmotion",{titles:{SPRITE:i,VALUE:a.emotion}})),i++}a.tileType&L.SquareType.SPRITEFINISH&&t.push((0,ut.blockAsXmlNode)("sudio_addGoalXY",{values:{XPOS:{type:"math_number",titleName:"NUM",titleValue:n*kt.SQUARE_SIZE},YPOS:{type:"math_number",titleName:"NUM",titleValue:o*kt.SQUARE_SIZE}}}))}return t}},{defaultValues:{allowSpritesOutsidePlayspace:!1},generateBlocks:function(e){return[(0,ut.blockAsXmlNode)("studio_allowSpritesOutsidePlayspace",{titles:{VALUE:"true"}})]}}];kt.loadLevel=function(){switch(kt.map=Et.map.map(function(e){return e.map(function(e){var t=isNaN(parseInt(e))?Ye.default.deserialize(e):new Ye.default(e);return t.tileType_&L.WallCoordsMask&&(kt.wallMapCollisions=!0),t})}),kt.wallMap=null,kt.wallMapRequested=null,kt.allowSpritesOutsidePlayspace=Et.allowSpritesOutsidePlayspace,kt.timeoutFailureTick=Et.timeoutFailureTick||1/0,kt.slowExecutionFactor=Ct.slowExecutionFactor||1,kt.gridAlignedExtraPauseSteps=Ct.gridAlignedExtraPauseSteps||0,kt.ticksBeforeFaceSouth=kt.slowExecutionFactor+W.valueOr(Et.ticksBeforeFaceSouth,L.IDLE_TICKS_BEFORE_FACE_SOUTH),kt.minWorkspaceHeight=Et.minWorkspaceHeight,kt.softButtons_=Et.softButtons||{},kt.protagonistSpriteIndex=W.valueOr(Et.protagonistSpriteIndex,Et.protaganistSpriteIndex),Et.customGameType){case"Big Game":kt.customLogic=new Z.default(kt);break;case"Rocket Height":kt.customLogic=new ve.default(kt);break;case"Sam the Bat":kt.customLogic=new we.default(kt);break;case"Ninja Cat":kt.customLogic=new Z.default(kt,{staticPlayer:!0})}Me.default.registerCustomGameLogic(kt.customLogic),kt.legacyRuntime=!!kt.customLogic,Et.avatarList?kt.startAvatars=Et.avatarList.slice():kt.startAvatars=l(Ct.avatarList,Et.firstSpriteIndex);for(var e in Et.scale)kt.scale[e]=Et.scale[e];kt.ROWS=kt.map.length,kt.COLS=kt.map[0].length,kt.SQUARE_SIZE=50,kt.HALF_SQUARE=kt.SQUARE_SIZE/2,kt.MARKER_HEIGHT=Et.markerHeight||100,kt.MARKER_WIDTH=Et.markerWidth||100,kt.MAZE_WIDTH=kt.SQUARE_SIZE*kt.COLS,kt.MAZE_HEIGHT=kt.SQUARE_SIZE*kt.ROWS,(0,Je.singleton)().MAZE_WIDTH=kt.MAZE_WIDTH,(0,Je.singleton)().MAZE_HEIGHT=kt.MAZE_HEIGHT,kt.walls=r()};var Nt=function(){var e,t=document.getElementById("svgStudio");t.setAttribute("width",kt.MAZE_WIDTH),t.setAttribute("height",kt.MAZE_HEIGHT);var i=new $.default(t);i.on("tap",kt.onSvgClicked),i.on("drag",kt.onSvgDrag),document.getElementById("visualizationColumn").style.width=kt.MAZE_WIDTH+"px";var o=document.createElementNS(pt.SVG_NS,"g");if(o.setAttribute("id","backgroundLayer"),t.appendChild(o),kt.background&&Ct[kt.background].background){var n=document.createElementNS(pt.SVG_NS,"image");n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Ct[kt.background].background),n.setAttribute("id","background"),n.setAttribute("height",kt.MAZE_HEIGHT),n.setAttribute("width",kt.MAZE_WIDTH),n.setAttribute("x",0),n.setAttribute("y",0),o.appendChild(n)}Et.coordinateGridBackground&&(0,Je.singleton)().createCoordinateGridBackground({svg:"backgroundLayer",origin:0,firstLabel:100,lastLabel:300,increment:100});var a=document.createElementNS(pt.SVG_NS,"g");if(a.setAttribute("id","spriteLayer"),t.appendChild(a),kt.wallMapCollisions&&kt.drawMapTiles(),kt.spriteStart_)for(e=0;e<kt.spriteCount;e++){var r=document.createElementNS(pt.SVG_NS,"g");r.setAttribute("id","speechBubble"+e),r.setAttribute("visibility","hidden");var l=document.createElementNS(pt.SVG_NS,"path");l.setAttribute("id","speechBubblePath"+e),l.setAttribute("class","studio-speech-bubble-path");var s=document.createElementNS(pt.SVG_NS,"text");s.setAttribute("id","speechBubbleText"+e),s.setAttribute("class","studio-speech-bubble"),r.appendChild(l),r.appendChild(s),t.appendChild(r)}if(kt.spriteGoals_)for(e=0;e<kt.spriteGoals_.length;e++)kt.createGoalElements(e,kt.spriteGoals_[e]);kt.applyGoalEffect();var u=document.createElementNS(pt.SVG_NS,"g");for(u.setAttribute("id","cloudLayer"),e=0;e<L.MAX_NUM_CLOUDS;e++){var d=document.createElementNS(pt.SVG_NS,"image");d.setAttribute("id","cloud"+e),u.appendChild(d)}t.appendChild(u);var c=document.createElementNS(pt.SVG_NS,"g");c.setAttribute("id","gameTextGroup"),t.appendChild(c);var p=document.createElementNS(pt.SVG_NS,"g");p.setAttribute("id","overlayGroup"),t.appendChild(p);var m=document.createElementNS(pt.SVG_NS,"text");m.setAttribute("id","score"),m.setAttribute("class","studio-score"),m.setAttribute("x",kt.MAZE_WIDTH/2),m.setAttribute("y",30),m.appendChild(document.createTextNode("")),m.setAttribute("visibility","hidden"),c.appendChild(m);var h=document.createElementNS(pt.SVG_NS,"text");if(h.setAttribute("id","victoryText"),h.setAttribute("class","studio-victory-text"),h.setAttribute("x",kt.MAZE_WIDTH/2),h.setAttribute("y",130),h.appendChild(document.createTextNode("")),h.setAttribute("visibility","hidden"),c.appendChild(h),Le.default.isMobile()||Le.default.isWindowsTouch()){var f=document.createElementNS(pt.SVG_NS,"rect");f.setAttribute("width",kt.MAZE_WIDTH),f.setAttribute("height",kt.MAZE_HEIGHT),f.setAttribute("fill","black"),f.setAttribute("opacity",.3),p.appendChild(f);var g=document.createElementNS(pt.SVG_NS,"text");g.setAttribute("id","resetTextA"),g.setAttribute("class","studio-reset-text"),g.setAttribute("x",kt.MAZE_WIDTH/2),g.setAttribute("y",350),g.appendChild(document.createTextNode(Ze.default.tapToPlay())),g.setAttribute("visibility","visible"),p.appendChild(g);var _=document.createElementNS(pt.SVG_NS,"text");_.setAttribute("id","resetTextB"),_.setAttribute("class","studio-reset-text"),_.setAttribute("x",kt.MAZE_WIDTH/2),_.setAttribute("y",380),_.appendChild(document.createTextNode(Ze.default.swipeToMove())),_.setAttribute("visibility","visible"),p.appendChild(_);var b=document.createElementNS(pt.SVG_NS,"image");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",(0,Je.singleton)().assetUrl("media/common_images/touch-drag.png"));b.setAttribute("width",300),b.setAttribute("height",300),b.setAttribute("x",(kt.MAZE_WIDTH-300)/2),b.setAttribute("y",(kt.MAZE_HEIGHT-300)/2-25),p.appendChild(b)}else{var S=document.createElementNS(pt.SVG_NS,"text");S.setAttribute("id","resetText"),S.setAttribute("class","studio-reset-text"),S.setAttribute("x",kt.MAZE_WIDTH/2),S.setAttribute("y",380),S.appendChild(document.createTextNode(Ze.default.tapOrClickToReset())),S.setAttribute("visibility","visible"),p.appendChild(S)}if(Et.floatingScore){var y=document.createElementNS(pt.SVG_NS,"text");y.setAttribute("id","floatingScore"),y.setAttribute("class","studio-floating-score"),y.setAttribute("x",kt.MAZE_WIDTH/2),y.setAttribute("y",30),y.appendChild(document.createTextNode("")),y.setAttribute("visibility","hidden"),t.appendChild(y)}var v=document.createElementNS(pt.SVG_NS,"text");v.setAttribute("id","titleScreenTitle"),v.setAttribute("class","studio-ts-title"),v.setAttribute("x",kt.MAZE_WIDTH/2),v.setAttribute("y",60),v.appendChild(document.createTextNode("")),v.setAttribute("visibility","hidden"),t.appendChild(v);var k=document.createElementNS(pt.SVG_NS,"g"),w=(kt.MAZE_WIDTH-360)/2;k.setAttribute("id","titleScreenTextGroup"),k.setAttribute("x",w),k.setAttribute("y",100),k.setAttribute("transform","translate("+w+",100)"),k.setAttribute("visibility","hidden");var A=document.createElementNS(pt.SVG_NS,"rect");A.setAttribute("id","titleScreenTextRect"),A.setAttribute("x",0),A.setAttribute("y",0),A.setAttribute("width",360),A.setAttribute("class","studio-ts-text-rect");var x=document.createElementNS(pt.SVG_NS,"text");x.setAttribute("id","titleScreenText"),x.setAttribute("class","studio-ts-text"),x.setAttribute("x",180),x.setAttribute("y",0),x.appendChild(document.createTextNode("")),k.appendChild(A),k.appendChild(x),t.appendChild(k)};kt.allGoals_=function(){return kt.spriteGoals_.concat(kt.dynamicSpriteGoals_)},kt.createGoalElements=function(e,t){var i=document.getElementById("svgStudio"),o=document.getElementById("backgroundLayer"),n=W.valueOr(Et.goalOverride,{}),a=1;n.goalAnimation&&Ct.animatedGoalFrames&&(a=Ct.animatedGoalFrames);var r=Ct.goalSpriteWidth?Ct.goalSpriteWidth*a:W.valueOr(n.imageWidth,kt.MARKER_WIDTH),l=Ct.goalSpriteHeight?Ct.goalSpriteHeight:W.valueOr(n.imageHeight,kt.MARKER_HEIGHT),s=W.valueOr(Ct.goalSpriteWidth,kt.MARKER_WIDTH),u=W.valueOr(Ct.goalSpriteHeight,kt.MARKER_HEIGHT),d=W.valueOr(n.goalRenderOffsetX,W.valueOr(Ct.goalRenderOffsetX,0)),c=W.valueOr(n.goalRenderOffsetY,W.valueOr(Ct.goalRenderOffsetY,0));t.clipPath=document.createElementNS(pt.SVG_NS,"clipPath"),t.clipPath.setAttribute("id","finishClipPath"+e),t.clipRect=document.createElementNS(pt.SVG_NS,"rect"),t.clipRect.setAttribute("id","finishClipRect"+e),t.clipRect.setAttribute("width",s),t.clipRect.setAttribute("height",u),t.clipPath.appendChild(t.clipRect),o.appendChild(t.clipPath),t.marker=document.createElementNS(pt.SVG_NS,"image"),t.marker.setAttribute("id","spriteFinish"+e),t.marker.setAttribute("width",r),t.marker.setAttribute("height",l),Ct.disableClipRectOnGoals||t.marker.setAttribute("clip-path","url(#"+t.clipPath.id+")"),t.marker.setAttribute("x",t.x+d),t.marker.setAttribute("y",t.y+c),t.marker.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",kt.getGoalAssetFromSkin()),t.marker.setAttribute("opacity",1),t.clipRect.setAttribute("x",t.x+d),t.clipRect.setAttribute("y",t.y+c),i.appendChild(t.marker)};var Mt=null;kt.applyGoalEffect=function(){if(!Mt){var e=document.getElementById("svgStudio");Mt=new te.default(e)}Mt&&kt.allGoals_().forEach(function(e){Mt.applyTo(e.marker)})},kt.removeGoalEffect=function(){Mt&&kt.allGoals_().forEach(function(e){Mt.removeFrom(e.marker)})};var Bt=function(e,t,i){return function(){var o=Array.prototype.slice.apply(arguments).concat(i);t.apply(e,o)}},Ut=function(e,t){var i={x:0,y:0};return kt.eventHandlers.forEach(function(o){var n=o.cmdQueue[0];if(n&&"moveDistance"===n.name&&n.opts.spriteIndex===e){var a=Math.min(n.opts.queuedDistance||1/0,kt.sprite[n.opts.spriteIndex].speed),r=W.normalize(ht.getUnitVector(n.opts.dir));i.x+=a*r.x,i.y+=a*r.y,!t||0===r.x&&0===r.y||(n.opts.queuedDistance-=a,"0.00"===Math.abs(n.opts.queuedDistance).toFixed(2)&&o.cmdQueue.shift())}}),i},jt=function(e,t){kt.eventHandlers.forEach(function(i){var o=i.cmdQueue[0];if(o&&"moveDistance"===o.name&&o.opts.spriteIndex===e){var n=o.opts.dir;(!t||n!==ht.NORTH&&n!==ht.SOUTH)&&(t||n!==ht.EAST&&n!==ht.WEST)?ft.includes(n)||(o.opts.queuedDistance=0):o.opts.queuedDistance=0}})},Ft=function(e,t){var i=Ut(e,t);return 0===i.x&&0===i.y?kt.sprite[e].getNextPosition():{x:kt.sprite[e].x+i.x,y:kt.sprite[e].y+i.y}},Gt=function(e){var t,i,o=kt.sprite[e],n=o.x,a=o.y,r=Ft(e,!0);if(kt.allowSpritesOutsidePlayspace)t=r.x,i=r.y;else{var l=kt.getPlayspaceBoundaries(o);t=Math.min(l.right,Math.max(l.left,r.x)),r.x!==t&&jt(e,!1),i=Math.min(l.bottom,Math.max(l.top,r.y)),r.y!==i&&jt(e,!0)}!kt.wallMapCollisions||t===n&&i===a||kt.willSpriteTouchWall(o,t,i)&&(kt.willSpriteTouchWall(o,t,a)?kt.willSpriteTouchWall(o,n,i)?(t=n,i=a,jt(e,!1),jt(e,!0)):(t=n,jt(e,!1)):(i=a,jt(e,!0))),o.x=t,o.y=i,n===o.x&&a===o.y||(o.lastMove=kt.tickCount)},Lt=kt.setSvgText=function(e){for(var t=e.width,i=e.text.toString().split(" "),o=!1;t<=e.maxWidth;){for(;e.svgText.firstChild;)e.svgText.removeChild(e.svgText.firstChild);for(var n=0,a=1;a<=e.maxLines;a++){var r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttribute("x",t/2),r.setAttribute("dy",e.lineHeight+(1===a?e.topMargin:0));var l=document.createTextNode(i[n]);if(n++,r.appendChild(l),e.svgText.appendChild(r),r.getComputedTextLength&&r.getComputedTextLength()>t-2*e.sideMargin&&t<e.maxWidth){t=Math.min(r.getComputedTextLength()+2*e.sideMargin,e.maxWidth),o=!0;break}var s;do{if(n===i.length)return{height:e.fullHeight-(e.maxLines-a)*e.lineHeight,width:t};s=r.firstChild.data.length,r.firstChild.data+=" "+i[n],n++}while(r.getComputedTextLength&&r.getComputedTextLength()<=t-2*e.sideMargin);r.firstChild.data=r.firstChild.data.slice(0,s),n--}if(o)o=!1;else{if(!(t<e.maxWidth))return{height:e.fullHeight,width:t};t=Math.min(t*i.length/n,e.maxWidth)}}};kt.initAutoHandlers=function(e){for(var t in e){var i=kt.JSInterpreter.findGlobalFunction(t),o=Ue.default.createNativeFunctionFromInterpreterFunction(i);i&&Xt(kt.eventHandlers,e[t],o)}},kt.callApiCode=function(e,t){Xt(kt.eventHandlers,e,t),u(e),kt.executeQueue(e)},kt.onTick=function(){kt.tickCount++;var e;kt.clearDebugElements(),kt.tickCount===L.CAPTURE_TICK_COUNT&&(0,rt.captureThumbnailFromSvg)(document.getElementById("svgStudio"));var t=kt.pauseInterpreter||0!=(kt.tickCount-1)%kt.slowExecutionFactor;if(!t&&kt.yieldExecutionTicks>0&&kt.yieldExecutionTicks--,kt.customLogic&&kt.customLogic.onTick(),1===kt.tickCount&&u("whenGameStarts"),!t){for(kt.executeQueue("whenGameStarts"),u("repeatForever"),kt.executeQueue("repeatForever"),e=0;e<kt.spriteCount;e++)kt.executeQueue("whenSpriteClicked-"+e);for(var i in pt.KeyCodes)if(kt.keyState[pt.KeyCodes[i]]&&"keydown"===kt.keyState[pt.KeyCodes[i]])switch(pt.KeyCodes[i]){case pt.KeyCodes.LEFT:u("when-left");break;case pt.KeyCodes.UP:u("when-up");break;case pt.KeyCodes.RIGHT:u("when-right");break;case pt.KeyCodes.DOWN:u("when-down")}for(var o in At)if(kt.btnState[At[o]]&&kt.btnState[At[o]]===wt.DOWN)switch(At[o]){case At.LEFT:u("when-left");break;case At.UP:u("when-up");break;case At.RIGHT:u("when-right");break;case At.DOWN:u("when-down")}for(var n in kt.gesturesObserved){switch(n){case"left":u("when-left");break;case"up":u("when-up");break;case"right":u("when-right");break;case"down":u("when-down")}0==kt.gesturesObserved[n]--&&delete kt.gesturesObserved[n]}kt.executeQueue("when-left"),kt.executeQueue("when-up"),kt.executeQueue("when-right"),kt.executeQueue("when-down");for(var a=0;a<kt.callbackQueueIndex;a++)kt.executeQueue("callbackQueue"+a);v(),S()}kt.JSInterpreter&&!t&&0===kt.yieldExecutionTicks&&kt.JSInterpreter.executeInterpreter(1===kt.tickCount);var r=!1;for(e=0;e<kt.spriteCount;e++){t||Gt(e);var l=kt.sprite[e];l.shouldFaceSouthOnIdle()&&kt.tickCount-l.lastMove>kt.ticksBeforeFaceSouth&&(l.setDirection(ht.NONE),kt.movementAudioOff()),kt.displaySprite(e),l.hasActions()&&(r=!0),kt.drawDebugRect("spriteCenter",kt.sprite[e].x,kt.sprite[e].y,5,5)}kt.animateGoals(),kt.animateClouds(),t||(d(kt.projectiles),d(kt.items)),c(kt.sprite),c(kt.projectiles),c(kt.items),kt.updateFloatingScore(),kt.drawTimeoutRect(),p();var s=(new Date).getTime();!kt.succeededTime&&si()&&(kt.succeededTime=s),t||kt.executeQueue("whenTouchGoal"),kt.succeededTime&&!r&&(!Et.delayCompletion||s>kt.succeededTime+Et.delayCompletion)&&kt.onPuzzleComplete(),kt.allGoalsVisited()&&(kt.trackedBehavior.allGoalsVisited=!0),kt.timedOut()&&(kt.trackedBehavior.timedOut=!0)},kt.willSpriteTouchWall=function(e,t,i){var o=t+e.width/2,n=i+e.height/2;return kt.walls.willCollidableTouchWall(e,o,n)},kt.willSpriteLeavePlayspace=function(e,t,i){var o=kt.getPlayspaceBoundaries(e);return t<o.left||t>o.right||i<o.top||i>o.bottom},kt.getWallValue=function(e,t){return e<0||e>=kt.ROWS||t<0||t>=kt.COLS?0:kt.wallMap?Ct[kt.wallMap]?Ct[kt.wallMap][e][t]<<L.WallCoordsShift:0:kt.map[e][t].getTileType()&L.WallAnyMask},kt.onSvgDrag=function(e){kt.tickCount>0&&(kt.gesturesObserved[e.gesture.direction]=Math.round(e.gesture.distance/25),e.gesture.preventDefault())},kt.onKey=function(e){kt.keyState[e.keyCode]=e.type,kt.tickCount>0&&e.keyCode>=pt.KeyCodes.LEFT&&e.keyCode<=pt.KeyCodes.DOWN&&e.preventDefault()},kt.onArrowButtonDown=function(e,t){kt.btnState[t]=wt.DOWN,e.preventDefault()},kt.onSpriteClicked=function(e,t){kt.tickCount>0&&u("whenSpriteClicked-"+t),e.preventDefault()},kt.onSvgClicked=function(e){Et.tapSvgToRunAndReset&&kt.gameState===kt.GameStates.WAITING?kt.runButtonClick():Et.tapSvgToRunAndReset&&kt.gameState===kt.GameStates.OVER?(0,Je.singleton)().resetButtonClick():kt.tickCount>0&&kt.eventHandlers.forEach(function(e){var t=e.cmdQueue[0];t&&t.opts.waitForClick&&!t.opts.complete&&(t.opts.waitCallback&&t.opts.waitCallback(),t.opts.complete=!0)}),e.preventDefault()},kt.onArrowButtonUp=function(e,t){kt.btnState[t]=wt.UP},kt.onMouseUp=function(e){kt.btnState={}},kt.initSprites=function(){kt.spriteCount=0,kt.sprite=[],kt.startTime=null,kt.spriteGoals_=[];for(var e={},t=0;t<kt.ROWS;t++)for(var i=0;i<kt.COLS;i++)if(kt.map[t][i].getTileType()&_t.SPRITEFINISH)kt.spriteGoals_.push({x:i*kt.SQUARE_SIZE,y:t*kt.SQUARE_SIZE,finished:!1});else if(kt.map[t][i].getTileType()&_t.SPRITESTART){var o=kt.map[t][i].serialize();if(0===kt.spriteCount&&(kt.spriteStart_=[]),void 0!==o.sprite){var n=o.sprite-(Et.firstSpriteIndex||0);n<0&&(n+=kt.startAvatars.length),e[kt.spriteCount]=kt.startAvatars[n]}kt.spriteStart_[kt.spriteCount]=Object.assign({},o,{x:i*kt.SQUARE_SIZE,y:t*kt.SQUARE_SIZE}),kt.spriteCount++}Object.assign(kt.startAvatars,e),(0,Je.singleton)().isUsingBlockly()&&(Me.default.setSpriteCount(Blockly,kt.spriteCount),Me.default.setStartAvatars(kt.startAvatars),Et.projectileCollisions&&Me.default.enableProjectileCollisions(Blockly))},kt.initReadonly=function(e){Ct=e.skin,Et=e.level,qe.default.initWithSkinAndLevel(Ct,Et),kt.loadLevel(),e.appMsg=Ze.default,kt.initSprites(),(0,Je.singleton)().initReadonly(e)},kt.init=function(e){(0,Je.singleton)().reset=this.reset.bind(this),(0,Je.singleton)().runButtonClick=this.runButtonClick.bind(this),(0,F.default)(window).on("run_button_pressed",function(){document.getElementById("runButton").focus()}),kt.projectiles=[],kt.items=[],kt.itemSpeed={},kt.itemActivity={},kt.eventHandlers=[],kt.perExecutionTimeouts=[],kt.tickIntervalId=null,kt.tiles=[],kt.tilesDrawn=!1,kt.spriteGoals_=[],kt.dynamicSpriteGoals_=[],kt.cloudStep=0,kt.clearEventHandlersKillTickLoop(),Ct=e.skin,Et=e.level,Dt=new ue.default(window.console),(0,$e.injectErrorHandler)(new tt.default(function(){return kt.JSInterpreter},Dt));for(var t in Et.msgStringOverrides)Ze.default[t]=Ze.default[Et.msgStringOverrides[t]];qe.default.initWithSkinAndLevel(Ct,Et);var i=!!Et.useContractEditor;e.grayOutUndeletableBlocks=i,kt.loadLevel(),kt.background=A(),kt.customLogic&&(Ct.staticAvatar=null,Ct.smallStaticAvatar=null,Ct.failureAvatar=null,Ct.winAvatar=null),window.addEventListener("keydown",kt.onKey,!1),window.addEventListener("keyup",kt.onKey,!1);var o=[];Et.music&&Ct.musicMetadata&&(o=Ct.musicMetadata.filter(function(e){return-1!==Et.music.indexOf(e.name)})),kt.makeThrottledPlaySound(),kt.musicController=new ce.default(at.default.getSingleton(),Ct.assetUrl,o),kt.movementAudioEffects={},e.loadAudio=function(){var e=[];e.push.apply(e,Ct.builtinSounds),e.push.apply(e,Ct.sounds),e.push.apply(e,kt.getMovementSoundFileNames(Ct)),e=q.default.uniq(e),Ct.soundFiles={},e.forEach(function(e){e=e.toLowerCase(),Ct.soundFiles[e]=[Ct.assetUrl(e+".mp3"),Ct.assetUrl(e+".ogg")],(0,Je.singleton)().loadAudio(Ct.soundFiles[e],e)}),kt.musicController.preload()},e.level.afterVideoBeforeInstructionsFn=function(e){at.default.getSingleton().whenAudioUnlocked(function(){return kt.musicController.play()}),e()},e.afterInject=function(){for(var e in At)Le.default.addMouseUpTouchEvent(document.getElementById(At[e]),Bt(this,kt.onArrowButtonUp,At[e])),Le.default.addMouseDownTouchEvent(document.getElementById(At[e]),Bt(this,kt.onArrowButtonDown,At[e]));document.addEventListener("mouseup",kt.onMouseUp,!1),(0,Je.singleton)().isUsingBlockly()&&(Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=kt.scale.snapRadius,Blockly.contractEditor&&Blockly.contractEditor.registerTestHandler(kt.getStudioExampleFailure)),Nt()},e.afterClearPuzzle=function(){(0,Je.singleton)().resetButtonClick()},e.polishCodeHook=function(e){if((0,Je.singleton)().isUsingBlockly()){var t=/Studio.move\('\S*', 0, 1\);/g;e=e.replace(t,"moveUp();");var i=/Studio.move\('\S*', 0, 2\);/g;e=e.replace(i,"moveRight();");var o=/Studio.move\('\S*', 0, 4\);/g;e=e.replace(o,"moveDown();");var n=/Studio.move\('\S*', 0, 8\);/g;e=e.replace(n,"moveLeft();")}return e},"playlab"===st.default.getStandaloneApp()&&(e.prepareForRemix=kt.prepareForRemix),e.twitter=Ct.twitterOptions||Rt,e.makeYourOwn=e.share,e.makeString=Ze.default.makeYourOwn(),e.makeUrl="http://code.org/studio",e.makeImage=(0,Je.singleton)().assetUrl("media/promo.png"),e.enableShowCode=!!(0,Je.singleton)().editCode||W.valueOr(Et.enableShowCode,!1),e.varsInGlobals=!0,e.dropletConfig=We.default,e.dropIntoAceAtLineStart=!0,e.showDropdownInPalette=!0,e.unusedConfig=[];for(t in Ct.AutohandlerTouchItems)It[t]="whenSpriteCollided-"+(kt.protagonistSpriteIndex||0)+"-"+Ct.AutohandlerTouchItems[t];for(t in Ct.AutohandlerGetAllItems)It[t]="whenGetAll-"+Ct.AutohandlerGetAllItems[t];for(t in Et.autohandlerOverrides)It[t]=Et.autohandlerOverrides[t];for(var n in It)e.unusedConfig.push(n);e.appMsg=Ze.default,kt.initSprites(),kt.makeThrottledSpriteWallCollisionHelpers();var a=function(){(0,Je.singleton)().init(e);var t=document.getElementById("finishButton");t&&Le.default.addClickTouchEvent(t,kt.onPuzzleComplete),e.skin.preloadAssets&&(qt(),Vt(),Wt())},r={hideCoordinateOverlay:!Et.toolbox||!Et.toolbox.match(/studio_setSpriteXY/)};e.embed&&e.level.markdownInstructions&&!e.level.instructions&&(e.noInstructionsWhenCollapsed=!0,e.centerEmbedded=!1),e.skin.avatarAllowedScripts&&!e.skin.avatarAllowedScripts.includes(e.scriptName)&&(r.smallStaticAvatar=e.skin.blankAvatar,r.failureAvatar=e.skin.blankAvatar),(0,Je.singleton)().setPageConstants(e,r);var l=_e.default.createElement(Ce.default,{finishButton:!Et.isProjectLevel});Se.default.render(_e.default.createElement(Ke.Provider,{store:(0,ot.getStore)()},_e.default.createElement(Y.default,{visualizationColumn:l,onMount:a})),document.getElementById(e.containerId))},kt.prepareForRemix=function(){if(!Et.initializationBlocks&&Ot.every(function(e){return Object.keys(e.defaultValues).every(function(t){return void 0===Et[t]||Et[t]===e.defaultValues[t]})}))return Promise.resolve();var e=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace),t=e.ownerDocument,i=e.querySelector('block[type="when_run"]');i||(i=t.createElement("block"),i.setAttribute("type","when_run"),e.appendChild(i));var o=i.querySelector("next");o&&i.removeChild(o);var n=!0,a=!1,r=void 0;try{for(var l,s=Ot[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var u=l.value,d=!1,c={};for(var p in u.defaultValues){var m=Et[p];void 0!==m&&m!==u.defaultValues[p]?(d=!0,c[p]=m):c[p]=u.defaultValues[p]}if(d)for(var h=u.generateBlocks(c),f=h.length-1;f>=0;f--)!function(e){o&&e.appendChild(o),o=t.createElement("next"),o.appendChild(e)}(h[f])}}catch(e){a=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw r}}if(Et.initializationBlocks)for(var g=(0,dt.parseElement)(Et.initializationBlocks),_=g.childNodes,b=_.length-1;b>=0;b--){var S=_[b];if(S.getAttribute&&"when_run"===S.getAttribute("type")){for(var y=S,v=null,k=!0;k;){k=!1;var w=!0,A=!1,x=void 0;try{for(var E,C=y.childNodes[Symbol.iterator]();!(w=(E=C.next()).done);w=!0){var T=E.value;if(T.tagName&&"next"===T.tagName.toLowerCase()){for(var I=0;I<T.childNodes.length;I++){var R=T.childNodes[I];if(R.tagName&&"block"===R.tagName.toLowerCase()){y=R;break}}k=!0,null===v&&(v=y);break}}}catch(e){A=!0,x=e}finally{try{!w&&C.return&&C.return()}finally{if(A)throw x}}}if(y===S)continue;y.appendChild(o);var D=t.createElement("next");D.appendChild(v),o=D}else g.removeChild(S),e.appendChild(S)}return i.appendChild(o),(0,ut.cleanBlocks)(e),Blockly.mainBlockSpace.clear(),Blockly.Xml.domToBlockSpace(Blockly.mainBlockSpace,e),Promise.resolve()},kt.getMovementSoundFileNames=function(e){return(e.avatarList||[]).map(function(t){return(e[t].movementAudio||[]).reduce(function(e,t){return e.concat([t.begin,t.loop,t.end])},[])}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return void 0!==e})};var Ht=function(e){if(e){(new Image).src=e}},Wt=function(){for(var e=Ct.backgroundChoicesK1,t=0;t<e.length;t++)Ht(e[t][0])},Vt=function(){for(var e=0;e<Ct.ProjectileClassNames.length;e++)Ht(Ct[Ct.ProjectileClassNames[e]]);for(e=0;e<Ct.ItemClassNames.length;e++)Ht(Ct[Ct.ItemClassNames[e]])},qt=function(){for(var e=0;e<Ct.avatarList.length;e++)Ht(Ct[Ct.avatarList[e]].sprite),Ht(Ct[Ct.avatarList[e]].walk)};kt.clearEventHandlersKillTickLoop=function(){kt.eventHandlers.forEach(function(e){var t=e.cmdQueue[0];t&&t.opts&&t.opts.waitTimeout&&!t.opts.complete&&window.clearTimeout(t.opts.waitTimeout)}),kt.eventHandlers=[],kt.perExecutionTimeouts.forEach(function(e){clearTimeout(e)}),kt.pauseExecution(),kt.perExecutionTimeouts=[],kt.tickCount=0,kt.callbackQueueIndex=0;for(var e=0;e<kt.spriteCount;e++)kt.sprite[e]&&kt.sprite[e].bubbleTimeout&&window.clearTimeout(kt.sprite[e].bubbleTimeout)},kt.reset=function(e){var t;kt.clearEventHandlersKillTickLoop(),kt.hideInputPrompt(),kt.gameState=kt.GameStates.WAITING,w(kt.projectiles),w(kt.items);var i=document.getElementById("svgStudio");kt.customLogic&&kt.customLogic.reset();var o=0;for(t=0;t<kt.softButtons_.length;t++)document.getElementById(kt.softButtons_[t]).style.display="inline",o++;if(o&&(0,F.default)("#soft-buttons").removeClass("soft-buttons-none").addClass("soft-buttons-"+o),kt.preExecutionFailure=!1,kt.message=null,kt.pauseInterpreter=!1,kt.progressConditionTestResult=!1,kt.playerScore=0,kt.scoreText=null,kt.victoryText="",document.getElementById("score").setAttribute("visibility","hidden"),document.getElementById("victoryText").setAttribute("visibility","hidden"),Le.default.isMobile()||Le.default.isWindowsTouch()){var n=document.getElementById("resetTextA"),a=document.getElementById("resetTextB");Et.tapSvgToRunAndReset?(n.textContent=Ze.default.tapToPlay(),a.textContent=Ze.default.swipeToMove(),n.setAttribute("visibility","visible"),a.setAttribute("visibility","visible"),(0,F.default)("#overlayGroup *").attr("visibility","visible")):(n.setAttribute("visibility","hidden"),a.setAttribute("visibility","hidden"),(0,F.default)("#overlayGroup *").attr("visibility","hidden"))}else{var r=document.getElementById("resetText");Et.tapSvgToRunAndReset?(r.textContent=Ze.default.tapOrClickToPlay(),r.setAttribute("visibility","visible")):r.setAttribute("visibility","hidden")}Et.floatingScore&&document.getElementById("floatingScore").setAttribute("visibility","hidden"),document.getElementById("titleScreenTitle").setAttribute("visibility","hidden"),document.getElementById("titleScreenTextGroup").setAttribute("visibility","hidden"),kt.background=null,kt.wallMap=null,kt.wallMapRequested=null,kt.walls.setWallMapRequested(null),kt.setBackground({value:A()});var l=document.getElementById("wallOverlay");l&&l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",""),kt.gesturesObserved={},kt.currentCmdQueue=null,kt.sayComplete=0,kt.playSoundCount=0,kt.trackedBehavior={removedItemCount:0,touchedHazardCount:0,setActivityRecord:null,hasSetSprite:!1,hasSetDroidSpeed:!1,hasSetBackground:!1,hasSetMap:!1,hasAddedItem:!1,hasWonGame:!1,hasLostGame:!1,allGoalsVisited:!1,timedOut:!1,gotAllItems:!1,removedItems:{},createdItems:{},hasSetEmotion:!1,hasThrownProjectile:!1},Et.goal&&(Et.goal.successState={}),kt.Globals={},Dt&&Dt.detach(),kt.yieldExecutionTicks=0,(0,Je.singleton)().editCode&&(kt.executionError=null,kt.JSInterpreter&&(kt.JSInterpreter.deinitialize(),kt.JSInterpreter=null));var s={x:0,y:0};for(Ct.gridAlignedMovement&&(s.x=Ct.gridSpriteRenderOffsetX||0,s.y=Ct.gridSpriteRenderOffsetY||0),t=0;t<kt.spriteCount;t++){kt.sprite[t]&&kt.sprite[t].removeElement();var u=kt.spriteStart_[t];kt.sprite[t]=new xe.default({x:u.x,y:u.y,displayX:u.x,displayY:u.y,loop:!0,speed:u.speed||L.DEFAULT_SPRITE_SPEED,size:u.size||L.DEFAULT_SPRITE_SIZE,dir:u.direction||ht.NONE,displayDir:u.direction||ht.NONE,emotion:u.emotion||Et.defaultEmotion||bt.NORMAL,renderOffset:s,lastMove:1/0,visible:!Et.spritesHiddenToStart}),kt.lastMoveSingleDir=u.direction;var d=t%kt.startAvatars.length,c={spriteIndex:t,value:kt.startAvatars[d],forceHidden:Et.spritesHiddenToStart};kt.setSprite(c),kt.displaySprite(t),document.getElementById("speechBubble"+t).setAttribute("visibility","hidden"),kt.sprite[t].setOpacity(1);var m=document.getElementById("explosion"+t);m&&m.setAttribute("visibility","hidden")}kt.itemSpeed={};for(var h in Ct.specialItemProperties)kt.itemSpeed[h]=Ct.specialItemProperties[h].speed;kt.itemActivity={};for(h in Ct.specialItemProperties)kt.itemActivity[h]=Ct.specialItemProperties[h].activity;kt.createLevelItems(i);var f=x();for(f&&kt.setMap({value:x()}),t=0;t<kt.spriteCount;t++)kt.displaySprite(t);this.resetGoalSprites(),p(),kt.levelRestarted=!0,kt.succeededTime=null,kt.movementAudioOff()},kt.resetGoalSprites=function(){kt.touchAllGoalsEventFired=!1;var e,t,i=W.valueOr(Et.goalOverride,{}),o=W.valueOr(i.goalRenderOffsetX,W.valueOr(Ct.goalRenderOffsetX,0)),n=W.valueOr(i.goalRenderOffsetY,W.valueOr(Ct.goalRenderOffsetY,0));for(t=0;t<kt.spriteGoals_.length;t++)e=kt.spriteGoals_[t],e.finished=!1,e.startFadeTime=null,e.marker.setAttribute("x",e.x+o),e.marker.setAttribute("y",e.y+n),e.marker.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",kt.getGoalAssetFromSkin()),e.marker.setAttribute("opacity",1),e.clipRect.setAttribute("x",e.x+o),e.clipRect.setAttribute("y",e.y+n);for(t=0;t<kt.dynamicSpriteGoals_.length;t++)e=kt.dynamicSpriteGoals_[t],e.marker.parentNode.removeChild(e.marker),e.clipPath.parentNode.removeChild(e.clipPath);kt.dynamicSpriteGoals_=[]},kt.getGoalAssetFromSkin=function(){var e=Ct.goal;return Et.goalOverride&&(Et.goalOverride.goalAnimation?e=Ct[Et.goalOverride.goalAnimation]:Et.goalOverride.goalImage&&(e=Ct[Et.goalOverride.goalImage])),e},kt.getStudioExampleFailure=function(e){try{var t=e.getInputTargetBlock("ACTUAL"),i=e.getInputTargetBlock("EXPECTED");(0,Je.singleton)().feedback_.throwOnInvalidExampleBlocks(t,i);var o=Blockly.Generator.blockSpaceToCode("JavaScript",["functional_definition"]),n=Blockly.Generator.blocksToCode("JavaScript",[e]);if(n){return Ue.default.evalWith(o+"; return"+n,{Studio:Oe.default,Globals:kt.Globals},{legacy:!0})?null:"Does not match definition."}return"No example code."}catch(e){return"Execution error: "+e.message}},kt.runButtonClick=function(){Et.edit_blocks&&kt.onPuzzleComplete();var e=document.getElementById("runButton"),t=document.getElementById("resetButton");if(t.style.minWidth||(t.style.minWidth=e.offsetWidth+"px"),(0,Je.singleton)().toggleRunReset("reset"),(0,Je.singleton)().isUsingBlockly()&&Blockly.mainBlockSpace.traceOn(!0),kt.musicController.fadeOut(),kt.removeGoalEffect(),(0,Je.singleton)().reset(!1),(0,Je.singleton)().attempts++,kt.startTime=new Date,kt.execute(),kt.gameState=kt.GameStates.ACTIVE,Et.freePlay&&!Et.isProjectLevel&&(!(0,Je.singleton)().hideSource||Et.showFinish)){var i=document.getElementById("share-cell");if("share-cell-enabled"!==i.className){i.className="share-cell-enabled",(0,Je.singleton)().onResize();var o=document.createEvent("Event");o.initEvent("finishButtonShown",!0,!0),document.dispatchEvent(o)}}Et.showZeroScore&&kt.displayScore()},kt.displayFeedback=function(){var e;e=!(Et.freePlay||kt.testResults>=pt.TestResults.MINIMUM_OPTIMAL_RESULT)||kt.customLogic instanceof Z.default?Fe.default.tryAgain():Fe.default.keepPlaying();var t=Object.assign({continueText:Et.freePlay?Fe.default.nextPuzzle:function(){},reinfFeedbackMsg:Ze.default.reinfFeedbackMsg,sharingText:Ze.default.shareGame},Et.appStringsFunctions),i={continueText:t.continueText(),reinfFeedbackMsg:t.reinfFeedbackMsg({backButton:e}),sharingText:t.sharingText()};if(!kt.waitingForReport){var o=Tt.includes(Ct.id),n=(0,ot.getStore)().getState().progress.signInState===mt.SignInState.SignedIn;(0,Je.singleton)().displayFeedback({feedbackType:kt.testResults,executionError:kt.executionError,tryAgainText:e,continueText:i.continueText,response:kt.response,level:Et,showingSharing:!Et.disableSharing&&Et.freePlay&&!kt.preExecutionFailure&&!Et.projectTemplateLevelName,feedbackImage:kt.feedbackImage,twitter:Ct.twitterOptions||Rt,saveToLegacyGalleryUrl:Et.freePlay&&kt.response&&kt.response.save_to_gallery_url,saveToProjectGallery:o,disableSaveToGallery:!n,message:kt.message,appStrings:i,disablePrinting:Et.disablePrinting})}},kt.onReportComplete=function(e){kt.response=e,kt.waitingForReport=!1,(0,Je.singleton)().onReportComplete(e),kt.displayFeedback()};var Xt=function(e,t,i){e.push({name:t,func:i,cmdQueue:[]})},Yt=function(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(kt.legacyRuntime)Xt(e,t,new(Function.prototype.bind.apply(Function,[null].concat(["Studio","Globals"],a(o),[i]))));else{var n=kt.interpretedHandlers[t];if(n){if(!q.default.isEqual(n.args,o))throw"Can't register two event handlers that take different arguments.";kt.interpretedHandlers[t].code.push(i)}else kt.interpretedHandlers[t]={code:[i],args:o}}},zt=function(e,t,i,o,n,a,r,l){for(var s=Blockly.mainBlockSpace.getTopBlocks(),u=0;s[u];u++){var d=s[u],c=d.getTitleValue(o)||"0",p=d.getTitleValue(a)||"0";if(!(d.type!==t||o&&n!==c||a&&r!==p)){var m=Blockly.Generator.blocksToCode("JavaScript",[d]);if(m){var h=i;o&&(h+="-"+W.stripQuotes(n)),a&&(h+="-"+W.stripQuotes(r)),Yt(e,h,m,l)}}}},Zt=function(e,t,i,o){for(var n=0;n<kt.spriteCount;n++)zt(e,t,i,o,String(n))},Qt=function(e,t,i,o,n){for(var a=0;a<n.length;a++)zt(e,t,i,o,n[a])},Kt=function(e,t,i,o,n){var a,r=function(r){zt(e,t,i,o,String(a),n,r)};for(a=0;a<kt.spriteCount;a++){for(var l=0;l<kt.spriteCount;l++)a!==l&&zt(e,t,i,o,String(a),n,String(l));Ct.ProjectileClassNames.forEach(r),Ct.ItemClassNames.forEach(r),xt.forEach(r),zt(e,t,i,o,String(a),n,"any_actor"),zt(e,t,i,o,String(a),n,"any_edge"),zt(e,t,i,o,String(a),n,"any_projectile"),zt(e,t,i,o,String(a),n,"anything"),zt(e,t,i,o,String(a),n,"goal"),zt(e,t,i,o,String(a),n,"wall")}},Jt=function(e,t,i,o,n,a){for(var r=Ct.spriteChoices.filter(function(e){return e[1]!==L.HIDDEN_VALUE&&e[1]!==L.RANDOM_VALUE}).map(function(e){return e[1]}),l=0;l<kt.spriteCount;l++)for(var s=0;s<r.length;s++)zt(e,t,i,o,String(l),n,r[s],a)},$t=function(e){var t=Blockly.Generator.blockSpaceToCode("JavaScript",e);try{Ue.default.evalWith(t,{Studio:Oe.default,Globals:kt.Globals},{legacy:!0})}catch(e){}};kt.checkForBlocklyPreExecutionFailure=function(){if((0,Je.singleton)().hasUnfilledFunctionalBlock())return kt.result=!1,kt.testResults=pt.TestResults.EMPTY_FUNCTIONAL_BLOCK,kt.message=(0,Je.singleton)().getUnfilledFunctionalBlockError("functional_start_setValue"),kt.preExecutionFailure=!0,!0;if((0,Je.singleton)().hasUnwantedExtraTopBlocks())return kt.result=!1,kt.testResults=pt.TestResults.EXTRA_TOP_BLOCKS_FAIL,kt.preExecutionFailure=!0,!0;if((0,Je.singleton)().hasEmptyFunctionOrVariableName())return kt.result=!1,kt.testResults=pt.TestResults.EMPTY_FUNCTION_NAME,kt.message=Fe.default.unnamedFunction(),kt.preExecutionFailure=!0,!0;var e=kt.checkExamples_();return void 0!==e.result&&(Object.assign(kt,e),kt.preExecutionFailure=!0,!0)},kt.checkExamples_=function(){var e={};if(!Et.examplesRequired)return e;var t=(0,Je.singleton)().getFunctionWithoutTwoExamples();if(t)return e.result=pt.ResultType.FAILURE,e.testResults=pt.TestResults.EXAMPLE_FAILED,e.message=Fe.default.emptyExampleBlockErrorMsg({functionName:t}),e;var i=(0,Je.singleton)().getUnfilledFunctionalExample();if(i){e.result=pt.ResultType.FAILURE,e.testResults=pt.TestResults.EXAMPLE_FAILED;var o=i.getRootBlock().getInputTargetBlock("ACTUAL").getTitleValue("NAME");return e.message=Fe.default.emptyExampleBlockErrorMsg({functionName:o}),e}var n=(0,Je.singleton)().checkForFailingExamples(kt.getStudioExampleFailure);return n&&(e.result=!1,e.testResults=pt.TestResults.EXAMPLE_FAILED,e.message=Fe.default.exampleErrorMessage({functionName:n})),e},kt.checkForEditCodePreExecutionFailure=function(){var e=kt.hasUnexpectedFunction_();return e?(kt.result=!1,kt.testResults=pt.TestResults.EXTRA_FUNCTION_FAIL,kt.message=Ze.default.extraFunction({funcName:e+"()"}),kt.preExecutionFailure=!0,!0):!!(e=kt.hasUnexpectedLocalFunction_())&&(kt.result=!1,kt.testResults=pt.TestResults.LOCAL_FUNCTION_FAIL,kt.message=Ze.default.localFunction({funcName:e+"()"}),kt.preExecutionFailure=!0,!0)},kt.hasUnexpectedFunction_=function(){if((0,Je.singleton)().editCode&&Et.preventUserDefinedFunctions&&kt.JSInterpreter){var e=kt.JSInterpreter.getGlobalFunctionNames();for(var t in It){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}if(e.length>0)return e[0]}},kt.hasUnexpectedLocalFunction_=function(){if((0,Je.singleton)().editCode&&kt.JSInterpreter){var e=kt.JSInterpreter.getLocalFunctionNames();for(var t in It){if(-1!==e.indexOf(t))return t}}},kt.execute=function(){kt.result=(0,Je.singleton)().UNSET,kt.testResults=pt.TestResults.NO_TESTS_RUN,kt.waitingForReport=!1,kt.response=null;var e=[];if((0,Je.singleton)().isUsingBlockly()){if(kt.checkForBlocklyPreExecutionFailure())return kt.onPuzzleComplete();kt.interpretedHandlers={},(0,Je.singleton)().initializationBlocks&&(0,Je.singleton)().initializationBlocks.forEach(function(t){var i="studio_repeatForever"===t.type?"repeatForever":"whenGameStarts",o=Blockly.Generator.blocksToCode("JavaScript",[t]);Yt(e,i,o)}),zt(e,"when_run","whenGameStarts"),zt(e,"functional_start_setSpeeds","whenGameStarts"),zt(e,"functional_start_setBackgroundAndSpeeds","whenGameStarts"),zt(e,"functional_start_setFuncs","whenGameStarts"),zt(e,"functional_start_setValue","whenGameStarts"),zt(e,"studio_whenLeft","when-left"),zt(e,"studio_whenRight","when-right"),zt(e,"studio_whenUp","when-up"),zt(e,"studio_whenDown","when-down"),Qt(e,"studio_whenArrow","when","VALUE",["left","right","up","down"]),zt(e,"studio_repeatForever","repeatForever"),zt(e,"studio_whenTouchCharacter","whenSpriteCollided-"+(kt.protagonistSpriteIndex||0)+"-any_item"),zt(e,"studio_whenGetAllCharacters","whenGetAllItems"),Qt(e,"studio_whenGetAllCharacterClass","whenGetAll","VALUE",Ct.ItemClassNames),Qt(e,"studio_whenGetCharacter","whenSpriteCollided-"+(kt.protagonistSpriteIndex||0),"VALUE",["any_item"].concat(Ct.ItemClassNames)),zt(e,"studio_whenTouchGoal","whenTouchGoal"),kt.wallMapCollisions&&zt(e,"studio_whenTouchObstacle","whenSpriteCollided-"+(kt.protagonistSpriteIndex||0)+"-wall"),Zt(e,"studio_whenSpriteClicked","whenSpriteClicked","SPRITE"),Kt(e,"studio_whenSpriteCollided","whenSpriteCollided","SPRITE1","SPRITE2"),Jt(e,"studio_whenSpriteAndGroupCollideSimple","whenSpriteCollided","SPRITE","SPRITENAME"),Jt(e,"studio_whenSpriteAndGroupCollide","whenSpriteCollided","SPRITE","SPRITENAME",["touchedSpriteIndex"])}if(W.valueOr(Et.playStartSound,!0)&&kt.playSound({soundName:"start"}),(0,Je.singleton)().reset(!1),(0,Je.singleton)().clearAndAttachRuntimeAnnotations(),Et.editCode){var t=(0,Je.singleton)().getCode();if(kt.JSInterpreter=new le.default({studioApp:(0,Je.singleton)()}),kt.JSInterpreter.onExecutionError.register(E),Dt&&Dt.attachTo(kt.JSInterpreter),kt.JSInterpreter.parse({code:t,blocks:We.default.blocks,blockFilter:Et.executePaletteApisOnly&&Et.codeFunctions,enableEvents:!0}),!kt.JSInterpreter.initialized())return;if(kt.checkForEditCodePreExecutionFailure())return kt.onPuzzleComplete();kt.initAutoHandlers(It)}else{if(kt.legacyRuntime)$t("procedures_defreturn"),$t("procedures_defnoreturn"),$t("functional_definition");else{var i=Blockly.Generator.blockSpaceToCode.bind(Blockly.Generator,"JavaScript"),o=["procedures_defreturn","procedures_defnoreturn","functional_definition"].map(i).join(";");kt.interpretedHandlers.getGlobals={code:"return Globals;"};var n=Ue.default.evalWithEvents({Studio:Oe.default,Globals:kt.Globals},kt.interpretedHandlers,o),a=n.hooks,r=n.interpreter;kt.interpreter=r,a.forEach(function(t){"getGlobals"===t.name?Object.defineProperty(kt,"Globals",{get:function(){return t.func()||{}},set:function(){},configurable:!0}):Xt(e,t.name,t.func)})}kt.eventHandlers=e}(0,F.default)("#resetText, #resetTextA, #resetTextB, #overlayGroup *").attr("visibility","hidden"),kt.perExecutionTimeouts=[],kt.resumeExecution()},kt.pauseExecution=function(){kt.paused=!0,window.clearInterval(kt.tickIntervalId)},kt.resumeExecution=function(){kt.paused=!1,kt.tickIntervalId=window.setInterval(kt.onTick,kt.scale.stepSpeed)},kt.feedbackImage="",kt.encodedFeedbackImage="",kt.onPuzzleComplete=function(){kt.executionError?kt.result=pt.ResultType.ERROR:((0,Je.singleton)().hasContainedLevels||Et.freePlay&&!kt.preExecutionFailure)&&(kt.result=pt.ResultType.SUCCESS),kt.clearEventHandlersKillTickLoop(),kt.movementAudioOff(),Ct.gridAlignedMovement&&kt.JSInterpreter&&kt.JSInterpreter.selectCurrentCode();var e=kt.result===pt.ResultType.SUCCESS;if(kt.preExecutionFailure||kt.progressConditionTestResult||(kt.testResults=Et.freePlay?pt.TestResults.FREE_PLAY:(0,Je.singleton)().getTestResults(e,{executionError:kt.executionError})),kt.testResults>=pt.TestResults.TOO_MANY_BLOCKS_FAIL?(0,Je.singleton)().playAudioOnWin():(0,Je.singleton)().playAudioOnFailure(),(0,Je.singleton)().hasContainedLevels&&!Et.edit_blocks)return(0,it.postContainedLevelAttempt)((0,Je.singleton)()),void(0,it.runAfterPostContainedLevel)(function(){kt.message=(0,it.getContainedLevelResultInfo)().feedback,kt.onReportComplete()});var t;if(Et.editCode)t=(0,Je.singleton)().getCode();else{var i=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace);t=Blockly.Xml.domToText(i)}kt.waitingForReport=!0;var o=function(){(0,Je.singleton)().report({app:"studio",level:Et.id,result:kt.result===pt.ResultType.SUCCESS,testResult:kt.testResults,program:encodeURIComponent(t),image:kt.encodedFeedbackImage,onComplete:kt.onReportComplete})};void 0===document.getElementById("svgStudio").toDataURL?o():document.getElementById("svgStudio").toDataURL("image/jpeg",{callback:function(e){kt.feedbackImage=e,kt.encodedFeedbackImage=encodeURIComponent(kt.feedbackImage.split(",")[1]),o()}})},kt.drawDebugRect=function(e,t,i,o,n){if(vt){var a=document.getElementById("svgStudio"),r=document.createElementNS(pt.SVG_NS,"g");r.setAttribute("class",e+" debugRect");var l=document.createElementNS(pt.SVG_NS,"rect");l.setAttribute("width",o),l.setAttribute("height",n),l.setAttribute("x",t-o/2),l.setAttribute("y",i-n/2),l.setAttribute("fill","rgba(255, 255, 255, 0.5)"),l.setAttribute("stroke","#000000"),l.setAttribute("stroke-width",1),r.appendChild(l),a.appendChild(r)}},kt.drawDebugLine=function(e,t,i,o,n,a){if(vt){a=W.valueOr(a,"#000000");var r=document.getElementById("svgStudio"),l=document.createElementNS(pt.SVG_NS,"g");l.setAttribute("class",e+" debugLine");var s=document.createElementNS(pt.SVG_NS,"line");s.setAttribute("x1",t),s.setAttribute("y1",i),s.setAttribute("x2",o),s.setAttribute("y2",n),s.setAttribute("stroke",a),s.setAttribute("stroke-width",2),l.appendChild(s),r.appendChild(l)}},kt.drawTimeoutRect=function(){if(Et.showTimeoutRect&&kt.timeoutFailureTick!==1/0){(0,F.default)(".timeoutRect").remove();var e=kt.timeoutFailureTick-kt.tickCount,t=e/kt.timeoutFailureTick;if(t<=.5){var i=t<.4?1:1-(t-.4)/(.5-.4),o=e*kt.MAZE_WIDTH/(.5*kt.timeoutFailureTick);if(o>0){var n=document.getElementById("svgStudio"),a=document.createElementNS(pt.SVG_NS,"g");a.setAttribute("class","timeoutRect");var r=document.createElementNS(pt.SVG_NS,"rect");r.setAttribute("opacity",i),r.setAttribute("width",o),r.setAttribute("height",6),r.setAttribute("x",0),r.setAttribute("y",kt.MAZE_HEIGHT-6),r.setAttribute("fill",Et.showTimeoutRect),a.appendChild(r),n.appendChild(a)}}}},kt.drawDebugOverlay=function(e){if(vt&&0===(0,F.default)(".debugImage").length){var t=document.getElementById("svgStudio"),i=document.createElementNS(pt.SVG_NS,"g");i.setAttribute("class","walls debugImage");var o=document.createElementNS(pt.SVG_NS,"image");o.setAttribute("width",kt.MAZE_WIDTH),o.setAttribute("height",kt.MAZE_HEIGHT),o.setAttribute("x",0),o.setAttribute("y",0),o.setAttribute("opacity","0.5"),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),i.appendChild(o),t.appendChild(i)}},kt.clearDebugElements=function(){(0,F.default)(".debugRect").remove(),(0,F.default)(".debugLine").remove(),(0,F.default)(".debugImage").remove()},kt.drawWallTile=function(e,t,i,o){var n,a,r=Ct.tiles,l=0,s=kt.SQUARE_SIZE,u=0,d=8,c=8,p=!1;t===_t.WALL?(n=Math.floor(Math.random()*L.WallRandomCoordMax),a=n?Math.floor(Math.random()*L.WallRandomCoordMax):1+Math.floor(Math.random()*(L.WallRandomCoordMax-1))):(n=(t&L.WallCoordRowMask)>>L.WallCoordRowShift,a=(t&L.WallCoordColMask)>>L.WallCoordColShift,l=(t&L.WallTypeMask)>>L.WallTypeShift,l===L.WallType.JUMBO_SIZE?(p=!0,s=Ct[kt.background].jumboTilesSize,d=Ct[kt.background].jumboTilesRows,c=Ct[kt.background].jumboTilesCols):l===L.WallType.DOUBLE_SIZE&&(s=2*kt.SQUARE_SIZE)),kt.background&&!p&&Ct[kt.background].tiles?r=Ct[kt.background].tiles:kt.background&&p&&Ct[kt.background].jumboTiles&&(r=Ct[kt.background].jumboTiles,u=Ct[kt.background].jumboTilesAddOffset);var m=document.createElementNS(pt.SVG_NS,"clipPath"),h="tile_clippath_"+kt.tiles.length;m.setAttribute("id",h),m.setAttribute("class","tile");var f=document.createElementNS(pt.SVG_NS,"rect");f.setAttribute("width",s),f.setAttribute("height",s),f.setAttribute("x",o*kt.SQUARE_SIZE+u),f.setAttribute("y",i*kt.SQUARE_SIZE+u),m.appendChild(f),e.appendChild(m);var g=document.createElementNS(pt.SVG_NS,"image"),_="tile_"+kt.tiles.length;g.setAttribute("id",_),g.setAttribute("class","tileClip"),g.setAttribute("width",c*s),g.setAttribute("height",d*s),g.setAttribute("x",o*kt.SQUARE_SIZE-a*s+u),g.setAttribute("y",i*kt.SQUARE_SIZE-n*s+u),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r),e.appendChild(g),g.setAttribute("clip-path","url(#"+h+")");var b={};b.bottomY=i*kt.SQUARE_SIZE+u+s,kt.tiles.push(b)},kt.createLevelItems=function(e){for(var t=0;t<kt.ROWS;t++)for(var i=0;i<kt.COLS;i++)for(var o=kt.map[t][i].getTileType(),n=0;n<Ct.ItemClassNames.length;n++)if(L.squareHasItemClass(n,o)){var a=kt.getItemOptionsForItemClass(Ct.ItemClassNames[n]),r=Object.assign({},a,{x:kt.HALF_SQUARE+kt.SQUARE_SIZE*i,y:kt.HALF_SQUARE+kt.SQUARE_SIZE*t}),l=new ae.default(r);l.createElement(e),l.display(),kt.items.push(l)}},kt.drawMapTiles=function(e){if(kt.wallMap||!kt.tilesDrawn){kt.tilesDrawn=!0;var t,i,o=[];for(t=0;t<kt.ROWS;t++)for(o[t]=[],i=0;i<kt.COLS;i++)o[t][i]=!1;var n=document.getElementById("backgroundLayer"),a=kt.walls.getWallOverlayURI();if(a){var r=document.getElementById("wallOverlay");r||(r=document.createElementNS(pt.SVG_NS,"image"),r.setAttribute("id","wallOverlay"),r.setAttribute("height",kt.MAZE_HEIGHT),r.setAttribute("width",kt.MAZE_WIDTH),r.setAttribute("x",0),r.setAttribute("y",0),n.appendChild(r)),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a)}for(t=0;t<kt.ROWS;t++)for(i=0;i<kt.COLS;i++){var l=kt.getWallValue(t,i);if(l){if(o[t][i])continue;var s=(l&L.WallTypeMask)>>L.WallTypeShift;s===L.WallType.DOUBLE_SIZE&&(o[t][i]=!0,o[t][i+1]=!0,o[t+1][i]=!0,o[t+1][i+1]=!0),kt.drawWallTile(n,l,t,i)}}}};var ei=function(e){var t=+e.getAttribute("height"),i=+e.getAttribute("width"),o="true"===e.getAttribute("onTop"),n="true"===e.getAttribute("onRight"),a=+e.getAttribute("tipOffset");e.setAttribute("d",ni(0,0,i,t,20,o,n,a))};kt.displaySprite=function(e){var t=kt.sprite[e];if("hidden"!==t.value){if(t.hasActions())t.updateActions();else{var i=ht.NONE,o=t.lastDrawPosition;t.displayX=t.x,t.displayY=t.y;var n=t.getCurrentDrawPosition();n.x===o.x&&n.y===o.y||(n.x<o.x?i|=ht.WEST:n.x>o.x&&(i|=ht.EAST),n.y<o.y?i|=ht.NORTH:n.y>o.y&&(i|=ht.SOUTH)),i===ht.NONE&&t.lastMove!==1/0||t.setDirection(i)}t.dir!==t.displayDir&&kt.tickCount&&0==kt.tickCount%2&&(t.displayDir=gt[t.displayDir][t.dir]),t.display(),t.bubbleVisible&&kt.renderSpeechBubble(e)}},kt.renderSpeechBubble=function(e){var t=kt.sprite[e],i=document.getElementById("speechBubble"+e),o=document.getElementById("speechBubblePath"+e),n=+o.getAttribute("tipOffset"),a="true"===o.getAttribute("onTop"),r="true"===o.getAttribute("onRight"),l=+o.getAttribute("height"),s=+o.getAttribute("width"),u=kt.calculateBubblePosition(t,l,s,kt.MAZE_WIDTH);o.setAttribute("onTop",u.onTop),o.setAttribute("onRight",u.onRight),o.setAttribute("tipOffset",u.tipOffset),a===u.onTop&&r===u.onRight&&n===u.tipOffset||ei(o),i.setAttribute("transform","translate("+u.xSpeech+", "+u.ySpeech+")")},kt.calculateBubblePosition=function(e,t,i,o){var n=!0,a=e.y-(t+5);a<5&&(a=e.y+e.height+5,n=!1);var r=void 0,l=void 0,s=0;if(e.x>(o-e.width)/2)r=!1,(l=e.x+e.width-(i+50))<10&&(s=10-l,l=10);else{r=!0,l=e.x+50;var u=o-i-10;l>u&&(s=l-u,l=u)}return{onTop:n,onRight:r,tipOffset:s,xSpeech:l,ySpeech:a}},kt.displayScore=function(){var e=document.getElementById("score");kt.scoreText?e.textContent=kt.scoreText:e.textContent=Ze.default.scoreText({playerScore:kt.playerScore}),e.setAttribute("visibility","visible")},kt.displayVictoryText=function(){var e=document.getElementById("victoryText");if(e.textContent=kt.victoryText,e.setAttribute("visibility","visible"),Et.tapSvgToRunAndReset)if(Le.default.isMobile()||Le.default.isWindowsTouch()){var t=document.getElementById("resetTextA"),i=document.getElementById("resetTextB");i.textContent=Ze.default.tapToReset(),t.setAttribute("visibility","hidden"),i.setAttribute("visibility","visible"),(0,F.default)("#overlayGroup image, #overlayGroup rect").attr("visibility","hidden")}else{var o=document.getElementById("resetText");o.textContent=Ze.default.tapOrClickToReset(),o.setAttribute("visibility","visible")}},kt.animateGoals=function(){var e,t,i,o,n=new Date,a=Et.goalOverride&&Et.goalOverride.goalAnimation,r=Ct.fadeOutGoal;a&&(e=n-kt.startTime,t=Ct.animatedGoalFrames,i=Ct.timePerGoalAnimationFrame,o=Ct.goalSpriteWidth);kt.allGoals_().forEach(function(l,s){if(!l.finished||l.startFadeTime){if(a){var u=parseInt(l.clipRect.getAttribute("x"),10),d=(7*s+Math.floor(e/i))%t;l.marker.setAttribute("x",u-d*o)}if(r){var c=L.GOAL_FADE_TIME;if(l.startFadeTime){var p=1-(n-l.startFadeTime)/c;p<0&&(p=0,l.startFadeTime=null),l.marker.setAttribute("opacity",p)}}}})},kt.loadClouds=function(){var e,t;if(kt.background&&Ct[kt.background].clouds)for(t=0;t<Ct[kt.background].clouds.length;t++){e=document.getElementById("cloud"+t),e.setAttribute("width",L.CLOUD_SIZE),e.setAttribute("height",L.CLOUD_SIZE),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Ct[kt.background].clouds[t]),e.setAttribute("opacity",L.CLOUD_OPACITY);var i=kt.getCloudLocation(t);e.setAttribute("x",i.x),e.setAttribute("y",i.y)}else for(t=0;t<L.MAX_NUM_CLOUDS;t++)e=document.getElementById("cloud"+t),e.setAttribute("x",-L.CLOUD_SIZE),e.setAttribute("y",-L.CLOUD_SIZE)},kt.animateClouds=function(){if(kt.background&&Ct[kt.background].clouds){kt.cloudStep++;for(var e=0;e<Ct[kt.background].clouds.length;e++){var t=kt.getCloudLocation(e),i=document.getElementById("cloud"+e);i.setAttribute("x",Math.round(t.x)),i.setAttribute("y",Math.round(t.y))}}},kt.getCloudLocation=function(e){var t,i,o=[50,60],n=kt.MAZE_WIDTH+L.CLOUD_SIZE,a=30*kt.cloudStep,r=a/o[e]%n;return 0===e?(t=r-kt.MAZE_WIDTH/4,i=t-kt.MAZE_HEIGHT/2):(t=kt.MAZE_WIDTH-r,i=t+kt.MAZE_HEIGHT/2),{x:t,y:i}},kt.displayFloatingScore=function(e){if(Et.floatingScore){var t=kt.sprite[0],i=document.getElementById("floatingScore");i.textContent=e>0?"+"+e:e,i.setAttribute("x",t.x+t.width/2),i.setAttribute("y",t.y+t.height/2),i.setAttribute("opacity",1),i.setAttribute("visibility","visible")}},kt.updateFloatingScore=function(){if(Et.floatingScore){var e=document.getElementById("floatingScore"),t=parseInt(e.getAttribute("y")),i=parseFloat(e.getAttribute("opacity"));i>0&&(i+=L.floatingScoreChangeOpacity,e.setAttribute("opacity",i),t+=L.floatingScoreChangeY,e.setAttribute("y",t))}},kt.showCoordinates=function(){var e=kt.sprite[kt.protagonistSpriteIndex||0];if(e){var t=e.x+50,i=350-e.y;kt.setScoreText({text:"x: "+t+" y: "+i})}},kt.queueCmd=function(e,t,i){var o={id:e,name:t,opts:i};if((0,Je.singleton)().isUsingBlockly()&&kt.currentCmdQueue){if(kt.currentEventParams)for(var n in kt.currentEventParams)o.opts[n]=kt.currentEventParams[n];kt.currentCmdQueue.push(o)}else kt.callCmd(o)},kt.executeQueue=function(e,t){kt.eventHandlers.forEach(function(t){if(!(kt.paused||kt.yieldExecutionTicks>0)&&t.name===e&&t.cmdQueue.length)for(var i=t.cmdQueue[0];i&&kt.callCmd(i)&&(t.cmdQueue.shift(),!(kt.paused||kt.yieldExecutionTicks>0));i=t.cmdQueue[0]);})},kt.callCmd=function(e){switch(e.name){case"endGame":(0,Je.singleton)().highlight(e.id),kt.endGame(e.opts);break;case"setBackground":(0,Je.singleton)().highlight(e.id),kt.setBackground(e.opts),kt.trackedBehavior.hasSetBackground=!0;break;case"setMap":case"setMapAndColor":(0,Je.singleton)().highlight(e.id),kt.setMap(e.opts),kt.trackedBehavior.hasSetMap=!0;break;case"setAllowSpritesOutsidePlayspace":(0,Je.singleton)().highlight(e.id),kt.allowSpritesOutsidePlayspace=e.opts.value;break;case"setSprite":(0,Je.singleton)().highlight(e.id),kt.setSprite(e.opts),kt.trackedBehavior.hasSetSprite=!0;break;case"getSpriteValue":(0,Je.singleton)().highlight(e.id),kt.getSpriteValue(e.opts);break;case"getSpriteVisibility":(0,Je.singleton)().highlight(e.id),kt.getSpriteVisibility(e.opts);break;case"saySprite":return e.opts.started||(0,Je.singleton)().highlight(e.id),kt.saySprite(e.opts);case"setSpriteEmotion":(0,Je.singleton)().highlight(e.id),kt.setSpriteEmotion(e.opts),kt.trackedBehavior.hasSetEmotion=!0;break;case"getSpriteEmotion":(0,Je.singleton)().highlight(e.id),kt.getSpriteEmotion(e.opts);break;case"setSpriteSpeed":(0,Je.singleton)().highlight(e.id),kt.setSpriteSpeed(e.opts);break;case"setDroidSpeed":(0,Je.singleton)().highlight(e.id),kt.setDroidSpeed(e.opts),kt.trackedBehavior.hasSetDroidSpeed=!0;break;case"setSpriteSize":(0,Je.singleton)().highlight(e.id),kt.setSpriteSize(e.opts);break;case"setSpritePosition":(0,Je.singleton)().highlight(e.id),kt.setSpritePosition(e.opts);break;case"setSpriteXY":(0,Je.singleton)().highlight(e.id),kt.setSpriteXY(e.opts);break;case"getSpriteXY":(0,Je.singleton)().highlight(e.id),kt.getSpriteXY(e.opts);break;case"setSpriteBehavior":(0,Je.singleton)().highlight(e.id),kt.setSpriteBehavior(e.opts);break;case"setSpritesWander":(0,Je.singleton)().highlight(e.id),kt.setSpritesWander(e.opts);break;case"setSpritesStop":(0,Je.singleton)().highlight(e.id),kt.setSpritesStop(e.opts);break;case"setSpritesChase":(0,Je.singleton)().highlight(e.id),kt.setSpritesChase(e.opts);break;case"setSpritesFlee":(0,Je.singleton)().highlight(e.id),kt.setSpritesFlee(e.opts);break;case"setSpritesSpeed":(0,Je.singleton)().highlight(e.id),kt.setSpritesSpeed(e.opts);break;case"addGoal":(0,Je.singleton)().highlight(e.id),kt.addGoal(e.opts);break;case"playSound":(0,Je.singleton)().highlight(e.id),kt.playSound(e.opts);break;case"showTitleScreen":return e.opts.started||(0,Je.singleton)().highlight(e.id),kt.showTitleScreen(e.opts);case"move":(0,Je.singleton)().highlight(e.id),kt.moveSingle(e.opts);break;case"moveRight":(0,Je.singleton)().highlight(e.id),kt.moveSingle({spriteIndex:kt.protagonistSpriteIndex||0,dir:ht.EAST});break;case"moveLeft":(0,Je.singleton)().highlight(e.id),kt.moveSingle({spriteIndex:kt.protagonistSpriteIndex||0,dir:ht.WEST});break;case"moveUp":(0,Je.singleton)().highlight(e.id),kt.moveSingle({spriteIndex:kt.protagonistSpriteIndex||0,dir:ht.NORTH});break;case"moveDown":(0,Je.singleton)().highlight(e.id),kt.moveSingle({spriteIndex:kt.protagonistSpriteIndex||0,dir:ht.SOUTH});break;case"moveForward":(0,Je.singleton)().highlight(e.id),kt.moveSingle({spriteIndex:kt.protagonistSpriteIndex||0,dir:kt.lastMoveSingleDir});break;case"moveBackward":(0,Je.singleton)().highlight(e.id),kt.moveSingle({spriteIndex:kt.protagonistSpriteIndex||0,dir:kt.lastMoveSingleDir,backward:!0});break;case"turnRight":(0,Je.singleton)().highlight(e.id),kt.turnSingle({spriteIndex:kt.protagonistSpriteIndex||0,dir:St(kt.lastMoveSingleDir)});break;case"turnLeft":(0,Je.singleton)().highlight(e.id),kt.turnSingle({spriteIndex:kt.protagonistSpriteIndex||0,dir:yt(kt.lastMoveSingleDir)});break;case"moveDistance":return e.opts.started||(0,Je.singleton)().highlight(e.id),kt.moveDistance(e.opts);case"stop":(0,Je.singleton)().highlight(e.id),kt.stop(e.opts);break;case"throwProjectile":return e.opts.started||(0,Je.singleton)().highlight(e.id),kt.trackedBehavior.hasThrownProjectile=!0,kt.throwProjectile(e.opts);case"makeProjectile":(0,Je.singleton)().highlight(e.id),kt.makeProjectile(e.opts);break;case"changeScore":(0,Je.singleton)().highlight(e.id),kt.changeScore(e.opts);break;case"reduceScore":(0,Je.singleton)().highlight(e.id),kt.reduceScore(e.opts);break;case"displayScore":(0,Je.singleton)().highlight(e.id),kt.displayScore(e.opts);break;case"setScoreText":(0,Je.singleton)().highlight(e.id),kt.setScoreText(e.opts);break;case"showCoordinates":(0,Je.singleton)().highlight(e.id),kt.showCoordinates();break;case"wait":return e.opts.started||(0,Je.singleton)().highlight(e.id),kt.wait(e.opts);case"vanish":(0,Je.singleton)().highlight(e.id),kt.vanishActor(e.opts);break;case"addItem":(0,Je.singleton)().highlight(e.id),kt.addItem(e.opts),kt.trackedBehavior.hasAddedItem=!0;break;case"setItemActivity":(0,Je.singleton)().highlight(e.id),kt.setItemActivity(e.opts);break;case"setItemSpeed":(0,Je.singleton)().highlight(e.id),kt.setItemSpeed(e.opts);break;case"showDebugInfo":(0,Je.singleton)().highlight(e.id),kt.showDebugInfo(e.opts);break;case"onEvent":(0,Je.singleton)().highlight(e.id),kt.onEvent(e.opts);break;case"askForInput":if((0,Je.singleton)().highlight(e.id),kt.paused)return!1;kt.askForInput(e.opts.question,e.opts.callback)}return!0},kt.makeThrottledPlaySound=function(){kt.throttledPlaySound=q.default.throttle((0,Je.singleton)().playAudio.bind((0,Je.singleton)()),L.SOUND_THROTTLE_TIME)},kt.makeThrottledSpriteWallCollisionHelpers=function(){kt.throttledCollideSpriteWithWallFunctions=[];for(var e=0;e<kt.spriteCount;e++)kt.throttledCollideSpriteWithWallFunctions[e]=q.default.throttle(function(e){return function(){kt.collideSpriteWith(e,"wall"),kt.sprite[e].endCollision("wall")}}(e),L.TOUCH_OBSTACLE_THROTTLE_TIME)},kt.playSound=function(e){if("string"!=typeof e.soundName)throw new TypeError("Incorrect parameter: "+e.soundName);var t=e.soundName.toLowerCase().trim(),i=qe.default.getPlaySoundValues(!1);if(t===L.RANDOM_VALUE)t=i[Math.floor(Math.random()*i.length)].toLowerCase();else{var o=function(e){return-1!==i.indexOf(e)};for(var n in Ct.soundGroups){var a=Ct.soundGroups[n];if(t===a.randomValue.toLowerCase()){for(var r=[],l=a.minSuffix;l<=a.maxSuffix;l++)r.push(n+l);r.filter(o),t=r[Math.floor(Math.random()*r.length)].toLowerCase();break}}}if(!Ct.soundFiles[t])throw new RangeError("Incorrect parameter: "+e.soundName);var s=W.valueOr(Ct.soundMetadata,[]),u=Object.assign({volume:1},q.default.find(s,function(e){return e.name.toLowerCase().trim()===t}));kt.throttledPlaySound(t,u),kt.playSoundCount++},kt.getItemOptionsForItemClass=function(e){var t=W.valueOr(Ct.specialItemProperties[e],{});return{className:e,image:Ct[e],frames:C(e,Ct.specialItemProperties,Ct.itemFrames),loop:!0,width:t.width,height:t.height,dir:ht.NONE,speed:kt.itemSpeed[e],normalSpeed:t.speed,activity:W.valueOr(kt.itemActivity[e],L.BEHAVIOR_WANDER),isHazard:t.isHazard,spritesCounterclockwise:t.spritesCounterclockwise,renderOffset:W.valueOr(t.renderOffset,{x:0,y:0}),renderScale:W.valueOr(t.scale,1),animationFrameDuration:t.animationFrameDuration}},kt.addItem=function(e){if("string"!=typeof e.className)throw new TypeError("Incorrect parameter: "+e.className);var t=e.className.toLowerCase().trim();if(t===L.RANDOM_VALUE&&(t=Ct.ItemClassNames[Math.floor(Math.random()*Ct.ItemClassNames.length)]),!Ct[t])throw new RangeError("Incorrect parameter: "+e.className);var i=[ht.NORTH,ht.EAST,ht.SOUTH,ht.WEST,ht.NORTHEAST,ht.SOUTHEAST,ht.SOUTHWEST,ht.NORTHWEST],o=function(){var e={};return Et.itemGridAlignedMovement?(e.x=kt.HALF_SQUARE+kt.SQUARE_SIZE*Math.floor(Math.random()*kt.COLS),e.y=kt.HALF_SQUARE+kt.SQUARE_SIZE*Math.floor(Math.random()*kt.ROWS)):(e.x=kt.HALF_SQUARE+Math.floor(Math.random()*(kt.MAZE_WIDTH-kt.SQUARE_SIZE)),e.y=kt.HALF_SQUARE+Math.floor(Math.random()*(kt.MAZE_HEIGHT-kt.SQUARE_SIZE))),e},n=o(),a=Et.itemGridAlignedMovement?ht.NONE:i[Math.floor(Math.random()*i.length)],r=Object.assign({},kt.getItemOptionsForItemClass(t),{x:n.x,y:n.y,dir:a}),l=new ae.default(r);if(kt.wallMapCollisions)for(var s=0;kt.walls.willCollidableTouchWall(l,l.x,l.y)||kt.getDistance(kt.sprite[0].x+kt.sprite[0].width/2,kt.sprite[0].y+kt.sprite[0].height/2,l.x,l.y)<100;){var u=o();if(l.x=u.x,l.y=u.y,++s>100)break}l.createElement(document.getElementById("spriteLayer")),kt.items.push(l)},kt.getDistance=function(e,t,i,o){return Math.sqrt(Math.pow(i-e,2)+Math.pow(o-t,2))},kt.setItemActivity=function(e){if("string"!=typeof e.className)throw new TypeError("Incorrect parameter: "+e.className);var t=e.className.toLowerCase().trim();if(t===L.RANDOM_VALUE&&(t=Ct.ItemClassNames[Math.floor(Math.random()*Ct.ItemClassNames.length)]),!Ct[t])throw new RangeError("Incorrect parameter: "+e.className);e.type!==L.BEHAVIOR_WANDER&&e.type!==L.BEHAVIOR_CHASE&&e.type!==L.BEHAVIOR_FLEE&&e.type!==L.BEHAVIOR_STOP||(kt.itemActivity[t]=e.type,kt.items.forEach(function(i){i.className===t&&(i.setActivity(e.type,0),kt.trackedBehavior.setActivityRecord||(kt.trackedBehavior.setActivityRecord=[]),kt.trackedBehavior.setActivityRecord[t]||(kt.trackedBehavior.setActivityRecord[t]=[]),kt.trackedBehavior.setActivityRecord[t][e.type]=!0)}))},kt.setItemSpeed=function(e){if("string"!=typeof e.className)throw new TypeError("Incorrect parameter: "+e.className);var t=e.className.toLowerCase().trim();if(t===L.RANDOM_VALUE&&(t=Ct.ItemClassNames[Math.floor(Math.random()*Ct.ItemClassNames.length)]),!Ct[t])throw new RangeError("Incorrect parameter: "+e.className);var i=W.valueOr(Ct.specialItemProperties[t].speed,L.DEFAULT_ITEM_SPEED);"fast"===e.speed.toLowerCase()?i=Math.floor(2*i):"slow"===e.speed.toLowerCase()&&(i=Math.floor(i/2)),kt.itemSpeed[t]=i,kt.items.forEach(function(e){e.className===t&&e.setSpeed(i)})},kt.showDebugInfo=function(e){vt=e.value},kt.vanishActor=function(e){var t=document.getElementById("spriteLayer"),i=e.spriteIndex;if(i<0||i>=kt.spriteCount)throw new RangeError("Incorrect parameter: "+i);var o=kt.sprite[i];if(o.visible||o.isFading()){var n,a=document.getElementById("explosion"+i);if(!a){var r=document.createElementNS(pt.SVG_NS,"clipPath");r.setAttribute("id","explosionClipPath"+i),n=document.createElementNS(pt.SVG_NS,"rect"),n.setAttribute("id","explosionClipRect"+i),n.setAttribute("width",o.height),n.setAttribute("height",o.width),r.appendChild(n),t.appendChild(r),a=document.createElementNS(pt.SVG_NS,"image"),a.setAttribute("id","explosion"+i),a.setAttribute("visibility","hidden"),a.setAttribute("clip-path","url(#explosionClipPath"+i+")"),t.insertBefore(a,o.getElement()||o.getLegacyElement())}var l=o.width,s=Ct.explosionFrames,u=o.getCurrentDrawPosition(),d={x:u.x-o.width/2,y:u.y-o.height/2};a.setAttribute("height",o.height),a.setAttribute("width",s*l),a.setAttribute("x",d.x),a.setAttribute("y",d.y),a.setAttribute("visibility","visible"),n=document.getElementById("explosionClipRect"+i),n.setAttribute("x",d.x),n.setAttribute("y",d.y),Ct.fadeExplosion?o.startFade(Ct.explosionFrames*Ct.timePerExplosionFrame):kt.setSprite({spriteIndex:i,value:"hidden"}),q.default.range(0,s).forEach(function(e){kt.perExecutionTimeouts.push(setTimeout(function(){a.setAttribute("x",d.x-e*l)},e*Ct.timePerExplosionFrame))}),kt.perExecutionTimeouts.push(setTimeout(function(){a.setAttribute("visibility","hidden"),Ct.fadeExplosion&&(kt.setSprite({spriteIndex:i,value:"hidden"}),o.setOpacity(1))},Ct.timePerExplosionFrame*(s+1))),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Ct.explosion+"?spriteIndex="+i)}},kt.setSpriteEmotion=function(e){kt.sprite[e.spriteIndex].emotion=e.value},kt.getSpriteEmotion=function(e){var t=kt.sprite[e.spriteIndex].emotion;kt.queueCallback(e.callback,[t])},kt.setSpriteSpeed=function(e){var t=Math.min(Math.max(e.value,L.SpriteSpeed.SLOW),L.SpriteSpeed.VERY_FAST);kt.sprite[e.spriteIndex].setSpeed(t)};var ti={slow:L.SpriteSpeed.SLOW,normal:L.SpriteSpeed.NORMAL,fast:L.SpriteSpeed.VERY_FAST};kt.setDroidSpeed=function(e){if("string"!=typeof e.value)throw new TypeError("Incorrect parameter: "+e.value);var t=e.value.toLowerCase().trim();t===L.RANDOM_VALUE&&(t=W.randomKey(ti));var i=ti[t];if(void 0===i)throw new RangeError("Incorrect parameter: "+e.value);e.value=i,e.spriteIndex=kt.protaganistSpriteIndex||0,kt.setSpriteSpeed(e)},kt.setSpriteSize=function(e){var t=kt.sprite[e.spriteIndex];if(t.size!==e.value){t.size=e.value;var i=t.value;"hidden"!==i&&(t.image=void 0,t.legacyImage=void 0,kt.setSprite({spriteIndex:e.spriteIndex,value:i}),t.bubbleVisible&&ri(e.spriteIndex,t.bubbleText))}},kt.changeScore=function(e){kt.adjustScore(kt.paramAsNumber(e.value))},kt.reduceScore=function(e){kt.adjustScore(-1*kt.paramAsNumber(e.value))},kt.setScore=function(e){kt.adjustScore(kt.paramAsNumber(e)-kt.playerScore)},kt.paramAsNumber=function(e){if("number"!=typeof e&&("string"!=typeof e||isNaN(e)))throw new TypeError("Incorrect parameter: "+e);return Number(e)},kt.adjustScore=function(e){kt.playerScore+=e,kt.displayFloatingScore(e),kt.playerScore-e<1e3&&kt.playerScore>=1e3&&u("whenScore1000")},kt.setScoreText=function(e){kt.scoreText=e.text,kt.displayScore()},kt.setVictoryText=function(e){kt.victoryText=e.text,kt.displayVictoryText()},kt.endGame=function(e){if("string"!=typeof e.value)throw new TypeError("Incorrect parameter: "+e.value);var t=e.value.toLowerCase().trim();if("win"===t)kt.trackedBehavior.hasWonGame=!0,kt.setVictoryText({text:Ze.default.winMessage()});else{if("lose"!==t)throw new RangeError("Incorrect parameter: "+e.value);kt.trackedBehavior.hasLostGame=!0,kt.setVictoryText({text:Ze.default.loseMessage()})}kt.gameState=kt.GameStates.OVER},kt.setBackground=function(e){if("string"!=typeof e.value)throw new TypeError("Incorrect parameter: "+e.value);var t=e.value.toLowerCase().trim();if(t===L.RANDOM_VALUE){t=Ct.backgroundChoicesK1[Math.floor(Math.random()*(Ct.backgroundChoicesK1.length-1))][1].replace(/^"(.*)"$/,"$1")}var i=Ct[t];if(!i)throw new RangeError("Incorrect parameter: "+e.value);if(t!==kt.background){kt.background=t,kt.walls.setBackground(t);document.getElementById("background").setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i.background),kt.wallMapCollisions&&kt.wallMapRequested&&kt.setMap({value:kt.wallMapRequested,forceRedraw:!0}),kt.loadClouds()}},kt.setMap=function(e){if("string"!=typeof e.value)throw new TypeError("Incorrect parameter: "+e.value);var t=e.value.toLowerCase().trim();if(t===L.RANDOM_VALUE){t=Ct.mapChoices[Math.floor(1+Math.random()*(Ct.mapChoices.length-1))][1].replace(/^"(.*)"$/,"$1")}var i;if(!(null===(i="default"===t?null:Ct.getMap?Ct.getMap(kt.background,t):t)||Ct[i]||Ct.wallMaps&&Ct.wallMaps[i]))throw new RangeError("Incorrect parameter: "+e.value);(e.forceRedraw||i!==kt.wallMap||e.color&&e.color!==kt.wallColor)&&(kt.wallMap=i,kt.wallMapCollisions=!0,kt.walls.setWallMapRequested(i),kt.wallMapRequested=e.value,e.color&&kt.wallColor!==e.color&&(kt.wallColor=e.color,kt.walls.setColor(e.color)),(0,F.default)(".tileClip").remove(),(0,F.default)(".tile").remove(),kt.tiles=[],kt.drawMapTiles(),kt.fixSpriteLocation(),p())},kt.fixSpriteLocation=function(){if(kt.wallMapCollisions)for(var e=0;e<kt.sprite.length;e++){var t=kt.sprite[e],i=Ft(e,!1);if(kt.willSpriteTouchWall(t,i.x,i.y)){var o=i.x+t.width/2,n=i.y+t.height/2;o+=Ct.wallCollisionRectOffsetX+Ct.wallCollisionRectWidth/2,n+=Ct.wallCollisionRectOffsetY+Ct.wallCollisionRectHeight/2;for(var a=Math.floor(o/kt.SQUARE_SIZE),r=Math.floor(n/kt.SQUARE_SIZE),l=Math.max(r-1,0),s=Math.min(r+1,kt.ROWS-1),u=Math.max(a-1,0),d=Math.min(a+1,kt.COLS-1),c=l;c<=s;c++)for(var p=u;p<=d;p++){var m=kt.HALF_SQUARE+kt.SQUARE_SIZE*p-t.width/2-Ct.wallCollisionRectOffsetX,h=kt.HALF_SQUARE+kt.SQUARE_SIZE*c-t.height/2-Ct.wallCollisionRectOffsetY;if(!kt.willSpriteTouchWall(t,m,h))return t.x=m,t.y=h,void t.setDirection(ht.NONE)}}}},kt.setSprite=function(e){if("string"!=typeof e.value)throw new TypeError("Incorrect parameter: "+e.value);var t=e.value.toLowerCase().trim();t===L.RANDOM_VALUE&&(t=Ct.avatarList[Math.floor(Math.random()*Ct.avatarList.length)]);var i=Ct[t];if(!i&&"hidden"!==t&&"visible"!==t)throw new RangeError("Incorrect parameter: "+e.value);var o=e.spriteIndex;if(o<0||o>=kt.spriteCount)throw new RangeError("Incorrect parameter: "+o);var n=kt.sprite[o];if(n.visible="hidden"!==t&&!e.forceHidden,n.value=e.forceHidden?"hidden":t,"hidden"!==t&&"visible"!==t){n.imageName=t,n.frameCounts=i.frameCounts,n.setNormalFrameDuration(i.animationFrameDuration),n.drawScale=W.valueOr(i.drawScale,1),Ct.gridAlignedMovement?(n.height=n.width=kt.SQUARE_SIZE,n.size=n.width/Ct.spriteWidth,n.drawHeight=n.drawScale*n.size*Ct.spriteHeight,n.drawWidth=n.drawScale*n.size*Ct.spriteWidth):(n.drawHeight=n.height=n.drawScale*n.size*Ct.spriteHeight,n.drawWidth=n.width=n.drawScale*n.size*Ct.spriteWidth),Ct.projectileSpriteHeight&&(n.projectileSpriteHeight=n.size*Ct.projectileSpriteHeight),Ct.projectileSpriteWidth&&(n.projectileSpriteWidth=n.size*Ct.projectileSpriteWidth),n.setImage(i.walk,n.frameCounts),n.setLegacyImage(i.sprite,n.frameCounts),n.createElement(document.getElementById("spriteLayer"));var a=n.getLegacyElement();if(a&&Le.default.addMouseDownTouchEvent(n.getLegacyElement(),Bt(this,kt.onSpriteClicked,o)),a=n.getElement(),a&&Le.default.addMouseDownTouchEvent(n.getElement(),Bt(this,kt.onSpriteClicked,o)),kt.movementAudioOff(),!kt.movementAudioEffects[t]&&Ct.avatarList){var r=Ct[t]||{},l=r.movementAudio||[];kt.movementAudioEffects[t]=[],kt.movementAudioEffects[t]=l.map(function(e){return new Ie.default(at.default.getSingleton(),e)})}kt.currentSpriteMovementAudioEffects=kt.movementAudioEffects[t],kt.displaySprite(o)}},kt.getSpriteVisibility=function(e){var t=kt.sprite[e.spriteIndex].visible;kt.queueCallback(e.callback,[t])},kt.getSpriteValue=function(e){var t=kt.sprite[e.spriteIndex].value;kt.queueCallback(e.callback,[t])};var ii=!1;kt.isMovementAudioOn=function(){return ii},kt.movementAudioOn=function(){kt.movementAudioOff(),kt.currentMovementAudio=kt.currentSpriteMovementAudioEffects[Math.floor(Math.random()*kt.currentSpriteMovementAudioEffects.length)],kt.currentMovementAudio&&kt.currentMovementAudio.on(),ii=!0},kt.movementAudioOff=function(){kt.currentMovementAudio&&kt.currentMovementAudio.off(),ii=!1};var oi=function(e,t){return e+" "+t+" "},ni=function(e,t,i,o,n,a,r,l){var s="M"+oi(e+n,t);return a||(r?(s+="L"+oi(e+n+l,t),s+="L"+oi(e+n-10+l,t-15)+"L"+oi(e+n+25+l,t)):(s+="L"+oi(e+i-n-25-l,t)+"L"+oi(e+i-10-l,t-15),s+="L"+oi(e+i-n-l,t))),s+="L"+oi(e+i-n,t),s+="Q"+oi(e+i,t)+oi(e+i,t+n),s+="L"+oi(e+i,t+o-n)+"Q"+oi(e+i,t+o)+oi(e+i-n,t+o),a&&(r?(s+="L"+oi(e+n+25+l,t+o)+"L"+oi(e+n-10+l,t+o+15),s+="L"+oi(e+n+l,t+o)):(s+="L"+oi(e+i-n-l,t+o),s+="L"+oi(e+i-10-l,t+o+15)+"L"+oi(e+i-n-25-l,t+o))),s+="L"+oi(e+n,t+o),s+="Q"+oi(e,t+o)+oi(e,t+o-n),s+="L"+oi(e,t+n)+"Q"+oi(e,t)+oi(e+n,t),s+="Z"},ai=function(e){e.complete||(e.waitCallback&&e.waitCallback(),e.complete=!0)};kt.wait=function(e){return e.started||(e.started=!0,"click"===e.value?e.waitForClick=!0:e.waitTimeout=window.setTimeout(Bt(this,ai,e),e.value)),e.complete},kt.hideTitleScreen=function(e){var t=document.getElementById("titleScreenTitle"),i=document.getElementById("titleScreenTextGroup");t.setAttribute("visibility","hidden"),i.setAttribute("visibility","hidden"),e.complete=!0},kt.showTitleScreen=function(e){if(!e.started){e.started=!0;var t=document.getElementById("titleScreenTitle"),i=document.getElementById("titleScreenTextGroup"),o=document.getElementById("titleScreenText"),n=document.getElementById("titleScreenTextRect");t.textContent=e.title;var a={svgText:o,text:e.text,width:360,maxWidth:360,lineHeight:24,topMargin:5,sideMargin:20,maxLines:7,fullHeight:188},r=Lt(a).height;n.setAttribute("height",r),t.setAttribute("visibility","visible"),i.setAttribute("visibility","visible"),e.waitForClick=!0,e.waitCallback=Bt(this,kt.hideTitleScreen,e),e.waitTimeout=window.setTimeout(Bt(this,ai,e),5e3)}return e.complete},kt.isCmdCurrentInQueue=function(e,t){var i=!1;return kt.eventHandlers.forEach(function(o){if(o.name===t){var n=o.cmdQueue[0];n&&n.name===e&&(i=!0)}}),i},kt.queueCallback=function(e,t){var i="callbackQueue"+kt.callbackQueueIndex;kt.callbackQueueIndex++,t=t||[""];var o=t.map(function(e){return kt.interpreter.createPrimitive(e)}),n={node:{type:"CallExpression",arguments:o,end:1},doneCallee_:!0,func_:e,arguments_:o,n_:o.length};Xt(kt.eventHandlers,i,function(){n.arguments_.length>0&&(n.value=n.arguments_.pop());var e=kt.interpreter.pushStackFrame(n);for(kt.interpreter.paused_=!1;kt.interpreter.getStackDepth()>=e;)kt.interpreter.step();kt.interpreter.paused_=!0}),u(i)},kt.askForInput=function(e,t){function i(e){kt.resumeExecution(),kt.hideInputPrompt(),kt.queueCallback(t,[e])}kt.pauseExecution();var o=document.getElementById("visualization"),n=document.createElement("div");Object.assign(n.style,{position:"absolute",top:0,left:0,width:"400px",height:"400px"}),o.appendChild(n),(0,Je.singleton)().resizeVisualization(),kt.inputPromptElement=n,Se.default.render(_e.default.createElement(oe.default,{question:e,onInputReceived:i}),n)},kt.hideInputPrompt=function(){var e=kt.inputPromptElement;e&&(Se.default.unmountComponentAtNode(e),e.parentNode.removeChild(e),kt.inputPromptElement=null)},kt.hideSpeechBubble=function(e){var t=document.getElementById("speechBubble"+e.spriteIndex);t.setAttribute("visibility","hidden"),t.removeAttribute("onTop"),t.removeAttribute("onRight"),t.removeAttribute("height"),e.complete=!0,kt.sprite[e.spriteIndex].bubbleVisible=!1,delete kt.sprite[e.spriteIndex].bubbleTimeoutFunc,kt.sayComplete++},kt.saySprite=function(e){if(e.started)return e.complete;var t=e.spriteIndex,i=kt.sprite[t];if(i){if(e.started=!0,i.bubbleTimeoutFunc&&i.bubbleTimeoutFunc(),window.clearTimeout(i.bubbleTimeout),!i.visible)return e.complete=!0,e.complete;ri(t,e.text),kt.displaySprite(e.spriteIndex);return document.getElementById("speechBubble"+t).setAttribute("visibility","visible"),i.bubbleVisible=!0,i.bubbleText=e.text,i.bubbleTimeoutFunc=Bt(this,kt.hideSpeechBubble,e),i.bubbleTimeout=window.setTimeout(i.bubbleTimeoutFunc,1e3*e.seconds),e.complete}};var ri=function(e,t){var i=document.getElementById("speechBubbleText"+e),o=kt.sprite[e],n=(kt.MAZE_HEIGHT-o.height)/2,a=Math.floor((n-10-10)/20),r={svgText:i,text:t,width:180,maxWidth:380,lineHeight:20,topMargin:5,sideMargin:10,maxLines:a,fullHeight:20*a+10+10},l=Lt(r),s=document.getElementById("speechBubblePath"+e);s.setAttribute("height",l.height),s.setAttribute("width",l.width),ei(s)};kt.stop=function(e){if(jt(e.spriteIndex,!0),jt(e.spriteIndex,!1),kt.sprite[e.spriteIndex].setActivity(L.BEHAVIOR_STOP),!e.dontResetCollisions){var t=kt.sprite[e.spriteIndex];if(!t)return;t.clearCollisions();for(var i=0;i<kt.spriteCount;i++)i!==e.spriteIndex&&kt.sprite[i].endCollision(e.spriteIndex)}},kt.throwProjectile=function(e){if(e.started)return e.complete;e.started=!0,e.complete=!1,window.setTimeout(function(){e.complete=!0},500);var t=kt.sprite[e.spriteIndex];if(t.visible){var i=Ct.preventProjectileLoop&&Ct.preventProjectileLoop(e.className),o={frames:C(e.className,Ct.specialProjectileProperties,Ct.projectileFrames),className:e.className,dir:e.dir,image:Ct[e.className],loop:!i,spriteX:t.x,spriteY:t.y,spriteHeight:t.projectileSpriteHeight||t.height,spriteWidth:t.projectileSpriteWidth||t.width},n=new fe.default(o);n.createElement(document.getElementById("svgStudio")),kt.projectiles.push(n)}};var li=function(e,t){if("bounce"===t)e.bounce();else{if("disappear"!==t)throw"unknown action in doMakeProjectile";e.removeElement();var i=kt.projectiles.indexOf(e);if(-1!==i)return kt.projectiles.splice(i,1),!0}return!1};kt.makeProjectile=function(e){if(e.eventObject)li(e.eventObject,e.action);else for(var t=0;t<kt.projectiles.length;t++)kt.projectiles[t].className===e.className&&li(kt.projectiles[t],e.action)&&t--},kt.collideItemWith=function(e,t,i){e.startCollision(t)&&O(e.className,t,i)},kt.collideSpriteWith=function(e,t,i){kt.sprite[e].startCollision(t)&&P(e,t,i)},kt.setSpritePosition=function(e){var t=kt.sprite[e.spriteIndex];e.value&&(e.x=W.xFromPosition(e.value,kt.MAZE_WIDTH,t.width),e.y=W.yFromPosition(e.value,kt.MAZE_HEIGHT,t.height));var i=t.x===e.x&&t.y===e.y;kt.stop({spriteIndex:e.spriteIndex,dontResetCollisions:i}),t.displayX=t.x=e.x,t.displayY=t.y=e.y,t.setDirection(ht.NONE)},kt.setSpriteXY=function(e){var t=kt.sprite[e.spriteIndex],i=e.x-t.width/2,o=e.y-t.height/2,n=t.x===i&&t.y===o;kt.stop({spriteIndex:e.spriteIndex,dontResetCollisions:n}),t.displayX=t.x=i,t.displayY=t.y=o,t.setDirection(ht.NONE)},kt.getSpriteXY=function(e){var t=kt.sprite[e.spriteIndex];kt.queueCallback(e.callback,[t.x,t.y])},kt.setSpriteBehavior=function(e){kt.sprite[e.spriteIndex].setActivity(e.behavior,e.targetSpriteIndex)},kt.setSpritesWander=function(e){B(e.spriteName).forEach(function(e){return e.setActivity(L.BEHAVIOR_WANDER)})},kt.setSpritesStop=function(e){B(e.spriteName).forEach(function(e){return e.setActivity(L.BEHAVIOR_STOP)})},kt.setSpritesChase=function(e){B(e.spriteName).forEach(function(t){return t.setActivity(L.BEHAVIOR_CHASE,e.targetSpriteIndex)})},kt.setSpritesFlee=function(e){B(e.spriteName).forEach(function(t){return t.setActivity(L.BEHAVIOR_FLEE,e.targetSpriteIndex)})},kt.setSpritesSpeed=function(e){B(e.spriteName).forEach(function(t){return t.speed=e.speed})},kt.addGoal=function(e){if(e.value){var t={width:W.valueOr(Ct.goalSpriteWidth,kt.MARKER_WIDTH),height:W.valueOr(Ct.goalSpriteHeight,kt.MARKER_HEIGHT)};e.x=W.xFromPosition(e.value,kt.MAZE_WIDTH,t.width),e.y=W.yFromPosition(e.value,kt.MAZE_HEIGHT,t.height)}var i={finished:!1,x:e.x,y:e.y};kt.createGoalElements(kt.allGoals_().length,i),kt.dynamicSpriteGoals_.push(i),p()},kt.getPlayspaceBoundaries=function(e){return Ct.wallCollisionRectWidth&&Ct.wallCollisionRectHeight&&!Ct.gridAlignedMovement?{top:0-(e.height-Ct.wallCollisionRectHeight)/2-Ct.wallCollisionRectOffsetY,right:kt.MAZE_WIDTH-Ct.wallCollisionRectWidth-(e.width-Ct.wallCollisionRectWidth)/2-Ct.wallCollisionRectOffsetX,bottom:kt.MAZE_HEIGHT-Ct.wallCollisionRectHeight-(e.height-Ct.wallCollisionRectHeight)/2-Ct.wallCollisionRectOffsetY,left:0-(e.width-Ct.wallCollisionRectWidth)/2-Ct.wallCollisionRectOffsetX}:{top:0,right:kt.MAZE_WIDTH-e.width,bottom:kt.MAZE_HEIGHT-e.height,left:0}},kt.getSkin=function(){return Ct},kt.yieldGridAlignedTicks=function(){kt.yieldExecutionTicks+=1+kt.gridAlignedExtraPauseSteps,kt.JSInterpreter&&(kt.JSInterpreter.yield(),kt.JSInterpreter.selectCurrentCode()),kt.movementAudioOn()},kt.turnSingle=function(e){if(!Ct.gridAlignedMovement)throw new TypeError("Studio.turnSingle is only valid in grid-aligned mode");var t=kt.sprite[e.spriteIndex];t.lastMove=kt.tickCount,t.setActivity(L.BEHAVIOR_GRID_ALIGNED),t.addAction(new Qe.GridTurn(e.dir,Ct.slowExecutionFactor)),kt.yieldGridAlignedTicks(),kt.lastMoveSingleDir=e.dir},kt.moveSingle=function(e){var t=kt.sprite[e.spriteIndex];t.lastMove=kt.tickCount;var i=Ct.gridAlignedMovement?kt.SQUARE_SIZE:t.speed,o=!1,n=!1,a=0,r=0;switch(e.dir){case ht.NORTH:r=-i;break;case ht.EAST:a=i;break;case ht.SOUTH:r=i;break;case ht.WEST:a=-i}e.backward&&(a*=-1,r*=-1);var l=t.x+a,s=t.y+r;if(kt.wallMapCollisions&&kt.willSpriteTouchWall(t,l,s)&&(o=!0,kt.throttledCollideSpriteWithWallFunctions[e.spriteIndex]()),!kt.allowSpritesOutsidePlayspace&&kt.willSpriteLeavePlayspace(t,l,s)&&(n=!0),Ct.gridAlignedMovement)t.setActivity(L.BEHAVIOR_GRID_ALIGNED),o||n?t.addAction(new Qe.GridMoveAndCancel(a,r,Ct.slowExecutionFactor,e.backward)):t.addAction(new Qe.GridMove(a,r,Ct.slowExecutionFactor,e.backward)),kt.yieldGridAlignedTicks();else{if(!o){if(n){var u=kt.getPlayspaceBoundaries(t);l=Math.max(u.left,Math.min(u.right,l)),s=Math.max(u.top,Math.min(u.bottom,s))}t.x=l,t.y=s}kt.isMovementAudioOn()||kt.movementAudioOn()}kt.lastMoveSingleDir=e.dir},kt.moveDistance=function(e){return e.started||(e.started=!0,Ct.gridAlignedMovement&&(e.distance=Math.ceil(e.distance/kt.SQUARE_SIZE)*kt.SQUARE_SIZE),e.queuedDistance=e.distance),0===e.queuedDistance},kt.onEvent=function(e){Xt(kt.eventHandlers,e.eventName,e.func)},kt.allWhenRunBlocksComplete=function(){for(var e=0;e<kt.eventHandlers.length;e++)if("whenGameStarts"===kt.eventHandlers[e].name&&0!==kt.eventHandlers[e].cmdQueue.length)return!1;return!0},kt.timedOut=function(){if(Et.timeoutAfterWhenRun){if(Et.editCode)return kt.JSInterpreter&&kt.JSInterpreter.startedHandlingEvents;if(0===kt.eventHandlers.length||1===kt.eventHandlers.length&&"whenGameStarts"===kt.eventHandlers[0].name&&kt.allWhenRunBlocksComplete())return!0}return kt.tickCount>kt.timeoutFailureTick},kt.allGoalsVisited=function(){var e,t=kt.sprite[kt.protagonistSpriteIndex],i=0;if(0===kt.allGoals_().length)return!1;if(kt.protagonistSpriteIndex&&!t)return!1;kt.allGoals_().forEach(function(o){if(!o.finished){if(t){var n=o.finished;if(o.finished=U(t,o),!n&&o.finished){var a="whenSpriteCollided-"+kt.protagonistSpriteIndex+"-";u(a+"anything",!1),u(a+"goal",!1)}}else{o.finished=!1;for(var r=0;r<kt.sprite.length;r++)if(kt.sprite[r].visible&&U(kt.sprite[r],o)){o.finished=!0,Ct.fadeOutGoal&&(o.startFadeTime=(new Date).getTime()),u("whenTouchGoal"),u("whenSpriteCollided-"+r+"-goal");break}}e=o.finished}if(o.finished&&(i++,e&&(i!==kt.spriteGoals_.length||Ct.playFinalGoalSound)&&kt.playSound({soundName:"flag"}),Ct.goalSuccess)){var l=Ct.goalSuccess;Et.goalOverride&&Et.goalOverride.successImage&&(l=Ct[Et.goalOverride.successImage]),o.marker.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l)}});var o=i===kt.allGoals_().length;return o&&!kt.touchAllGoalsEventFired&&(kt.touchAllGoalsEventFired=!0,u("whenTouchAllGoals")),o},kt.conditionSatisfied=function(e){for(var t=kt.trackedBehavior,i=Object.keys(e),o=0;o<i.length;o++){var n=i[o],a=e[n];if("timedOut"===n&&t.timedOut!==a)return!1;if("collectedItemsAtOrAbove"===n&&t.removedItemCount<a)return!1;if("collectedItemsBelow"===n&&t.removedItemCount>=a)return!1;if("collectedSpecificItemsAtOrAbove"===n&&(void 0===t.removedItems[a.className]||t.removedItems[a.className]<a.count))return!1;if("collectedSpecificItemsBelow"===n&&void 0!==t.removedItems[a.className]&&t.removedItems[a.className]>=a.count)return!1;if("createdSpecificItemsAtOrAbove"===n&&(void 0===t.createdItems[a.className]||t.createdItems[a.className]<a.count))return!1;if("createdSpecificItemsBelow"===n&&void 0!==t.createdItems[a.className]&&t.createdItems[a.className]>=a.count)return!1;if("gotAllItems"===n&&t.gotAllItems!==a)return!1;if("touchedHazardsAtOrAbove"===n&&t.touchedHazardCount<a)return!1;if("currentPointsAtOrAbove"===n&&kt.playerScore<a)return!1;if("currentPointsBelow"===n&&kt.playerScore>=a)return!1;if("allGoalsVisited"===n&&t.allGoalsVisited!==a)return!1;if("setMap"===n&&t.hasSetMap!==a)return!1;if("setSprite"===n&&t.hasSetSprite!==a)return!1;if("setDroidSpeed"===n&&t.hasSetDroidSpeed!==a)return!1;if("throwProjectile"===n&&t.hasThrownProjectile!==a)return!1;if("setEmotion"===n&&t.hasSetEmotion!==a)return!1}return!0},kt.checkProgressConditions=function(){if(!Et.progressConditions)return null;for(var e=0;e<Et.progressConditions.length;e++){var t=Et.progressConditions[e];if(kt.conditionSatisfied(t.required))return t.result}return null};var si=function(){var e=0!==kt.allGoals_().length,t=kt.allGoalsVisited(),i=kt.checkProgressConditions(),o=!(!Et.goal||!Et.goal.successCondition),n=!o||W.valueOr(Et.goal.successCondition(),!0),a=o&&W.valueOr(Et.goal.successCondition(),!1);if(i){kt.result=i.success?pt.ResultType.SUCCESS:pt.ResultType.FAILURE,!i.success&&i.canPass&&(kt.testResults=pt.TestResults.APP_SPECIFIC_ACCEPTABLE_FAIL,kt.progressConditionTestResult=!0);var r=i.message;return(0,Je.singleton)().isUsingBlockly()&&(r=i.blocklyMessage||r),kt.message=W.valueOr(r,null),kt.pauseInterpreter=W.valueOr(i.pauseInterpreter,!1),!0}return e&&t&&n||e&&Et.completeOnSuccessConditionNotGoals&&a||!e&&a?(kt.result=pt.ResultType.SUCCESS,!0):Et.goal&&Et.goal.failureCondition&&Et.goal.failureCondition()?(kt.result=pt.ResultType.FAILURE,!0):!(Et.progressConditions||!kt.timedOut())&&(kt.result=pt.ResultType.FAILURE,!0)}},2946:function(e,t,i){"use strict";var o=i(789),n=i(71);t.SpriteSpeed=o.SpriteSpeed,t.SpriteSize=o.SpriteSize;t.random=function(e){return(0,n.randomValue)(e)},t.endGame=function(e,t){Studio.queueCmd(e,"endGame",{value:t})},t.setBackground=function(e,t){Studio.queueCmd(e,"setBackground",{value:t})},t.setMap=function(e,t){Studio.queueCmd(e,"setMap",{value:t})},t.setMapAndColor=function(e,t,i){Studio.queueCmd(e,"setMapAndColor",{value:i,color:t})},t.setAllowSpritesOutsidePlayspace=function(e,t){Studio.queueCmd(e,"setAllowSpritesOutsidePlayspace",{value:t})},t.setSprite=function(e,t,i){Studio.queueCmd(e,"setSprite",{spriteIndex:t,value:i})},t.getSpriteVisibility=function(e,t,i){Studio.queueCmd(e,"getSpriteVisibility",{spriteIndex:t,callback:i})},t.getSpriteValue=function(e,t,i){Studio.queueCmd(e,"getSpriteValue",{spriteIndex:t,callback:i})},t.saySprite=function(e,t,i,o){void 0===o&&(o=3),Studio.queueCmd(e,"saySprite",{spriteIndex:t,text:i,seconds:o})},t.showTitleScreen=function(e,t,i){Studio.queueCmd(e,"showTitleScreen",{title:t,text:i})},t.setSpriteEmotion=function(e,t,i){Studio.queueCmd(e,"setSpriteEmotion",{spriteIndex:t,value:i})},t.getSpriteEmotion=function(e,t,i){Studio.queueCmd(e,"getSpriteEmotion",{spriteIndex:t,callback:i})},t.setSpriteSpeed=function(e,t,i){Studio.queueCmd(e,"setSpriteSpeed",{spriteIndex:t,value:i})},t.setDroid=function(e,t){Studio.queueCmd(e,"setSprite",{spriteIndex:0,value:t})},t.setDroidSpeed=function(e,t){Studio.queueCmd(e,"setDroidSpeed",{value:t})},t.setSpriteSize=function(e,t,i){Studio.queueCmd(e,"setSpriteSize",{spriteIndex:t,value:i})},t.setSpritePosition=function(e,t,i){Studio.queueCmd(e,"setSpritePosition",{spriteIndex:t,value:Number(i)})},t.setSpriteXY=function(e,t,i,o){Studio.queueCmd(e,"setSpriteXY",{spriteIndex:t,x:Number(i),y:Number(o)})},t.getSpriteXY=function(e,t,i){Studio.queueCmd(e,"getSpriteXY",{spriteIndex:t,callback:i})},t.setSpriteBehavior=function(e,t,i,o){Studio.queueCmd(e,"setSpriteBehavior",{spriteIndex:t,targetSpriteIndex:i,behavior:o})},t.setSpritesWander=function(e,t){Studio.queueCmd(e,"setSpritesWander",{spriteName:t})},t.setSpritesStop=function(e,t){Studio.queueCmd(e,"setSpritesStop",{spriteName:t})},t.setSpritesChase=function(e,t,i){Studio.queueCmd(e,"setSpritesChase",{spriteName:i,targetSpriteIndex:t})},t.setSpritesFlee=function(e,t,i){Studio.queueCmd(e,"setSpritesFlee",{spriteName:i,targetSpriteIndex:t})},t.setSpritesSpeed=function(e,t,i){Studio.queueCmd(e,"setSpritesSpeed",{spriteName:i,speed:t})},t.addGoal=function(e,t){Studio.queueCmd(e,"addGoal",{value:Number(t)})},t.addGoalXY=function(e,t,i){Studio.queueCmd(e,"addGoal",{x:Number(t),y:Number(i)})},t.playSound=function(e,t){Studio.queueCmd(e,"playSound",{soundName:t})},t.stop=function(e,t){Studio.queueCmd(e,"stop",{spriteIndex:t})},t.throwProjectile=function(e,t,i,o){Studio.queueCmd(e,"throwProjectile",{spriteIndex:t,dir:Number(i),className:String(o)})},t.makeProjectile=function(e,t,i){Studio.queueCmd(e,"makeProjectile",{className:t,action:i})},t.move=function(e,t,i){Studio.queueCmd(e,"move",{spriteIndex:t,dir:Number(i)})},t.moveDistance=function(e,t,i,o){Studio.queueCmd(e,"moveDistance",{spriteIndex:t,dir:i,distance:o})},t.moveForward=function(e){Studio.queueCmd(e,"moveForward")},t.moveBackward=function(e){Studio.queueCmd(e,"moveBackward")},t.turnRight=function(e){Studio.queueCmd(e,"turnRight")},t.turnLeft=function(e){Studio.queueCmd(e,"turnLeft")},t.addPoints=function(e,t){Studio.changeScore({value:t}),Studio.queueCmd(e,"displayScore",{})},t.removePoints=function(e,t){Studio.reduceScore({value:t}),Studio.queueCmd(e,"displayScore",{})},t.changeScore=function(e,t){Studio.changeScore({value:t}),Studio.queueCmd(e,"displayScore",{})},t.getScore=function(){return Studio.playerScore},t.setScore=function(e){Studio.setScore(e)},t.addCharacter=function(e,t){Studio.queueCmd(e,"addItem",{className:t})},t.setItemActivity=function(e,t,i){Studio.queueCmd(e,"setItemActivity",{className:t,type:i})},t.setItemSpeed=function(e,t,i){Studio.queueCmd(e,"setItemSpeed",{className:t,speed:i})},t.moveFast=function(e,t){Studio.queueCmd(e,"setItemSpeed",{className:t,speed:o.SpriteSpeed.FAST})},t.moveNormal=function(e,t){Studio.queueCmd(e,"setItemSpeed",{className:t,speed:o.SpriteSpeed.SLOW})},t.moveSlow=function(e,t){Studio.queueCmd(e,"setItemSpeed",{className:t,speed:o.SpriteSpeed.VERY_SLOW})},t.showDebugInfo=function(e){Studio.queueCmd(null,"showDebugInfo",{value:e})},t.setScoreText=function(e,t){Studio.queueCmd(e,"setScoreText",{text:t})},t.showCoordinates=function(e){Studio.queueCmd(e,"showCoordinates",{})},t.wait=function(e,t){Studio.queueCmd(e,"wait",{value:t})},t.vanish=function(e,t){Studio.queueCmd(e,"vanish",{spriteIndex:t})},t.onEvent=function(e,t,i){Studio.queueCmd(e,"onEvent",{eventName:String(t),func:i})},t.askForInput=function(e,t,i){Studio.queueCmd(e,"askForInput",{question:t,callback:i})},t.isKeyDown=function(e){return"keydown"===Studio.keyState[e]}},2947:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=i(2948),s=o(l),u=i(789),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(u),c=i(82),p=o(c),m=i(2949),h=i(2945),f=o(h),g=i(2796),_=o(g),b=i(2797),S=o(b),y=i(71),v=d.Direction,k=d.NextTurn,w=function(e){function t(i){n(this,t);var o=a(this,e.call(this,i));return o.height=i.height||50,o.width=i.width||50,o.className=i.className,void 0===f.default.trackedBehavior.createdItems[o.className]&&(f.default.trackedBehavior.createdItems[o.className]=0),f.default.trackedBehavior.createdItems[o.className]++,o.renderOffset=i.renderOffset||{x:0,y:0},o.speed=i.speed||d.DEFAULT_ITEM_SPEED,o.normalSpeed=i.normalSpeed||d.DEFAULT_ITEM_SPEED,o.normalFrameDuration=i.animationFrameDuration||d.DEFAULT_ITEM_ANIMATION_FRAME_DURATION,o.displayDir=v.SOUTH,o.startFadeTime=null,o.fadeTime=d.ITEM_FADE_TIME,o.targetSpriteIndex=0,o.animation_=new _.default(Object.assign({},i,{spriteSheet:new S.default({assetPath:i.image,defaultFramesPerAnimation:i.frames,frameWidth:o.width,frameHeight:o.height,animations:[{type:"direction",count:8},{type:"idle",count:1}]}),animationFrameDuration:o.getAnimationFrameDuration()})),o}return r(t,e),t.prototype.getElement=function(){return this.animation_.getElement()},t.prototype.getDirectionFrame=function(){return this.dir!==this.displayDir&&void 0!==this.displayDir&&f.default.tickCount&&0==f.default.tickCount%2&&(this.displayDir=k[this.displayDir][this.dir]),(this.spritesCounterclockwise?d.frameDirTableWalkingWithIdleCounterclockwise:d.frameDirTableWalkingWithIdleClockwise)[this.displayDir]},t.prototype.createElement=function(e){this.animation_.createElement(e)},t.prototype.update=function(){void 0===this.gridX&&(this.gridX=Math.floor(this.x/f.default.SQUARE_SIZE),this.gridY=Math.floor(this.y/f.default.SQUARE_SIZE));var e=!1;if(f.default.drawDebugRect("itemCenter",this.x,this.y,3,3),this.activity!==d.BEHAVIOR_WATCH_ACTOR&&this.activity!==d.BEHAVIOR_GRID_ALIGNED){if(this.activity===d.BEHAVIOR_STOP)return this.setDirection(v.NONE),this.destGridX=void 0,void(this.destGridY=void 0);if(this.visible){void 0!==this.destGridX&&f.default.drawDebugRect("roamGridDest",this.destGridX*f.default.SQUARE_SIZE+f.default.HALF_SQUARE,this.destGridY*f.default.SQUARE_SIZE+f.default.HALF_SQUARE,f.default.SQUARE_SIZE,f.default.SQUARE_SIZE);var t=this.getCenterPos();if(void 0!==this.destGridX){var i=(0,y.valueOr)(this.speed,0),o=v.getUnitVector(this.dir),n={x:this.destGridX*f.default.SQUARE_SIZE+f.default.HALF_SQUARE-t.x,y:this.destGridY*f.default.SQUARE_SIZE+f.default.HALF_SQUARE-t.y};o.x*n.x+o.y*n.y<=i&&(this.gridX=this.destGridX,this.gridY=this.destGridY,e=!0)}if(void 0===this.destGridX||e){for(var a=f.default.sprite[this.targetSpriteIndex],r=a.x+a.width/2,l=a.y+a.height/2,s=[],u=[{row:-1,col:0},{row:1,col:0},{row:0,col:-1},{row:0,col:1}],c=0;c<u.length;c++){var m=this.gridX+u[c].col,h=this.gridY+u[c].row;_={gridX:m,gridY:h},_.score=0,this.activity===d.BEHAVIOR_WANDER?_.score++:this.activity===d.BEHAVIOR_CHASE?(h===this.gridY-1&&l<t.y-60?_.score+=2:h===this.gridY+1&&l>t.y+60?_.score+=2:_.score+=1,m===this.gridX-1&&r<t.x-60?_.score++:m===this.gridX+1&&r>t.x+60&&_.score++):this.activity===d.BEHAVIOR_FLEE&&(_.score=1,h===this.gridY-1&&l>t.y-60?_.score++:h===this.gridY+1&&l<t.y+60&&_.score++,m===this.gridX-1&&r>t.x-60?_.score++:m===this.gridX+1&&r<t.x+60&&_.score++),_.score>0&&f.default.drawDebugRect("roamGridPossibleDest",m*f.default.SQUARE_SIZE+f.default.HALF_SQUARE,h*f.default.SQUARE_SIZE+f.default.HALF_SQUARE,f.default.SQUARE_SIZE,f.default.SQUARE_SIZE),s.push(_)}for(var g=s.length-1;g>=0;g--){var _=s[g];(0===_.score||this.atEdge(_)||this.hasWall(_))&&s.splice(g,1)}var b=v.NONE;s.length>0&&(s=p.default.shuffle(s),s.sort(function(e,t){return t.score-e.score}),this.destGridX=s[0].gridX,this.destGridY=s[0].gridY,this.destGridX>this.gridX&&this.destGridY>this.gridY?b=v.SOUTHEAST:this.destGridX>this.gridX&&this.destGridY<this.gridY?b=v.NORTHEAST:this.destGridX<this.gridX&&this.destGridY>this.gridY?b=v.SOUTHWEST:this.destGridX<this.gridX&&this.destGridY<this.gridY?b=v.NORTHWEST:this.destGridX>this.gridX?b=v.EAST:this.destGridX<this.gridX?b=v.WEST:this.destGridY>this.gridY?b=v.SOUTH:this.destGridY<this.gridY&&(b=v.NORTH)),this.setDirection(b)}}}},t.prototype.atEdge=function(e){return e.gridX<0||e.gridX>=f.default.COLS||e.gridY<0||e.gridY>=f.default.ROWS},t.prototype.hasWall=function(e){return f.default.getWallValue(e.gridY,e.gridX)},t.prototype.turnToFaceActor=function(e){var t=f.default.sprite[e];if(t){var i=t.displayX+f.default.HALF_SQUARE,o=t.displayY+f.default.HALF_SQUARE,n=i-this.x,a=o-this.y;n*n+a*a>25&&(f.default.drawDebugLine("watchActor",this.x,this.y,i,o,"#ffff00"),this.setDirection(d.getClosestDirection(n,a)))}},t.prototype.setActivity=function(e,t){this.activity=e,void 0!==t&&(this.targetSpriteIndex=t)},t.prototype.beginRemoveElement=function(){this.startFadeTime=(new Date).getTime()},t.prototype.removeElement=function(){this.animation_.removeElement(),f.default.trackedBehavior.removedItemCount++,void 0===f.default.trackedBehavior.removedItems[this.className]&&(f.default.trackedBehavior.removedItems[this.className]=0),f.default.trackedBehavior.removedItems[this.className]++},t.prototype.getAnimationFrameDuration=function(){return this.dir===v.NONE?this.normalFrameDuration:this.normalFrameDuration*this.normalSpeed/this.speed},t.prototype.isFading=function(){return!!this.startFadeTime},t.prototype.hasCompletedFade=function(){var e=(new Date).getTime();return this.startFadeTime&&e>this.startFadeTime+this.fadeTime},t.prototype.shouldFaceSouthOnIdle=function(){return this.activity!==d.BEHAVIOR_GRID_ALIGNED},t.prototype.display=function(){var e=(new Date).getTime(),t=1;this.startFadeTime&&(t=1-(e-this.startFadeTime)/this.fadeTime,t=Math.max(t,0),this.animation_.setOpacity(t)),this.activity===d.BEHAVIOR_WATCH_ACTOR&&this.turnToFaceActor(f.default.protagonistSpriteIndex||0),this.animation_.setCurrentAnimation("direction",this.getDirectionFrame()),this.animation_.redrawCenteredAt({x:this.x+this.renderOffset.x,y:this.y+this.renderOffset.y},f.default.tickCount)},t.prototype.getCenterPos=function(){return{x:this.x,y:this.y}},t.prototype.shouldMove=function(){return![d.BEHAVIOR_STOP,d.BEHAVIOR_WATCH_ACTOR,d.BEHAVIOR_GRID_ALIGNED].includes(this.activity)},t.prototype.getNextPosition=function(){var e=v.getUnitVector(this.dir),t=this.shouldMove()?this.speed:0;return{x:this.x+t*e.x,y:this.y+t*e.y}},t.prototype.moveToNextPosition=function(){var e=this.getNextPosition();this.x=e.x,this.y=e.y},t.prototype.updateAnimationFrameDuration_=function(){this.animation_.setAnimationFrameDuration(this.getAnimationFrameDuration())},t.prototype.setSpeed=function(e){this.speed=e,this.updateAnimationFrameDuration_()},t.prototype.setDirection=function(e){this.dir=e,this.updateAnimationFrameDuration_()},t.prototype.startCollision=function(t){var i=e.prototype.startCollision.call(this,t);if(i&&this.isHazard&&t===(f.default.protagonistSpriteIndex||0)){f.default.trackedBehavior.touchedHazardCount++;var o=f.default.sprite[t];o&&o.addAction(new m.ShakeActor(d.TOUCH_HAZARD_EFFECT_TIME))}return i},t.prototype.setOpacity=function(e){this.animation_.setOpacity(e)},t}(s.default);t.default=w,e.exports=t.default},2948:function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=i(597),a=i(216),r=function(){function e(t){o(this,e),this.gridX=void 0,this.gridY=void 0,this.activity=a.BEHAVIOR_STOP;for(var i in t)this[i]=t[i];this.visible=this.visible||!0,this.flags=0,this.collidingWith_={},this.frames=this.frames||1,this.actions_=[]}return e.prototype.clearCollisions=function(){this.collidingWith_={}},e.prototype.startCollision=function(e){return!this.isCollidingWith(e)&&(this.collidingWith_[e]=!0,!0)},e.prototype.endCollision=function(e){this.collidingWith_[e]=!1},e.prototype.isCollidingWith=function(e){return!0===this.collidingWith_[e]},e.prototype.outOfBounds=function(){return this.x<-this.width/2||this.x>(0,n.singleton)().MAZE_WIDTH+this.width/2||this.y<-this.height/2||this.y>(0,n.singleton)().MAZE_HEIGHT+this.height/2},e.prototype.addAction=function(e){this.actions_.push(e)},e.prototype.hasActions=function(){return this.actions_.length>0},e.prototype.updateActions=function(){this.actions_.forEach(function(e){e.update(this)},this);for(var e=this.actions_.length-1;e>=0;e--)this.actions_[e].isDone()&&this.actions_.splice(e,1)},e}();t.default=r,e.exports=t.default},2949:function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t,i){i&&(e*=-1,t*=-1);var o=a.Direction.NONE;return e<0?o|=a.Direction.WEST:e>0&&(o|=a.Direction.EAST),t<0?o|=a.Direction.NORTH:t>0&&(o|=a.Direction.SOUTH),o}Object.defineProperty(t,"__esModule",{value:!0}),t.ShakeActor=t.FadeActor=t.GridMoveAndCancel=t.GridMove=t.GridTurn=void 0;var a=i(789),r=i(71);t.GridTurn=function(){function e(t,i){o(this,e),this.towardDir_=t,this.totalSteps_=i,this.elapsedSteps_=0}return e.prototype.update=function(e){0===this.elapsedSteps_&&e.setDirection(this.towardDir_),this.elapsedSteps_++},e.prototype.isDone=function(){return this.elapsedSteps_>=this.totalSteps_},e}(),t.GridMove=function(){function e(t,i,a,r){o(this,e),this.towardDeltaX_=t,this.towardDeltaY_=i,this.totalSteps_=a,this.elapsedSteps_=0,this.direction_=n(t,i,r),this.percentBeforeReverse_=.3}return e.prototype.update=function(e){0===this.elapsedSteps_&&(this.startX_=e.x,this.startY_=e.y,e.x+=this.towardDeltaX_,e.y+=this.towardDeltaY_,e.setDirection(this.direction_));var t=(this.elapsedSteps_+1)/this.totalSteps_;e.displayX=this.startX_+this.towardDeltaX_*t,e.displayY=this.startY_+this.towardDeltaY_*t,this.elapsedSteps_++},e.prototype.isDone=function(){return this.elapsedSteps_>=this.totalSteps_},e}(),t.GridMoveAndCancel=function(){function e(t,i,a,r){o(this,e),this.towardDeltaX_=t,this.towardDeltaY_=i,this.totalSteps_=a,this.elapsedSteps_=0,this.direction_=n(t,i,r),this.percentBeforeReverse_=.3}return e.prototype.update=function(e){0===this.elapsedSteps_&&e.setDirection(this.direction_);var t=(this.elapsedSteps_+1)/this.totalSteps_,i=2*this.percentBeforeReverse_*(t<.5?t:1-t);e.displayX=e.x+this.towardDeltaX_*i,e.displayY=e.y+this.towardDeltaY_*i,this.elapsedSteps_++},e.prototype.isDone=function(){return this.elapsedSteps_>=this.totalSteps_},e}(),t.FadeActor=function(){function e(t){o(this,e),this.startFadeTime_=null,this.fadeDurationMs_=(0,r.valueOr)(t,a.DEFAULT_ACTOR_FADE_TIME)}return e.prototype.update=function(e){this.startFadeTime_||(this.startFadeTime_=(new Date).getTime());var t=(new Date).getTime(),i=1-(t-this.startFadeTime_)/this.fadeDurationMs_;i=Math.max(i,0),e.setOpacity(i)},e.prototype.isDone=function(){var e=(new Date).getTime();return this.startFadeTime_&&e>this.startFadeTime_+this.fadeDurationMs_},e}(),t.ShakeActor=function(){function e(t){o(this,e),this.startShakeTime_=null,this.shakeDurationMs_=(0,r.valueOr)(t,a.SHAKE_DEFAULT_DURATION),this.cycleCount_=a.SHAKE_DEFAULT_CYCLES,this.amplitude_=a.SHAKE_DEFAULT_DISTANCE,this.angularFrequency_=2*Math.PI*(this.cycleCount_/this.shakeDurationMs_)}return e.prototype.update=function(e){this.startShakeTime_||(this.startShakeTime_=(new Date).getTime());var t=(new Date).getTime()-this.startShakeTime_,i=this.amplitude_*Math.sin(this.angularFrequency_*t);e.displayX=e.x+i},e.prototype.isDone=function(){var e=(new Date).getTime();return this.startShakeTime_&&e>this.startShakeTime_+this.shakeDurationMs_},e}()},3302:function(e,t,i){i(151),i(152),e.exports=i(3303)},3303:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=i(3304),a=o(n);(0,o(i(820)).default)().then(a.default)},3304:function(e,t,i){"use strict";(function(o){function n(e){return e&&e.__esModule?e:{default:e}}function a(e){e.skinsModule=f.default,e.blocksModule=c.default,(0,l.default)(u.default,m.default,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=i(853),l=n(r),s=i(2945),u=n(s),d=i(2798),c=n(d),p=i(3320),m=n(p),h=i(2800),f=n(h);window.Studio=u.default,void 0!==o&&(o.Studio=window.Studio),e.exports=t.default}).call(t,i(59))},3305:function(e,t,i){"use strict";var o=i(2794),n=function(e){return e&&e.__esModule?e:{default:e}}(o),a=i(71),r=i(789),l=function(e,t){t=t||{},n.default.apply(this,arguments),this.playerSpriteIndex=0,this.targetSpriteIndex=1,this.dangerSpriteIndex=2,this.finished=!1,this.staticPlayer=(0,a.valueOr)(t.staticPlayer,!1)};l.inherits(n.default),l.prototype.onTick=function(){if(1===this.studio_.tickCount)return this.onFirstTick_(),void(this.studio_.playerScore=100);if(!this.finished){if("visible"!==document.getElementById("titleScreenTitle").getAttribute("visibility")){var e=this.studio_.sprite[this.playerSpriteIndex],t=this.studio_.sprite[this.targetSpriteIndex],i=this.studio_.sprite[this.dangerSpriteIndex];this.updateSpriteX_(this.targetSpriteIndex,this.update_target.bind(this)),this.updateSpriteX_(this.dangerSpriteIndex,this.update_danger.bind(this));for(var o in this.studio_.keyState)"keydown"===this.studio_.keyState[o]&&this.handleUpdatePlayer_(o);for(var n in this.studio_.btnState)this.studio_.btnState[n]&&("leftButton"===n?this.handleUpdatePlayer_(37):"upButton"===n?this.handleUpdatePlayer_(38):"rightButton"===n?this.handleUpdatePlayer_(39):"downButton"===n&&this.handleUpdatePlayer_(40));if(e.visible&&i.visible&&this.collide(e.x,e.y,i.x,i.y)&&(this.studio_.vanishActor({spriteIndex:this.playerSpriteIndex}),setTimeout(function(){this.studio_.setSprite({spriteIndex:this.playerSpriteIndex,value:"visible"})}.bind(this),850),this.studio_.playerScore-=20,this.resetSprite_(i)),e.visible&&t.visible&&this.collide(e.x,e.y,t.x,t.y)&&(this.studio_.playerScore+=10,this.resetSprite_(t)),this.studio_.playerScore<=0){document.getElementById("score").setAttribute("visibility","hidden"),this.studio_.showTitleScreen({title:"Game Over",text:"Click Reset to Play Again"});for(var a=0;a<this.studio_.spriteCount;a++)this.studio_.setSprite({spriteIndex:a,value:"hidden"});this.finished=!0}else this.studio_.displayScore()}}},l.prototype.reset=function(){this.finished=!1},l.prototype.onFirstTick_=function(){var e=function(e,t){e.setBackground(null,this.getVar_("background")),e.setSpritePosition(null,this.playerSpriteIndex,r.Position.MIDDLECENTER),e.setSprite(null,this.playerSpriteIndex,this.getVar_("player")),e.setSpritePosition(null,this.targetSpriteIndex,r.Position.TOPLEFT),e.setSprite(null,this.targetSpriteIndex,this.getVar_("target")),e.setSpritePosition(null,this.dangerSpriteIndex,r.Position.BOTTOMRIGHT),e.setSprite(null,this.dangerSpriteIndex,this.getVar_("danger")),e.showTitleScreen(null,this.getVar_("title"),this.getVar_("subtitle"))}.bind(this);this.studio_.callApiCode("BigGame.onFirstTick",e)},l.prototype.updateSpriteX_=function(e,t){var i=this.studio_.sprite[e],o=i.x+i.width/2,n=t(o);i.x=n-i.width/2,this.onscreen(n)?i.visible||this.studio_.setSprite({spriteIndex:this.studio_.sprite.indexOf(i),value:"visible"}):i.visible&&this.resetSprite_(i)},l.prototype.handleUpdatePlayer_=function(e){var t=this.studio_.sprite[this.playerSpriteIndex];if(t.visible){var i=t.y+t.height/2,o=this.studio_.MAZE_HEIGHT-i,n=this.update_player(e,o);t.y=this.studio_.MAZE_HEIGHT-n-t.height/2,this.staticPlayer&&(t.dir=r.Direction.NONE)}},l.prototype.resetSprite_=function(e){e.dir===r.Direction.EAST?e.x=0-e.width:e.x=this.studio_.MAZE_WIDTH,e.y=Math.floor(Math.random()*(this.studio_.MAZE_HEIGHT-e.height)),this.studio_.setSprite({spriteIndex:this.studio_.sprite.indexOf(e),value:"hidden"})},l.prototype.update_target=function(e){return this.getFunc_("update-target")(e)},l.prototype.update_danger=function(e){return this.getFunc_("update-danger")(e)},l.prototype.update_player=function(e,t){return e=parseInt(e,10),this.getFunc_("update-player")(e,t)},l.prototype.onscreen=function(e){return this.getFunc_("on-screen?")(e)},l.prototype.collide=function(e,t,i,o){return this.getFunc_("collide?")(e,t,i,o)},e.exports=l},3306:function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=i(2795),l=function(e){return e&&e.__esModule?e:{default:e}}(r),s=i(1157),u=8,d="#7F7F7F",c=function(e){function t(i,a,r,l,c,p,m){o(this,t);var h=n(this,e.call(this,i,a,r));return h.width=c,h.height=p,h.drawDebugOverlay=l,h.bytesPerRow=Math.ceil(c/u),h.wallMaps={},Promise.all(Object.keys(a.wallMaps).map(function(e){return(0,s.imageDataFromURI)(a.wallMaps[e].srcUrl).then(function(t){var i=h.wallMapFromImageData(t.data);h.wallMaps[e]={srcData:t,wallColor:d,wallMap:i,overlayURI:h.wallOverlayURI(t,i),srcUrl:a.wallMaps[e].srcUrl}})})).then(function(){m&&m()}).catch(function(e){console.error(e)}),h}return a(t,e),t.prototype.willRectTouchWall=function(e,t,i,o){if(this.wallMaps[this.wallMapRequested]){var n=this.wallMaps[this.wallMapRequested].wallMap;this.drawDebugOverlay(this.wallMaps[this.wallMapRequested].srcUrl);for(var a=Math.max(0,t-o/2),r=Math.min(this.height,a+o),l=Math.max(0,e-i/2),s=Math.min(this.width,l+i),d=Math.floor(l/u),c=Math.floor((s-1)/u),p=a;p<r;p++)for(var m=this.bytesPerRow*p,h=d;h<=c;h++)if(n[m+h]){var f=Math.max(l,h*u),g=Math.min(s,(h+1)*u),_=(1<<g-f)-1<<f%u;if(n[m+h]&_)return!0}}return!1},t.prototype.wallMapFromImageData=function(e){for(var t=new Uint8Array(this.height*this.bytesPerRow),i=0;i<this.height;i++)for(var o=0;o<this.width;o+=u){for(var n=0,a=0;a<u;a++)o+a<this.width&&0===e[4*(i*this.width+o+a)]&&(n|=1<<a);t[i*this.bytesPerRow+o/u]=n}return t},t.prototype.wallOverlayURI=function(e,i){for(var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d,n=e.data,a=t.hexToRgb(o),r=0;r<this.height;r++)for(var l=0;l<this.width;l+=u)for(var c=i[r*this.bytesPerRow+l/u],p=0;p<u;p++){var m=1<<p,h=4*(r*this.width+l+p);c&m?(n[h+0]=a.R,n[h+1]=a.G,n[h+2]=a.B,n[h+3]=255):n[h+3]=0}return(0,s.URIFromImageData)(e)},t.prototype.getWallOverlayURI=function(){var e=this.wallMaps[this.wallMapRequested];return e?e.overlayURI:null},t.prototype.setColor=function(e){var t=this;Object.keys(this.wallMaps).map(function(i){var o=t.wallMaps[i];o.wallColor!==e&&(o.overlayURI=t.wallOverlayURI(o.srcData,o.wallMap,e),o.wallColor=e)})},t.hexToRgb=function(e){if(4===e.length){return{R:17*parseInt(e.substr(1,1),16),G:17*parseInt(e.substr(2,1),16),B:17*parseInt(e.substr(3,1),16)}}return{R:parseInt(e.substr(1,2),16),G:parseInt(e.substr(3,2),16),B:parseInt(e.substr(5,2),16)}},t}(l.default);t.default=c,e.exports=t.default},3307:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}i(71);var n=i(44),a=o(n),r=i(216),l=i(3308),s=o(l),u=function(e){s.default.call(this,e),this.feCompositeLayers_=null,this.curve_=s.default.makeBellCurveOscillation(3e3,3,.1,1)};u.inherits(s.default),e.exports=u,u.prototype.createFilterSteps_=function(){var e=document.createElementNS(r.SVG_NS,"feFlood"),t=this.id_+"-flood-white";e.setAttribute("flood-color",a.default.white),e.setAttribute("result",t);var i=document.createElementNS(r.SVG_NS,"feMorphology"),o=this.id_+"-morphology";i.setAttribute("in","SourceAlpha"),i.setAttribute("operator","dilate"),i.setAttribute("radius",2),i.setAttribute("result",o);var n=document.createElementNS(r.SVG_NS,"feComposite"),l=this.id_+"-silhouette";n.setAttribute("in",t),n.setAttribute("operator","in"),n.setAttribute("in2",o),n.setAttribute("result",l);var s=document.createElementNS(r.SVG_NS,"feGaussianBlur"),u=this.id_+"-blur";s.setAttribute("in",l),s.setAttribute("stdDeviation",1),s.setAttribute("result",u);var d=document.createElementNS(r.SVG_NS,"feComposite"),c=this.id_+"-masked-glow";d.setAttribute("in",u),d.setAttribute("operator","out"),d.setAttribute("in2","SourceAlpha"),d.setAttribute("result",c);var p=document.createElementNS(r.SVG_NS,"feComposite");return p.setAttribute("in","SourceGraphic"),p.setAttribute("operator","arithmetic"),p.setAttribute("in2",c),p.setAttribute("k1",0),p.setAttribute("k2",1),p.setAttribute("k3",0),p.setAttribute("k4",0),this.feCompositeLayers_=p,[e,i,n,s,d,p]},u.prototype.update=function(e){this.feCompositeLayers_&&this.feCompositeLayers_.setAttribute("k3",this.curve_(e))}},3308:function(e,t,i){"use strict";var o=i(71),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(o),a=i(216),r=0,l=function(e){this.svg_=e,this.id_="image-filter-"+r++,this.applyCount_=0,this.intervalId_=null};e.exports=l,l.prototype.applyTo=function(e){this.checkBrowserSupport_()&&(0===this.applyCount_&&this.createInDom_(),e.setAttribute("filter",'url("#'+this.id_+'")'),this.applyCount_++)},l.prototype.removeFrom=function(e){new RegExp("url\\([\"']?#"+this.id_+"[\"']?\\)","i").test(e.getAttribute("filter"))&&(e.removeAttribute("filter"),this.applyCount_--),0===this.applyCount_&&this.removeFromDom_()},l.prototype.update=function(e){},l.prototype.createInDom_=function(){var e=document.getElementById(this.id_);if(!e){e=document.createElementNS(a.SVG_NS,"filter"),e.setAttribute("id",this.id_);this.createFilterSteps_().forEach(function(t){e.appendChild(t)});this.getDefsNode_().appendChild(e),this.intervalId_||(this.intervalId_=window.setInterval(function(){this.update((new Date).getTime())}.bind(this),1e3/30))}},l.prototype.removeFromDom_=function(){this.intervalId_&&(window.clearInterval(this.intervalId_),this.intervalId_=null);var e=document.getElementById(this.id_);e&&e.parentNode.removeChild(e)},l.prototype.createFilterSteps_=function(){return[]},l.prototype.getDefsNode_=function(){var e=this.svg_.querySelector("defs");return e||(e=document.createElementNS(a.SVG_NS,"defs"),this.svg_.appendChild(e)),e},l.prototype.checkBrowserSupport_=function(){return(-1===navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("Chrome"))&&(void 0!==window.SVGFEColorMatrixElement&&2===SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE)},l.makeBellCurveOscillation=function(e,t,i,o){t=n.valueOr(t,2),i=n.valueOr(i,0),o=n.valueOr(o,1);var a=o-i,r=a*Math.pow(2/e,t),l=e/2;return function(o){return i+r*Math.abs(Math.pow(o%e-l,t))}}},3309:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(1),n=function(e){return e&&e.__esModule?e:{default:e}}(o),a={form:{margin:10,background:"#fff",border:"3px solid #000",borderRadius:5},wrapper:{margin:20},question:{fontSize:18},input:{fontSize:18,width:"100%",height:"2em",boxSizing:"border-box"},submit:{fontSize:18}},r=n.default.createClass({displayName:"InputPrompt",propTypes:{question:o.PropTypes.string.isRequired,onInputReceived:o.PropTypes.func.isRequired},handleSubmit:function(e){e.preventDefault(),this.props.onInputReceived(this.refs.answer.value)},componentDidMount:function(){this.refs.answer.focus()},render:function(){return n.default.createElement("form",{style:a.form,onSubmit:this.handleSubmit},n.default.createElement("div",{style:a.wrapper},n.default.createElement("p",{style:a.question},this.props.question),n.default.createElement("input",{ref:"answer",type:"text",style:a.input}),n.default.createElement("input",{type:"submit",className:"btn",style:a.submit})))}});t.default=r,e.exports=t.default},3310:function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=i(2795),l=function(e){return e&&e.__esModule?e:{default:e}}(r),s=function(e){function t(i,a,r){o(this,t);var l=n(this,e.call(this,i,a,r));return l.obstacleZones=a.customObstacleZones,l}return a(t,e),t.prototype.willRectTouchWall=function(e,t,i,o){if(this.obstacleZones[this.background]&&this.obstacleZones[this.background][this.wallMapRequested])for(var n=this.obstacleZones[this.background][this.wallMapRequested],a=0;a<n.length;a++){var r=n[a],l=r.maxX-r.minX+1,s=r.maxY-r.minY+1,u=r.minX+l/2,d=r.minY+s/2;if(this.drawDebugRect("avatarCollision",u,d,l,s),this.overlappingTest(e,u,l/2+i/2,t,d,s/2+o/2))return!0}return!1},t}(l.default);t.default=s,e.exports=t.default},3311:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=i(2948),s=o(l),u=i(2796),d=o(u),c=i(2797),p=o(c),m=i(789),h={};h[m.Direction.EAST]=0,h[m.Direction.SOUTH]=90,h[m.Direction.WEST]=180,h[m.Direction.NORTH]=270,h[m.Direction.NORTHEAST]=45,h[m.Direction.SOUTHEAST]=135,h[m.Direction.SOUTHWEST]=225,h[m.Direction.NORTHWEST]=315;var f={};f[m.Direction.NORTH]={x:.5,y:0},f[m.Direction.EAST]={x:1,y:.5},f[m.Direction.SOUTH]={x:.5,y:1},f[m.Direction.WEST]={x:0,y:.5},f[m.Direction.NORTHEAST]={x:1,y:0},f[m.Direction.SOUTHEAST]={x:1,y:1},f[m.Direction.SOUTHWEST]={x:0,y:1},f[m.Direction.NORTHWEST]={x:0,y:0};var g={};g[m.Direction.NORTH]={x:0,y:-25},g[m.Direction.EAST]={x:25,y:0},g[m.Direction.SOUTH]={x:0,y:25},g[m.Direction.WEST]={x:-25,y:0},g[m.Direction.NORTHEAST]={x:25,y:-25},g[m.Direction.SOUTHEAST]={x:25,y:25},g[m.Direction.SOUTHWEST]={x:-25,y:25},g[m.Direction.NORTHWEST]={x:-25,y:-25};var _=function(e){function t(i){n(this,t);var o=a(this,e.call(this,i));return o.height=i.height||50,o.width=i.width||50,o.speed=i.speed||m.DEFAULT_PROJECTILE_SPEED,o.x=i.spriteX+g[i.dir].x+i.spriteWidth*f[i.dir].x,o.y=i.spriteY+g[i.dir].y+i.spriteHeight*f[i.dir].y,o.spriteSheet_=new p.default({frameWidth:i.spriteWidth,frameHeight:i.spriteHeight,defaultFramesPerAnimation:i.frames,assetPath:i.image,horizontalAnimation:!0,totalAnimations:1}),o.animation_=new d.default(Object.assign({},i,{spriteSheet:o.spriteSheet_,animationFrameDuration:o.getAnimationFrameDuration()})),o}return r(t,e),t.prototype.getElement=function(){return this.animation_.getElement()},t.prototype.createElement=function(e){this.animation_.createElement(e)},t.prototype.getAnimationFrameDuration=function(){return m.DEFAULT_PROJECTILE_ANIMATION_FRAME_DURATION*m.DEFAULT_PROJECTILE_SPEED/this.speed},t.prototype.removeElement=function(){this.animation_.removeElement()},t.prototype.bounce=function(){switch(this.dir){case m.Direction.NORTH:this.dir=m.Direction.SOUTH;break;case m.Direction.WEST:this.dir=m.Direction.EAST;break;case m.Direction.SOUTH:this.dir=m.Direction.NORTH;break;case m.Direction.EAST:this.dir=m.Direction.WEST;break;case m.Direction.NORTHEAST:this.dir=m.Direction.SOUTHWEST;break;case m.Direction.SOUTHEAST:this.dir=m.Direction.NORTHWEST;break;case m.Direction.SOUTHWEST:this.dir=m.Direction.NORTHEAST;break;case m.Direction.NORTHWEST:this.dir=m.Direction.SOUTHEAST}},t.prototype.display=function(){this.animation_.redrawCenteredAt({x:this.x,y:this.y},Studio.tickCount),this.spriteSheet_.defaultFramesPerAnimation>1&&this.getElement().setAttribute("transform","rotate("+h[this.dir]+", "+this.x+", "+this.y+")")},t.prototype.getNextPosition=function(){var e=m.Direction.getUnitVector(this.dir);return{x:this.x+this.speed*e.x,y:this.y+this.speed*e.y}},t.prototype.moveToNextPosition=function(){var e=this.getNextPosition();this.x=e.x,this.y=e.y},t.prototype.setOpacity=function(e){this.animation_.setOpacity(e)},t}(s.default);t.default=_,e.exports=t.default},3312:function(e,t,i){"use strict";var o=i(789),n=i(2794),a=function(e){return e&&e.__esModule?e:{default:e}}(n);i(71);var r=function(e){a.default.apply(this,arguments),this.rocketIndex=0,this.last=Date.now(),this.seconds=0,this.rocket=null,this.height=0,this.SECONDS_TO_RUN=8};r.inherits(a.default),r.prototype.onTick=function(){1===this.studio_.tickCount&&(this.last=Date.now(),this.seconds=0,this.rocket=this.studio_.sprite[this.rocketIndex],this.height=0,this.studio_.setBackground({value:"space"})),Date.now()-this.last<1e3||(this.last=Date.now(),this.seconds++,this.height=this.rocket_height(this.seconds)||0,this.rocket.y=this.studio_.MAZE_HEIGHT-(this.height+this.rocket.height),this.rocket.dir=o.Direction.NONE,this.studio_.scoreText="Time: "+this.seconds+" | Height: "+this.height,this.studio_.displayScore())},r.prototype.rocket_height=function(e){var t=this.resolveCachedBlock_("VALUE");if(t)return t(e)},e.exports=r},3313:function(e,t,i){"use strict";var o=i(789),n=i(2794),a=function(e){return e&&e.__esModule?e:{default:e}}(n);i(71);var r=function(e){a.default.apply(this,arguments),this.samIndex=0,this.sam=null,this.stopped={left:!1,up:!1,right:!1,down:!1}};r.inherits(a.default),r.prototype.onTick=function(){this.sam=this.studio_.sprite[this.samIndex];for(var e in o.KeyCodes)if(this.studio_.keyState[o.KeyCodes[e]]&&"keydown"===this.studio_.keyState[o.KeyCodes[e]])switch(o.KeyCodes[e]){case o.KeyCodes.LEFT:this.updateSam_(o.Direction.WEST);break;case o.KeyCodes.UP:this.updateSam_(o.Direction.NORTH);break;case o.KeyCodes.RIGHT:this.updateSam_(o.Direction.EAST);break;case o.KeyCodes.DOWN:this.updateSam_(o.Direction.SOUTH)}for(var t in this.studio_.btnState)if(this.studio_.btnState[t])switch(t){case"leftButton":this.updateSam_(o.Direction.WEST);break;case"upButton":this.updateSam_(o.Direction.NORTH);break;case"rightButton":this.updateSam_(o.Direction.EAST);break;case"downButton":this.updateSam_(o.Direction.SOUTH)}var i=this.sam.x+this.sam.width/2,n=this.studio_.MAZE_HEIGHT-(this.sam.y+this.sam.height/2);this.studio_.scoreText="("+i+", "+n+")",this.studio_.displayScore()},r.prototype.updateSam_=function(e){var t=this.sam.x+this.sam.width/2,i=this.studio_.MAZE_HEIGHT-(this.sam.y+this.sam.height/2);switch(e){case o.Direction.WEST:this.onscreen(t-this.sam.speed,i)||(e=o.Direction.NONE,this.stopped.left=!0);break;case o.Direction.NORTH:this.onscreen(t,i+this.sam.speed)||(e=o.Direction.NONE,this.stopped.up=!0);break;case o.Direction.EAST:this.onscreen(t+this.sam.speed,i)||(e=o.Direction.NONE,this.stopped.right=!0);break;case o.Direction.SOUTH:this.onscreen(t,i-this.sam.speed)||(e=o.Direction.NONE,this.stopped.down=!0)}this.studio_.moveSingle({spriteIndex:this.samIndex,dir:e})},r.prototype.onscreen=function(e,t){return this.resolveCachedBlock_("VALUE")(e,t)},e.exports=r},3314:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=i(789),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(l),u=i(2947),d=o(u),c=i(2796),p=o(c),m=i(2797),h=o(m),f=i(71),g=s.Direction,_=s.Emotions,b=function(e){function t(i){n(this,t);var o=a(this,e.call(this,i));return o.renderOffset=i.renderOffset||{x:0,y:0},o.speed=i.speed||s.DEFAULT_SPRITE_SPEED,o.setNormalFrameDuration(i.animationFrameDuration),o.displayDir=i.displayDir||g.NONE,o.startFadeTime=null,o.fadeTime=0,o.image=null,o.legacyImage=null,o.animation_=null,o.legacyAnimation_=null,o.useLegacyIdleEmotionAnimations=!1,o.lastDrawPosition={x:0,y:0},o}return r(t,e),t.prototype.setImage=function(e,t){if(e!==this.image){this.image=e;var i={renderScale:this.renderScale,opacity:this.opacity,loop:this.loop,animationFrameDuration:this.animationFrameDuration,frameWidth:this.drawWidth,frameHeight:this.drawHeight,assetPath:this.image,animations:[{type:"direction",count:t.turns||0,frames:t.walkFrames||t.walk},{type:"idle",count:(t.idleNormal||0)+(t.idleEmotions||0),frames:t.idleFrames||t.walk},{type:"walkingEmotions",count:t.walkingEmotions||0,frames:t.walkFrames||t.walk}],packedSheetFrameCount:t.packedSheetFrameCount,defaultFramesPerAnimation:t.walk,skewAnimations:!0};if(this.animation_&&this.animation_.removeElement(),!this.image)return void(this.animation_=null);this.animation_=new p.default(Object.assign({},i,{spriteSheet:new h.default(i),animationFrameDuration:this.getAnimationFrameDuration()}))}},t.prototype.setLegacyImage=function(e,t){if(e!==this.legacyImage){this.legacyImage=e;var i=1+(0,f.valueOr)(t.extraEmotions,0),o=t.normal+t.turns+t.emotions,n={renderScale:this.renderScale,opacity:this.opacity,loop:this.loop,animationFrameDuration:this.animationFrameDuration,frameWidth:this.drawWidth,frameHeight:this.drawHeight,assetPath:this.legacyImage,animations:[{type:"legacyEmotionRow",count:i,frames:o}],defaultFramesPerAnimation:o,horizontalAnimation:!0,skewAnimations:!0};if(this.legacyAnimation_&&this.legacyAnimation_.removeElement(),!this.legacyImage)return void(this.legacyAnimation_=null);this.legacyAnimation_=new p.default(Object.assign({},n,{spriteSheet:new h.default(n),animationFrameDuration:this.getAnimationFrameDuration()}));for(var a,r,l=(0,f.valueOr)(t.turns,0),s=(0,f.valueOr)(t.holdIdleFrame0Count,1),u=0;u<i;u++){for(r=[],a=0;a<s;a++)r.push({type:"legacyEmotionRow",index:u,frame:0});for(a=1;a<t.normal;a++)r.push({type:"legacyEmotionRow",index:u,frame:a});if(this.legacyAnimation_.createSpecialAnimation("idle",u,r),l>=7){var d=0,c=0;for(7===l&&(this.legacyAnimation_.createSpecialAnimation("direction",d,[{type:"legacyEmotionRow",index:u,frame:0}]),d++);d<8;d++,c++)this.legacyAnimation_.createSpecialAnimation("direction",d,[{type:"legacyEmotionRow",index:u,frame:this.frameCounts.normal+c}])}}if(1===i)for(a=0;a<t.emotions;a++){r=[];for(var m=0;m<s;m++)r.push({type:"legacyEmotionRow",index:0,frame:t.normal+t.turns+a});for(var g=1;g<t.normal;g++)r.push({type:"legacyEmotionRow",index:0,frame:g});this.legacyAnimation_.createSpecialAnimation("idle",a+1,r),this.useLegacyIdleEmotionAnimations=!0}}},t.prototype.getElement=function(){return this.animation_?this.animation_.getElement():null},t.prototype.getLegacyElement=function(){return this.legacyAnimation_?this.legacyAnimation_.getElement():null},t.prototype.getDirectionFrame=function(){return(this.frameCounts.counterClockwise?s.frameDirTableWalkingWithIdleCounterclockwise:s.frameDirTableWalkingWithIdleClockwise)[this.displayDir]},t.prototype.createElement=function(e){this.animation_&&(this.animation_.getElement()||this.animation_.createElement(e),this.visible||this.animation_.hide()),this.legacyAnimation_&&(this.legacyAnimation_.getElement()||this.legacyAnimation_.createElement(e),this.visible||this.legacyAnimation_.hide())},t.prototype.update=function(){e.prototype.update.call(this),Studio.drawDebugRect("spriteCenter",this.x,this.y,3,3)},t.prototype.startFade=function(e){this.startFadeTime=(new Date).getTime(),this.fadeTime=(0,f.valueOr)(e,s.DEFAULT_ACTOR_FADE_TIME)},t.prototype.removeElement=function(){this.animation_&&this.animation_.removeElement(),this.legacyAnimation_&&this.legacyAnimation_.removeElement()},t.prototype.getAnimationFrameDuration=function(){return this.dir===g.NONE?this.normalFrameDuration:this.normalFrameDuration*s.DEFAULT_SPRITE_SPEED/this.speed},t.prototype.display=function(){var e=(new Date).getTime(),t=1;this.startFadeTime&&(t=1-(e-this.startFadeTime)/this.fadeTime,t=Math.max(t,0),this.setOpacity(t),this.hasCompletedFade()&&(this.startFadeTime=null));var i,o,n=!1,a=this.displayDir===g.NONE,r=this.displayDir===g.SOUTH&&this.emotion!==_.NORMAL;a||!this.animation_&&r?(o=this.emotion,i="idle",a&&this.frameCounts.normal?n=!0:this.animation_&&!this.frameCounts.idleNormal&&(o-=1)):r&&this.animation_&&this.animation_.hasType("walkingEmotions")?(o=this.emotion-1,i="walkingEmotions"):(o=this.getDirectionFrame(),i="direction"),this.animation_||(n=!0);var l=this.getCurrentDrawPosition();n?(this.animation_&&this.animation_.hide(),this.legacyAnimation_&&(this.legacyAnimation_.setCurrentAnimation(i,o),this.legacyAnimation_.redrawCenteredAt(l,Studio.tickCount),this.visible?this.legacyAnimation_.show():this.legacyAnimation_.hide())):(this.animation_.setCurrentAnimation(i,o),this.animation_.redrawCenteredAt(l,Studio.tickCount),this.visible?this.animation_.show():this.animation_.hide(),this.legacyAnimation_&&this.legacyAnimation_.hide()),this.lastDrawPosition=l},t.prototype.getCenterPos=function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},t.prototype.getCurrentDrawPosition=function(){return{x:this.displayX+this.drawWidth/2+this.renderOffset.x,y:this.displayY+this.drawHeight/2+this.renderOffset.y}},t.prototype.updateAnimationFrameDuration_=function(){this.animation_&&this.animation_.setAnimationFrameDuration(this.getAnimationFrameDuration()),this.legacyAnimation_&&this.legacyAnimation_.setAnimationFrameDuration(this.getAnimationFrameDuration())},t.prototype.setNormalFrameDuration=function(e){this.normalFrameDuration=e||s.DEFAULT_SPRITE_ANIMATION_FRAME_DURATION,this.updateAnimationFrameDuration_()},t.prototype.setOpacity=function(e){this.animation_&&this.animation_.setOpacity(e),this.legacyAnimation_&&this.legacyAnimation_.setOpacity(e)},t.prototype.atEdge=function(e){return e.gridX<0||e.gridX*Studio.SQUARE_SIZE+this.width>Studio.MAZE_WIDTH||e.gridY<0||e.gridY*Studio.SQUARE_SIZE+this.height>Studio.MAZE_HEIGHT},t.prototype.hasWall=function(e){return Studio.willSpriteTouchWall(this,e.gridX*Studio.SQUARE_SIZE,e.gridY*Studio.SQUARE_SIZE)},t}(d.default);t.default=b,e.exports=t.default},3315:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=i(1),a=o(n),r=i(788),l=o(r),s=i(1293),u=o(s),d=i(1912),c=o(d),p=i(1913),m=o(p),h=i(40),f=i(819).default,g=i(1737),_=i(824),b=function(e){return a.default.createElement("span",null,a.default.createElement(l.default,null,a.default.createElement("svg",{version:"1.1",id:"svgStudio"}),a.default.createElement(u.default,{width:400,height:400},a.default.createElement(c.default,null),a.default.createElement(m.default,{providers:[(0,p.coordinatesProvider)()]}))),a.default.createElement(f,null,a.default.createElement(g,null),e.finishButton&&a.default.createElement("div",{id:"share-cell",className:"share-cell-none"},a.default.createElement("button",{id:"finishButton",className:"share"},a.default.createElement("img",{src:"/blockly/media/1x1.gif"}),h.finish()))),a.default.createElement(_,null))};b.propTypes={finishButton:n.PropTypes.bool.isRequired},e.exports=b},3316:function(e,t,i){"use strict";function o(e){a&&console&&console.info&&console.info("Audio: "+e)}var n=i(71),a=!1,r={NONE:"none",BEGIN:"begin",LOOP:"loop",END:"end"},l=function(e,t){t=n.valueOr(t,{}),this.state_=r.NONE,this.audioPlayer_=e,this.beginClipName_=t.begin,this.loopClipName_=t.loop,this.endClipName_=t.end,this.volume_=n.valueOr(t.volume,1)};e.exports=l,l.prototype.on=function(){this.state_!==r.NONE&&this.state_!==r.END||(o("on"),this.enterState_(r.BEGIN))},l.prototype.off=function(){o("off"),this.state_!==r.BEGIN&&this.state_!==r.LOOP||this.enterState_(r.END)},l.prototype.enterState_=function(e){this.exitState_(this.state_),o(this.state_+" -> "+e),this.state_=e;var t=this.whenSoundStopped_.bind(this,e);e===r.BEGIN?this.beginClipName_?this.audioPlayer_.play(this.beginClipName_,{volume:this.volume_,onEnded:t}):this.enterState_(r.LOOP):e===r.LOOP?this.loopClipName_?this.audioPlayer_.play(this.loopClipName_,{volume:this.volume_,loop:!0,onEnded:t}):this.enterState_(r.END):e===r.END&&(this.endClipName_?this.audioPlayer_.play(this.endClipName_,{volume:this.volume_,onEnded:t}):this.enterState_(r.NONE))},l.prototype.exitState_=function(e){e===r.BEGIN&&this.beginClipName_?this.audioPlayer_.stopLoopingAudio(this.beginClipName_):e===r.LOOP&&this.loopClipName_?this.audioPlayer_.stopLoopingAudio(this.loopClipName_):e===r.END&&this.endClipName_&&this.audioPlayer_.stopLoopingAudio(this.endClipName_)},l.prototype.whenSoundStopped_=function(e){o("soundStopped ("+e+")"),e===r.BEGIN&&this.state_===r.BEGIN?this.enterState_(r.LOOP):e===r.END&&this.state_===r.END&&this.enterState_(r.NONE)}},3317:function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=i(2795),l=function(e){return e&&e.__esModule?e:{default:e}}(r),s=function(e){function t(i,a,r,l,s,u,d){o(this,t);var c=n(this,e.call(this,i,a,r));return c.squareSize=l,c.rows=s,c.columns=u,c.getWallValue=d,c}return a(t,e),t.prototype.willRectTouchWall=function(e,t,i,o){for(var n=Math.floor(e)+1,a=Math.floor(t)+1,r=Math.floor(e/this.squareSize),l=Math.floor(t/this.squareSize),s=Math.max(0,r-n);s<Math.min(this.columns,r+n);s++)for(var u=Math.max(0,l-a);u<Math.min(this.rows,l+a);u++)if(this.getWallValue(u,s)&&(this.drawDebugRect("avatarCollision",(s+.5)*this.squareSize,(u+.5)*this.squareSize,this.squareSize,this.squareSize),this.overlappingTest(e,(s+.5)*this.squareSize,this.squareSize/2+i/2,t,(u+.5)*this.squareSize,this.squareSize/2+o/2)))return!0;return!1},t}(l.default);t.default=s,e.exports=t.default},3318:function(e,t,i){"use strict";var o=i(3319),n=i(2799);e.exports.blocks=[{func:"setDroid",parent:o,category:"",params:['"R2-D2"'],dropdown:{0:['"random"','"R2-D2"','"C-3PO"']}},{func:"setDroidSpeed",parent:o,category:"",params:['"fast"'],dropdown:{0:['"random"','"slow"','"normal"','"fast"']}},{func:"setBackground",parent:o,category:"",params:['"Hoth"'],dropdown:{0:['"random"','"Endor"','"Hoth"','"Starship"']}},{func:"setMap",parent:o,category:"",params:['"blank"'],dropdown:{0:['"random"','"blank"','"circle"','"horizontal"','"grid"','"blobs"']}},{func:"moveRight",parent:o,category:""},{func:"moveLeft",parent:o,category:""},{func:"moveUp",parent:o,category:""},{func:"moveDown",parent:o,category:""},{func:"goRight",parent:o,category:""},{func:"goLeft",parent:o,category:""},{func:"goUp",parent:o,category:""},{func:"goDown",parent:o,category:""},{func:"playSound",parent:o,category:"",params:['"R2-D2sound1"'],dropdown:{0:n.playSoundDropdown}},{func:"endGame",parent:o,category:"",params:['"win"'],dropdown:{0:['"win"','"lose"']}},{func:"addPoints",parent:o,category:"",params:["100"]},{func:"removePoints",parent:o,category:"",params:["100"]},{func:"addCharacter",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']}},{func:"moveFast",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']}},{func:"moveNormal",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']}},{func:"moveSlow",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']}},{func:"whenLeft",block:"function whenLeft() {}",expansion:"function whenLeft() {\n  __;\n}",category:""},{func:"whenRight",block:"function whenRight() {}",expansion:"function whenRight() {\n  __;\n}",category:""},{func:"whenUp",block:"function whenUp() {}",expansion:"function whenUp() {\n  __;\n}",category:""},{func:"whenDown",block:"function whenDown() {}",expansion:"function whenDown() {\n  __;\n}",category:""},{func:"whenTouchObstacle",block:"function whenTouchObstacle() {}",expansion:"function whenTouchObstacle() {\n  __;\n}",category:""},{func:"whenGetCharacter",block:"function whenGetCharacter() {}",expansion:"function whenGetCharacter() {\n  __;\n}",category:""},{func:"whenGetStormtrooper",block:"function whenGetStormtrooper() {}",expansion:"function whenGetStormtrooper() {\n  __;\n}",category:""},{func:"whenGetRebelPilot",block:"function whenGetRebelPilot() {}",expansion:"function whenGetRebelPilot() {\n  __;\n}",category:""},{func:"whenGetPufferPig",block:"function whenGetPufferPig() {}",expansion:"function whenGetPufferPig() {\n  __;\n}",category:""},{func:"whenGetMynock",block:"function whenGetMynock() {}",expansion:"function whenGetMynock() {\n  __;\n}",category:""},{func:"whenGetMouseDroid",block:"function whenGetMouseDroid() {}",expansion:"function whenGetMouseDroid() {\n  __;\n}",category:""},{func:"whenGetTauntaun",block:"function whenGetTauntaun() {}",expansion:"function whenGetTauntaun() {\n  __;\n}",category:""},{func:"whenGetProbot",block:"function whenGetProbot() {}",expansion:"function whenGetProbot() {\n  __;\n}",category:""},{func:"whenGetAllCharacters",block:"function whenGetAllCharacters() {}",expansion:"function whenGetAllCharacters() {\n  __;\n}",category:""},{func:"whenGetAllStormtroopers",block:"function whenGetAllStormtroopers() {}",expansion:"function whenGetAllStormtroopers() {\n  __;\n}",category:""},{func:"whenGetAllRebelPilots",block:"function whenGetAllRebelPilots() {}",expansion:"function whenGetAllRebelPilots() {\n  __;\n}",category:""},{func:"whenGetAllPufferPigs",block:"function whenGetAllPufferPigs() {}",expansion:"function whenGetAllPufferPigs() {\n  __;\n}",category:""},{func:"whenGetAllMynocks",block:"function whenGetAllMynocks() {}",expansion:"function whenGetAllMynocks() {\n  __;\n}",category:""},{func:"whenGetAllMouseDroids",block:"function whenGetAllMouseDroids() {}",expansion:"function whenGetAllMouseDroids() {\n  __;\n}",category:""},{func:"whenGetAllTauntauns",block:"function whenGetAllTauntauns() {}",expansion:"function whenGetAllTauntauns() {\n  __;\n}",category:""},{func:"whenGetAllProbots",block:"function whenGetAllProbots() {}",expansion:"function whenGetAllProbots() {\n  __;\n}",category:""},{func:"whenTouchStormtrooper",block:"function whenTouchStormtrooper() {}",expansion:"function whenTouchStormtrooper() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchRebelPilot",block:"function whenTouchRebelPilot() {}",expansion:"function whenTouchRebelPilot() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchPufferPig",block:"function whenTouchPufferPig() {}",expansion:"function whenTouchPufferPig() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchMynock",block:"function whenTouchMynock() {}",expansion:"function whenTouchMynock() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchMouseDroid",block:"function whenTouchMouseDroid() {}",expansion:"function whenTouchMouseDroid() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchTauntaun",block:"function whenTouchTauntaun() {}",expansion:"function whenTouchTauntaun() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchProbot",block:"function whenTouchProbot() {}",expansion:"function whenTouchProbot() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchCharacter",block:"function whenTouchCharacter() {}",expansion:"function whenTouchCharacter() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"changeScore",parent:o,category:"",params:["1"],noAutocomplete:!0},{func:"whenTouchGoal",block:"function whenTouchGoal() {}",expansion:"function whenTouchGoal() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchAllGoals",block:"function whenTouchAllGoals() {}",expansion:"function whenTouchAllGoals() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenScore1000",block:"function whenScore1000() {}",expansion:"function whenScore1000() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"setToChase",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']},noAutocomplete:!0},{func:"setToFlee",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']},noAutocomplete:!0},{func:"setToRoam",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']},noAutocomplete:!0},{func:"setToStop",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']},noAutocomplete:!0},{func:"setSprite",parent:o,category:"",params:["0",'"R2-D2"'],dropdown:{1:['"random"','"R2-D2"','"C-3PO"']},noAutocomplete:!0},{func:"setSpritePosition",parent:o,category:"",params:["0","7"],noAutocomplete:!0},{func:"setSpriteSpeed",parent:o,category:"",params:["0","8"],noAutocomplete:!0},{func:"setSpriteEmotion",parent:o,category:"",params:["0","1"],noAutocomplete:!0},{func:"setSpriteSize",parent:o,category:"",params:["0","1.0"],noAutocomplete:!0},{func:"throwProjectile",parent:o,category:"",params:["0","1",'"blue_fireball"'],noAutocomplete:!0},{func:"vanish",parent:o,category:"",params:["0"],noAutocomplete:!0},{func:"move",parent:o,category:"",params:["0","1"],noAutocomplete:!0},{func:"showDebugInfo",parent:o,category:"",params:["false"],noAutocomplete:!0},{func:"onEvent",parent:o,category:"",params:["'when-left'","function() {\n  \n}"],noAutocomplete:!0}],e.exports.categories={"":{color:"red",blocks:[]},"Play Lab":{color:"red",blocks:[]},Commands:{color:"red",blocks:[]},Events:{color:"green",blocks:[]}},e.exports.autocompleteFunctionsWithSemicolon=!0,e.exports.showParamDropdowns=!0},3319:function(e,t,i){"use strict";t.endGame=function(e){Studio.queueCmd(null,"endGame",{value:e})},t.setBackground=function(e){Studio.queueCmd(null,"setBackground",{value:e})},t.setMap=function(e){Studio.queueCmd(null,"setMap",{value:e})},t.setMapAndColor=function(e,t){Studio.queueCmd(null,"setMapAndColor",{value:t,color:e})},t.setAllowSpritesOutsidePlayspace=function(e){Studio.queueCmd(null,"setAllowSpritesOutsidePlayspace",{value:e})},t.setSprite=function(e,t){Studio.queueCmd(null,"setSprite",{spriteIndex:e,value:t})},t.setSpriteEmotion=function(e,t){Studio.queueCmd(null,"setSpriteEmotion",{spriteIndex:e,value:t})},t.setSpriteSpeed=function(e,t){Studio.queueCmd(null,"setSpriteSpeed",{spriteIndex:e,value:t})},t.setDroid=function(e){Studio.queueCmd(null,"setSprite",{spriteIndex:0,value:e})},t.setDroidSpeed=function(e){Studio.queueCmd(null,"setDroidSpeed",{value:e})},t.setSpriteSize=function(e,t){Studio.queueCmd(null,"setSpriteSize",{spriteIndex:e,value:t})},t.setSpritePosition=function(e,t){Studio.queueCmd(null,"setSpritePosition",{spriteIndex:e,value:t})},t.setSpriteBehavior=function(e,t,i,o){Studio.queueCmd(e,"setSpriteBehavior",{spriteIndex:t,targetSpriteIndex:i,behavior:o})},t.setSpritesWander=function(e,t){Studio.queueCmd(e,"setSpritesWander",{spriteName:t})},t.setSpritesStop=function(e,t){Studio.queueCmd(e,"setSpritesStop",{spriteName:t})},t.setSpritesChase=function(e,t,i){Studio.queueCmd(e,"setSpritesChase",{spriteName:i,targetSpriteIndex:t})},t.setSpritesFlee=function(e,t,i){Studio.queueCmd(e,"setSpritesFlee",{spriteName:i,targetSpriteIndex:t})},t.setSpritesSpeed=function(e,t,i){Studio.queueCmd(e,"setSpritesSpeed",{spriteName:i,speed:t})},t.playSound=function(e){Studio.queueCmd(null,"playSound",{soundName:e})},t.throwProjectile=function(e,t,i){Studio.queueCmd(null,"throwProjectile",{spriteIndex:e,dir:t,className:i})},t.move=function(e,t){Studio.queueCmd(null,"move",{spriteIndex:e,dir:t})},t.moveRight=function(){Studio.queueCmd(null,"moveRight")},t.moveLeft=function(){Studio.queueCmd(null,"moveLeft")},t.moveUp=function(){Studio.queueCmd(null,"moveUp")},t.moveDown=function(){Studio.queueCmd(null,"moveDown")},t.goRight=function(){Studio.queueCmd(null,"moveRight")},t.goLeft=function(){Studio.queueCmd(null,"moveLeft")},t.goUp=function(){Studio.queueCmd(null,"moveUp")},t.goDown=function(){Studio.queueCmd(null,"moveDown")},t.addPoints=function(e){Studio.changeScore({value:e}),Studio.queueCmd(null,"displayScore",{})},t.removePoints=function(e){Studio.reduceScore({value:e}),Studio.queueCmd(null,"displayScore",{})},t.changeScore=function(e){Studio.changeScore({value:e}),Studio.queueCmd(null,"displayScore",{})},t.getScore=function(){return Studio.playerScore},t.setScore=function(e){Studio.setScore(e)},t.addCharacter=function(e){Studio.queueCmd(null,"addItem",{className:e})},t.setToChase=function(e){Studio.queueCmd(null,"setItemActivity",{className:e,type:"chase"})},t.setToFlee=function(e){Studio.queueCmd(null,"setItemActivity",{className:e,type:"flee"})},t.setToRoam=function(e){Studio.queueCmd(null,"setItemActivity",{className:e,type:"roam"})},t.setToStop=function(e){Studio.queueCmd(null,"setItemActivity",{className:e,type:"none"})},t.moveFast=function(e,t){Studio.queueCmd(null,"setItemSpeed",{className:e,speed:"fast"})},t.moveNormal=function(e,t){Studio.queueCmd(null,"setItemSpeed",{className:e,speed:"normal"})},t.moveSlow=function(e,t){Studio.queueCmd(null,"setItemSpeed",{className:e,speed:"slow"})},t.showDebugInfo=function(e){Studio.queueCmd(null,"showDebugInfo",{value:e})},t.vanish=function(e){Studio.queueCmd(null,"vanish",{spriteIndex:e})},t.onEvent=function(e,t){Studio.queueCmd(null,"onEvent",{eventName:e,func:t})}},3320:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){var t={};return e.sprite&&(t.SPRITE=e.sprite),e.requiredText&&(t.TEXT=e.requiredText),e.notDefaultText&&(t.TEXT=p.default.helloWorld()),[{test:function(t){return"studio_saySprite"===t.type&&((!e.sprite||t.getTitleValue("SPRITE")===e.sprite)&&(!e.notDefaultText&&!e.requiredText||t.getTitleValue("TEXT")!==p.default.defaultSayText()))},type:"studio_saySprite",titles:t}]}function a(e){var t={};return e.sprite&&(t.SPRITE=e.sprite),e.dir&&(t.DIR=e.dir),[{test:function(t){return"studio_move"===t.type&&((!e.sprite||t.getTitleValue("SPRITE")===e.sprite)&&(!e.dir||t.getTitleValue("DIR")===e.dir))},type:"studio_move",titles:t}]}function r(){return a({dir:"1"})}function l(){return a({dir:"4"})}function s(){return a({dir:"2"})}function u(){return a({dir:"8"})}var d=i(789),c=i(1706),p=o(c),m=i(71),h=i(743),f=o(h),g=f.default.createToolbox,_=f.default.blockOfType,b=f.default.createCategory,S='<block type="studio_move"><title name="DIR">1</title></block>   <block type="studio_move"><title name="DIR">4</title></block>   <block type="studio_move"><title name="DIR">8</title></block>   <block type="studio_move"><title name="DIR">2</title></block>',y='<block type="when_run"><next>   <block type="studio_move"><title name="DIR">2</title></block></next>   </block>',v='<block type="when_run"><next>   <block type="studio_move"><title name="DIR">4</title></block></next>   </block>',k=_("studio_moveNorthDistance")+_("studio_moveEastDistance")+_("studio_moveSouthDistance")+_("studio_moveWestDistance"),w=e.exports={};w.custom={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},startBlocks:""},w.dog_hello={ideal:2,instructionsImportant:!0,requiredBlocks:[n({notDefaultText:!0})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>0}},timeoutFailureTick:100,toolbox:g(_("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},w.k1_1=(0,m.extend)(w.dog_hello,{isK1:!0,toolbox:g(_("studio_saySprite"))}),w.c2_1=(0,m.extend)(w.dog_hello),w.c3_story_1=(0,m.extend)(w.dog_hello),w.playlab_1=(0,m.extend)(w.dog_hello,{background:"winter",timeoutFailureTick:null,timeoutAfterWhenRun:!0,firstSpriteIndex:2,goal:{successCondition:function(){return Studio.allWhenRunBlocksComplete()&&Studio.sayComplete>0}},requiredBlocks:[n({requiredText:p.default.hello()})]}),w.iceage_hello1=(0,m.extend)(w.playlab_1,{background:"icy5",firstSpriteIndex:1}),w.gumball_hello1=(0,m.extend)(w.playlab_1,{background:"dots",firstSpriteIndex:0}),w.dog_and_cat_hello={ideal:3,requiredBlocks:[n({sprite:"0",notDefaultText:!0}),n({sprite:"1",notDefaultText:!0})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>1}},timeoutFailureTick:200,toolbox:g(_("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},w.k1_2=(0,m.extend)(w.dog_and_cat_hello,{isK1:!0,toolbox:g(_("studio_saySprite"))}),w.c2_2=(0,m.extend)(w.dog_and_cat_hello,{}),w.c3_story_2=(0,m.extend)(w.dog_and_cat_hello,{}),w.playlab_2=(0,m.extend)(w.dog_and_cat_hello,{background:"desert",firstSpriteIndex:20,timeoutFailureTick:null,timeoutAfterWhenRun:!0,defaultEmotion:d.Emotions.HAPPY,goal:{successCondition:function(){return Studio.allWhenRunBlocksComplete()&&Studio.sayComplete>1}},requiredBlocks:[n({sprite:"0",requiredText:p.default.hello()}),n({sprite:"1",requiredText:p.default.hello()})],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}),w.iceage_hello2=(0,m.extend)(w.playlab_2,{background:"icy1",firstSpriteIndex:0}),w.gumball_hello2=(0,m.extend)(w.playlab_2,{background:"dots",firstSpriteIndex:3,defaultEmotion:d.Emotions.NORMAL}),w.dog_move_cat={ideal:2,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2"}}]],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:100,toolbox:g('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+_("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},w.k1_3=(0,m.extend)(w.dog_move_cat,{isK1:!0,requiredBlocks:[[{test:function(e){return"studio_moveEastDistance"===e.type},type:"studio_moveEastDistance"}]],toolbox:g(k+_("studio_saySprite"))}),w.c2_3=(0,m.extend)(w.dog_move_cat,{}),w.c3_story_3=(0,m.extend)(w.dog_move_cat,{}),w.playlab_3={ideal:2,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2",DISTANCE:"200"}}]],timeoutFailureTick:null,timeoutAfterWhenRun:!0,scale:{snapRadius:2},background:"tennis",firstSpriteIndex:26,toolbox:g('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">200</title></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>',map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},w.iceage_move_to_flag=(0,m.extend)(w.playlab_3,{background:"icy3",firstSpriteIndex:2}),w.gumball_move_to_flag=(0,m.extend)(w.playlab_3,{background:"clouds",firstSpriteIndex:2}),w.dog_move_cat_hello={ideal:4,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2",DISTANCE:"100"}}],n({sprite:"1",requiredText:p.default.hello()})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>0&&Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:200,toolbox:g('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+_("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="120"></block>'},w.k1_4=(0,m.extend)(w.dog_move_cat_hello,{isK1:!0,requiredBlocks:[[{test:function(e){return"studio_moveEastDistance"===e.type},type:"studio_moveEastDistance"}],[{test:function(e){return"studio_saySprite"===e.type&&"1"===e.getTitleValue("SPRITE")&&e.getTitleValue("TEXT")!==p.default.defaultSayText()},type:"studio_saySprite",titles:{TEXT:p.default.hello(),SPRITE:"1"}}]],toolbox:g(k+_("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>      <block type="studio_whenSpriteCollided" deletable="false" x="20" y="140"></block>'}),w.c2_4=(0,m.extend)(w.dog_move_cat_hello,{}),w.c3_story_4=(0,m.extend)(w.dog_move_cat_hello,{}),w.playlab_4={ideal:4,scale:{snapRadius:2},background:"tennis",avatarList:["tennisboy","tennisgirl"],defaultEmotion:d.Emotions.SAD,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"4",DISTANCE:"200"}}],[{test:"playSound",type:"studio_playSound",titles:{SOUND:"goal1"}}]],timeoutFailureTick:100,timeoutAfterWhenRun:!0,goal:{successCondition:function(){return Studio.playSoundCount>0&&Studio.sprite[0].isCollidingWith(1)}},toolbox:g('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">200</title></block><block type="studio_playSound"><title name="SOUND">goal1</title></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="120"></block>',map:[[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},w.iceage_move_to_actor=(0,m.extend)(w.playlab_4,{background:"icy3",avatarList:["diego","manny"]}),w.gumball_move_to_actor=(0,m.extend)(w.playlab_4,{background:"space",avatarList:["gumball","darwin"],defaultEmotion:d.Emotions.NORMAL}),w.click_hello={instructionsImportant:!0,ideal:3,requiredBlocks:[n({requiredText:p.default.hello()})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:4,goal:{successCondition:function(){return this.successState.seenCmd||(this.successState.seenCmd=Studio.isCmdCurrentInQueue("saySprite","whenSpriteClicked-0")),Studio.sayComplete>0&&this.successState.seenCmd}},callouts:[{id:"playlab:click_hello:instructions",element_id:"#prompt-table",qtip_config:{content:{text:p.default.calloutInstructions()},position:{my:"bottom left",at:"top right",adjust:{x:-40,y:0}}}}],timeoutFailureTick:300,toolbox:g('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+_("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>     <block type="studio_whenSpriteClicked" deletable="false" x="20" y="120"></block>'},w.c2_5=(0,m.extend)(w.click_hello,{}),w.c3_game_1=(0,m.extend)(w.click_hello,{}),w.playlab_5=(0,m.extend)(w.click_hello,{background:"space",firstSpriteIndex:23,timeoutAfterWhenRun:!0,defaultEmotion:d.Emotions.HAPPY,toolbox:g(_("studio_saySprite")),startBlocks:'<block type="studio_whenSpriteClicked" deletable="false" x="20" y="20"></block>'}),w.iceage_click_hello=(0,m.extend)(w.playlab_5,{background:"icy4",firstSpriteIndex:1}),w.octopus_happy={ideal:2,requiredBlocks:[[{test:"setSpriteEmotion",type:"studio_setSpriteEmotion"}]],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:4,goal:{successCondition:function(){return Studio.sprite[0].emotion===d.Emotions.HAPPY&&Studio.tickCount>=50}},timeoutFailureTick:100,toolbox:g('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+_("studio_setSpriteEmotion")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},w.k1_5=(0,m.extend)(w.octopus_happy,{isK1:!0,toolbox:g(k+_("studio_setSpriteEmotion"))}),w.c3_story_5=(0,m.extend)(w.octopus_happy,{}),w.c3_story_6={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!1,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:g(_("studio_setSprite")+_("studio_setBackground")+_("studio_whenSpriteClicked")+_("studio_whenSpriteCollided")+_("studio_repeatForever")+_("studio_showTitleScreen")+_("studio_move")+_("studio_moveDistance")+_("studio_stop")+_("studio_wait")+_("studio_playSound")+_("studio_saySprite")+_("studio_throw")+_("studio_setSpritePosition")+_("studio_setSpriteSpeed")+_("studio_setSpriteEmotion")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},w.move_penguin={ideal:8,requiredBlocks:[[{test:"move",type:"studio_move"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[1,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,0,0,0,0,1,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,toolbox:g(_("studio_move")+_("studio_saySprite")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20"></block>     <block type="studio_whenRight" deletable="false" x="180" y="20"></block>     <block type="studio_whenUp" deletable="false" x="20" y="120"></block>     <block type="studio_whenDown" deletable="false" x="180" y="120"></block>'},w.c2_6=(0,m.extend)(w.move_penguin,{}),w.c3_game_2=(0,m.extend)(w.move_penguin,{}),w.playlab_6=(0,m.extend)(w.move_penguin,{background:"cave",firstSpriteIndex:5,goalOverride:{goalImage:"red_fireball",successImage:"blue_fireball",imageWidth:800},defaultEmotion:d.Emotions.ANGRY,toolbox:g(_("studio_move",{DIR:8})+_("studio_move",{DIR:2})+_("studio_move",{DIR:1})+_("studio_move",{DIR:4})),map:[[1,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0]]}),w.iceage_move_events=(0,m.extend)(w.playlab_6,{background:"icy5",firstSpriteIndex:2,goalOverride:{}}),w.gumball_click_hello=(0,m.extend)(w.playlab_5,{background:"characters",firstSpriteIndex:1}),w.gumball_move_events=(0,m.extend)(w.playlab_6,{background:"cornered",firstSpriteIndex:3,goalOverride:{},defaultEmotion:d.Emotions.NORMAL}),w.dino_up_and_down={ideal:11,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{SPRITE:"1",DISTANCE:"400"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,protagonistSpriteIndex:1,timeoutFailureTick:150,minWorkspaceHeight:800,toolbox:g('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block><block type="studio_saySprite">          <title name="SPRITE">1</title></block>'),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540"></block>'},w.c2_7=(0,m.extend)(w.dino_up_and_down,{}),w.c3_game_3=(0,m.extend)(w.dino_up_and_down,{}),w.playlab_7={ideal:3,background:"rainbow",firstSpriteIndex:10,scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],defaultEmotion:d.Emotions.HAPPY,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return 252===Studio.tickCount}},timeoutFailureTick:253,minWorkspaceHeight:800,toolbox:g('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">400</title></block>'),startBlocks:'<block type="studio_repeatForever" deletable="false" x="20" y="20"></block>',requiredBlocks:[[{test:function(e){return"studio_moveDistance"===e.type&&"2"===e.getTitleValue("DIR")},type:"studio_moveDistance",titles:{DIR:2,DISTANCE:"400"}}],[{test:function(e){return"studio_moveDistance"===e.type&&"8"===e.getTitleValue("DIR")},type:"studio_moveDistance",titles:{DIR:8,DISTANCE:"400"}}]]},w.iceage_repeat=(0,m.extend)(w.playlab_7,{background:"icy1",firstSpriteIndex:4,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}),w.gumball_repeat=(0,m.extend)(w.playlab_7,{background:"dots",firstSpriteIndex:4,defaultEmotion:d.Emotions.NORMAL,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}),w.penguin_ouch={ideal:14,requiredBlocks:[n({sprite:"0",requiredText:p.default.ouchExclamation()}),[{test:"playSound",type:"studio_playSound"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:900,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:300,toolbox:g('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block>'+_("studio_saySprite")+_("studio_playSound")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540">       <statement name="DO"><block type="studio_moveDistance">               <title name="SPRITE">1</title>               <title name="DISTANCE">400</title>         <next><block type="studio_moveDistance">                 <title name="SPRITE">1</title>                 <title name="DISTANCE">400</title>                 <title name="DIR">4</title></block>         </next></block>     </statement></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="730"></block>'},w.c2_8=(0,m.extend)(w.penguin_ouch,{}),w.c3_game_4=(0,m.extend)(w.penguin_ouch,{}),w.penguin_touch_octopus={ideal:16,requiredBlocks:[[{test:"changeScore",type:"studio_changeScore"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:1050,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(2)}},timeoutFailureTick:600,toolbox:g('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block>'+_("studio_saySprite")+_("studio_playSound")+_("studio_changeScore")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540">       <statement name="DO"><block type="studio_moveDistance">               <title name="SPRITE">1</title>               <title name="DISTANCE">400</title>         <next><block type="studio_moveDistance">                 <title name="SPRITE">1</title>                 <title name="DISTANCE">400</title>                 <title name="DIR">4</title></block>         </next></block>     </statement></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="730">       <next><block type="studio_playSound">       <next><block type="studio_saySprite">               <title name="TEXT">Ouch!</title></block>       </next></block>       </next></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="860">      <title name="SPRITE2">2</title></block>'},w.c2_9=(0,m.extend)(w.penguin_touch_octopus,{}),w.c3_game_5=(0,m.extend)(w.penguin_touch_octopus,{}),w.playlab_8={background:"rainbow",ideal:16,requiredBlocks:[[{test:"changeScore",type:"studio_changeScore"}],[{test:"playSound",type:"studio_playSound",titles:{SOUND:"winpoint"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],avatarList:["unicorn","wizard"],defaultEmotion:d.Emotions.HAPPY,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)&&1===Studio.playerScore},failureCondition:function(){return Studio.sprite[0].isCollidingWith(1)&&1!==Studio.playerScore}},timeoutFailureTick:600,toolbox:g(_("studio_changeScore")+'<block type="studio_playSound"><title name="SOUND">winpoint</title></block>'),startBlocks:'<block type="studio_whenSpriteCollided" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+f.default.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:2,DISTANCE:400},_("studio_moveDistance",{SPRITE:1,DIR:8,DISTANCE:400}))+'</statement></block><block type="studio_whenLeft" deletable="false" x="20" y="300"><next>'+_("studio_move",{SPRITE:0,DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="400"><next>'+_("studio_move",{SPRITE:0,DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="500"><next>'+_("studio_move",{SPRITE:0,DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="600"><next>'+_("studio_move",{SPRITE:0,DIR:4})+"</next></block>"},w.iceage_sound_and_points=(0,m.extend)(w.playlab_8,{background:"icy2",avatarList:["sid","granny"]}),w.gumball_sound_and_points=(0,m.extend)(w.playlab_8,{background:"wood",avatarList:["bananajoe","anton"],delayCompletion:500,defaultEmotion:d.Emotions.NORMAL}),w.change_background_and_speed={ideal:19,requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"night"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:1250,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(2)}},timeoutFailureTick:600,toolbox:g(_("studio_setBackground",{VALUE:'"night"'})+_("studio_moveDistance",{DISTANCE:400,SPRITE:1})+_("studio_saySprite")+_("studio_playSound")+_("studio_changeScore")+_("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_whenLeft" deletable="false" x="20" y="200"><next>'+_("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="330"><next>'+_("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="460"><next>'+_("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="590"><next>'+_("studio_move",{DIR:4})+'</next></block><block type="studio_repeatForever" deletable="false" x="20" y="720"><statement name="DO">'+f.default.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},_("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="880"><title name="SPRITE2">1</title><next>'+f.default.blockWithNext("studio_playSound",{},_("studio_saySprite",{TEXT:p.default.ouchExclamation()}))+'</next></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="1040"><title name="SPRITE2">2</title><next>'+_("studio_changeScore")+"</next></block>"},w.c2_10=(0,m.extend)(w.change_background_and_speed,{}),w.c3_game_6=(0,m.extend)(w.change_background_and_speed,{}),w.playlab_9={background:"black",requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"space"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],timeoutFailureTick:400,scale:{snapRadius:2},defaultEmotion:d.Emotions.ANGRY,softButtons:["leftButton","rightButton","downButton","upButton"],avatarList:["spacebot","alien"],goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:g(_("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})+_("studio_setBackground",{VALUE:'"space"'})+_("studio_moveDistance",{DISTANCE:400,SPRITE:1})+_("studio_saySprite")+_("studio_playSound",{SOUND:"winpoint2"})+_("studio_changeScore")),minWorkspaceHeight:1250,startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+f.default.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},_("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="290"><title name="SPRITE2">0</title><title name="SPRITE2">1</title><next>'+f.default.blockWithNext("studio_playSound",{SOUND:"winpoint2"},_("studio_saySprite",{TEXT:p.default.alienInvasion()}))+'</next></block><block type="studio_whenLeft" deletable="false" x="20" y="410"><next>'+_("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="510"><next>'+_("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="610"><next>'+_("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="710"><next>'+_("studio_move",{DIR:4})+"</next></block>"},w.iceage_warn_ice_age=(0,m.extend)(w.playlab_9,{background:"ground",toolbox:g(_("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})+_("studio_setBackground",{VALUE:'"icy5"'})+_("studio_moveDistance",{DISTANCE:400,SPRITE:1})+_("studio_saySprite")+_("studio_playSound",{SOUND:"winpoint2"})+_("studio_changeScore")),requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"grassy"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],avatarList:["sid","diego"],startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+f.default.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},_("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="290"><title name="SPRITE2">0</title><title name="SPRITE2">1</title><next>'+f.default.blockWithNext("studio_playSound",{SOUND:"winpoint2"},_("studio_saySprite",{TEXT:p.default.iceAge()}))+'</next></block><block type="studio_whenLeft" deletable="false" x="20" y="410"><next>'+_("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="510"><next>'+_("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="610"><next>'+_("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="710"><next>'+_("studio_move",{DIR:4})+"</next></block>"}),w.gumball_warn_food_fight=(0,m.extend)(w.playlab_9,{background:"dots",delayCompletion:500,defaultEmotion:d.Emotions.NORMAL,toolbox:g(_("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})+_("studio_setBackground",{VALUE:'"characters"'})+_("studio_moveDistance",{DISTANCE:400,SPRITE:1})+_("studio_saySprite")+_("studio_playSound",{SOUND:"winpoint2"})+_("studio_changeScore")),requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"characters"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],avatarList:["darwin","penny"],startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+f.default.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},_("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="290"><title name="SPRITE2">0</title><title name="SPRITE2">1</title><next>'+f.default.blockWithNext("studio_playSound",{SOUND:"winpoint2"},_("studio_saySprite",{TEXT:p.default.foodFight()}))+'</next></block><block type="studio_whenLeft" deletable="false" x="20" y="410"><next>'+_("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="510"><next>'+_("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="610"><next>'+_("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="710"><next>'+_("studio_move",{DIR:4})+"</next></block>"}),w.gumball_join_food_fight={background:"wood",delayCompletion:2e3,requiredBlocks:[[{test:"setSpriteEmotion",type:"studio_setSpriteEmotion"}],[{test:"throw",type:"studio_throw"}]],timeoutFailureTick:300,scale:{snapRadius:2},defaultEmotion:d.Emotions.NORMAL,avatarList:["bananajoe","anton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:g(_("studio_whenSpriteCollided",{SPRITE1:1,SPRITE2:"anything"})+_("studio_setSpriteEmotion",{SPRITE:1})+_("studio_throw",{SPRITE:0,DIR:2})+_("studio_playSound")+_("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>',progressConditions:[{required:{setEmotion:!0,throwProjectile:!0},result:{success:!0}},{required:{timedOut:!0},result:{success:!1}}]},w.iceage_throw_hearts=(0,m.extend)(w.gumball_join_food_fight,{background:"icy3",avatarList:["sid","granny"]}),w.sandbox={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!1,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:g(_("studio_setSprite")+_("studio_setBackground")+_("studio_whenArrow")+_("studio_whenSpriteClicked")+_("studio_whenSpriteCollided")+_("studio_repeatForever")+_("studio_showTitleScreen")+_("studio_move")+_("studio_moveDistance")+_("studio_stop")+_("studio_wait")+_("studio_playSound")+_("studio_changeScore")+_("studio_saySprite")+_("studio_setSpritePosition")+_("studio_throw")+_("studio_makeProjectile")+_("studio_setSpriteSpeed")+_("studio_setSpriteEmotion")+_("studio_vanish")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},w.c2_11=(0,m.extend)(w.sandbox,{}),w.c3_game_7=(0,m.extend)(w.sandbox,{}),w.playlab_10=(0,m.extend)(w.sandbox,{appStringsFunctions:{continueText:p.default.playlab_lastLevel_continueText}}),w.iceage_free_play=(0,m.extend)(w.playlab_10,{appStringsFunctions:{continueText:p.default.playlab_lastLevel_continueText}}),w.gumball_free_play=(0,m.extend)(w.playlab_10,{appStringsFunctions:{continueText:p.default.playlab_lastLevel_continueText}}),w.k1_6={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},minWorkspaceHeight:1500,spritesHiddenToStart:!0,freePlay:!0,map:[[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,16,16,16,16,16,16,0],[0,0,0,0,0,0,0,0]],isK1:!0,softButtons:[],toolbox:g(_("studio_setSprite")+_("studio_saySprite")+k+_("studio_whenSpriteCollided")+_("studio_setBackground")+_("studio_setSpriteSpeed")+_("studio_setSpriteEmotion")+_("studio_playSound")+_("studio_vanish")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20">      <next><block type="studio_setSprite">         <title name="SPRITE">0</title></block>       </next></block>'},w.k1_block_test=(0,m.extend)(w[99],{toolbox:g(_("studio_setSprite")+_("studio_moveNorth")+_("studio_moveSouth")+_("studio_moveEast")+_("studio_moveWest")+_("studio_moveNorth_length")+_("studio_moveSouth_length")+_("studio_moveEast_length")+_("studio_moveWest_length")),isK1:!0}),w.full_sandbox={scrollbars:!0,requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!0,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:g(b(p.default.catActions(),_("studio_setSprite")+_("studio_setBackground")+'<block type="studio_showTitleScreenParams">                         <value name="TITLE"><block type="text"></block>                         </value>                         <value name="TEXT"><block type="text"></block>                         </value></block>'+_("studio_move")+'<block type="studio_moveDistanceParams" inline="true">                       <value name="DISTANCE"><block type="math_number">                               <title name="NUM">25</title></block>                       </value></block>'+_("studio_stop")+'<block type="studio_waitParams" inline="true">                         <value name="VALUE"><block type="math_number">                                 <title name="NUM">1</title></block>                         </value></block>'+_("studio_playSound")+'<block type="studio_setScoreText" inline="true">                         <value name="TEXT"><block type="text"></block>                         </value></block><block type="studio_saySpriteParams" inline="true">                         <value name="TEXT"><block type="text"></block>                         </value></block>'+_("studio_setSpritePosition")+_("studio_addCharacter")+_("studio_throw")+_("studio_makeProjectile")+_("studio_setSpriteSpeed")+_("studio_setSpriteEmotion")+_("studio_vanish")+_("studio_setSpriteSize")+_("studio_showCoordinates"))+b(p.default.catEvents(),_("studio_whenArrow")+_("studio_whenSpriteClicked")+_("studio_whenSpriteCollided"))+b(p.default.catControl(),_("studio_repeatForever")+'<block type="controls_repeat_ext">                           <value name="TIMES">                             <block type="math_number">                               <title name="NUM">10</title>                             </block>                           </value>                         </block>'+_("controls_whileUntil")+'<block type="controls_for">                           <value name="FROM">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                           <value name="TO">                             <block type="math_number">                               <title name="NUM">10</title>                             </block>                           </value>                           <value name="BY">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                         </block>'+_("controls_flow_statements"))+b(p.default.catLogic(),_("controls_if")+_("logic_compare")+_("logic_operation")+_("logic_negate")+_("logic_boolean"))+b(p.default.catMath(),_("math_number")+'<block type="math_change">                           <value name="DELTA">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                         </block><block type="math_random_int">                           <value name="FROM">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                           <value name="TO">                             <block type="math_number">                               <title name="NUM">100</title>                             </block>                           </value>                         </block>'+_("math_arithmetic"))+b(p.default.catText(),_("text")+_("text_join")+'<block type="text_append">                           <value name="TEXT">                             <block type="text"></block>                           </value>                         </block>')+b(p.default.catVariables(),"","VARIABLE")+b(p.default.catProcedures(),"","PROCEDURE")+b("Functional",_("functional_string")+_("functional_background_string_picker")+_("functional_math_number")+'<block type="functional_math_number_dropdown"><title name="NUM" config="2,3,4,5,6,7,8,9,10,11,12">???</title></block>')+b("Functional Start",_("functional_start_setSpeeds")+_("functional_start_setBackgroundAndSpeeds"))+b("Functional Logic",_("functional_greater_than")+_("functional_less_than")+_("functional_number_equals")+_("functional_string_equals")+_("functional_logical_and")+_("functional_logical_or")+_("functional_logical_not")+_("functional_boolean"))),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},w.full_sandbox_infinity=(0,m.extend)(w.full_sandbox,{}),w.ec_sandbox=(0,m.extend)(w.sandbox,{editCode:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],codeFunctions:{setSprite:{category:"Play Lab",noAutocomplete:!1},setBackground:{category:"Play Lab"},move:{category:"Play Lab",noAutocomplete:!1},playSound:{category:"Play Lab"},changeScore:{category:"Play Lab",noAutocomplete:!1},setSpritePosition:{category:"Play Lab",noAutocomplete:!1},setSpriteSpeed:{category:"Play Lab",noAutocomplete:!1},setSpriteEmotion:{category:"Play Lab",noAutocomplete:!1},setSpriteSize:{category:"Play Lab",noAutocomplete:!1},throwProjectile:{category:"Play Lab",noAutocomplete:!1},vanish:{category:"Play Lab",noAutocomplete:!1},onEvent:{category:"Play Lab",noAutocomplete:!1},forLoop_i_0_4:null,ifBlock:null,ifElseBlock:null,whileBlock:null,addOperator:null,subtractOperator:null,multiplyOperator:null,divideOperator:null,equalityOperator:null,inequalityOperator:null,greaterThanOperator:null,lessThanOperator:null,andOperator:null,orOperator:null,notOperator:null,randomNumber_max:null,randomNumber_min_max:null,mathRound:null,mathAbs:null,mathMax:null,mathMin:null,declareAssign_x:null,assign_x:null,declareAssign_x_array_1_4:null,declareAssign_x_prompt:null,functionParams_none:null,functionParams_n:null,callMyFunction:null,callMyFunction_n:null},startBlocks:""}),w.js_hoc2015_move_right={instructionsImportant:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,background:"main",music:["song1"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[16908288,16908288,0,0,0,0,0,0],[16908288,16908288,0,65536,131072,1048576,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1048576,65536,1179648,0,0],[0,17956864,17956864,0,0,0,0,1048576],[0,17956864,17956864,0,0,0,0,0]],instructions:p.default.hoc2015_move_right_instructions(),ticksBeforeFaceSouth:9,timeoutFailureTick:100,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal1"},callouts:[{id:"playlab:js_hoc2015_move_right:runButton",element_id:"#runButton",qtip_config:{content:{text:p.default.calloutMoveRightRunButton()},position:{my:"bottom left",at:"top center",adjust:{x:0,y:0}}}}],progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:p.default.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:p.default.failedHasAllGoals()}}]},w.js_hoc2015_move_right_down={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,background:"main",music:["song2"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[17825792,17825792,0,0,0,0,0,0],[17825792,17825792,0,16,0,1,0,0],[0,0,0,16842752,16842752,0,0,0],[0,0,0,16842752,16842752,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],instructions:p.default.hoc2015_move_right_down_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal2"},progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:p.default.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:p.default.failedHasAllGoals()}}]},w.js_hoc2015_move_backtrack={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,background:"main",music:["song3"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,65536,1,131072,0,0],[0,0,0,16,0,1,0,0],[0,0,0,0,0,0,0,0],[0,17825792,17825792,0,0,0,0,0],[0,17825792,17825792,0,0,0,0,0],[0,0,32,0,0,0,0,0]],instructions:p.default.hoc2015_move_backtrack_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal1"},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:p.default.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:p.default.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:p.default.failedHasAllGoals()}}]},w.js_hoc2015_move_diagonal={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,textModeAtStart:!0,background:"main",music:["song4"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveDown();",""].join("\n"),itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,65536,16,0,0],[0,17825792,17825792,0,1,0,0,0],[0,17825792,17825792,1,2359296,2424832,0,0],[0,32,1,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,20185088,20185088,20250624,20250624,0],[0,0,0,20185088,20185088,20250624,20250624,0]],embed:"false",instructions:p.default.hoc2015_move_diagonal_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal1"},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:p.default.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:p.default.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:p.default.failedHasAllGoals()}}],callouts:[{id:"playlab:js_hoc2015_move_diagonal:showCodeToggle",element_id:"#show-code-header",qtip_config:{content:{text:p.default.calloutShowCodeToggle()},position:{my:"top right",at:"bottom left",adjust:{x:0,y:0}}}}]},w.js_hoc2015_move_around={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,textModeAtStart:!0,background:"main",music:["song9"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,1,65536,0],[0,0,0,262144,131072,0,0,0],[0,0,32,1310720,0,1,0,32],[17956864,17956864,0,0,1,0,0,0],[17956864,17956864,0,0,0,0,0,0],[0,32,0,0,0,0,0,0]],embed:"false",instructions:p.default.hoc2015_move_around_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal2"},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:p.default.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:p.default.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:p.default.failedHasAllGoals()}}]},w.js_hoc2015_move_finale={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,background:"main",music:["song8"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveDown();",""].join("\n"),itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,32,16,131072,1,1048576,0,0],[0,0,0,1,0,1,32,0],[0,0,1,1179648,0,0,0,0],[0,0,0,0,32,0,16908288,16908288],[0,16842752,16842752,0,0,0,16908288,16908288],[0,16842752,16842752,0,0,0,0,0]],embed:"false",instructions:p.default.hoc2015_move_finale_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal2"},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:p.default.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:p.default.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:p.default.failedHasAllGoals()}}],callouts:[{id:"playlab:js_hoc2015_move_finale:showCodeToggle",element_id:"#show-code-header",qtip_config:{content:{text:p.default.calloutShowCodeCanToggle()},position:{my:"top right",at:"bottom left",adjust:{x:15,y:0}}}}]},w.js_hoc2015_event_two_items={lockZeroParamFunctions:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"hoth",music:["song7"],wallMap:"blank",softButtons:["downButton","upButton"],codeFunctions:{goUp:null,goDown:null,whenUp:null,whenDown:null},startBlocks:["function whenUp() {","  ","}","function whenDown() {","  ","}"].join("\n"),removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0]],pinWorkspaceToBottom:"true",embed:"false",instructions:p.default.hoc2015_event_two_items_instructions(),instructions2:p.default.hoc2015_event_two_items_instructions2(),timeoutFailureTick:600,showTimeoutRect:"rgba(0, 0, 0, 0.5)",goalOverride:{goalAnimation:"animatedGoal",goalRenderOffsetX:0},progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:p.default.successCharacter1()}},{required:{timedOut:!0},result:{success:!1,message:p.default.failedTwoItemsTimeout(),blocklyMessage:p.default.failedTwoItemsTimeoutBlockly()}}],callouts:[{id:"playlab:js_hoc2015_event_two_items:placeCommandsHere",element_id:".droplet-gutter-line:nth-of-type(2)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:p.default.calloutShowPlaceGoUpHere()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"bottom right",adjust:{x:30,y:-10}}}},{id:"playlab:js_hoc2015_event_two_items:arrowsCallout",element_id:"#upButton",hide_target_selector:"#soft-buttons",qtip_config:{content:{text:p.default.calloutUseArrowButtons()},position:{my:"bottom left",at:"top center"}}}]},w.js_hoc2015_event_four_items={lockZeroParamFunctions:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"hoth",music:["song5"],wallMap:"blobs",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{goRight:null,goLeft:null,goUp:null,goDown:null,whenLeft:null,whenRight:null,whenUp:null,whenDown:null},startBlocks:["function whenUp() {","  ","}","function whenDown() {","  ","}"].join("\n"),removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0]],embed:"false",instructions:p.default.hoc2015_event_four_items_instructions(),instructions2:p.default.hoc2015_event_four_items_instructions2(),timeoutFailureTick:1350,showTimeoutRect:"rgba(0, 0, 0, 0.5)",goalOverride:{goalAnimation:"animatedGoal"},progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:p.default.successCharacter1()}},{required:{timedOut:!0},result:{success:!1,message:p.default.failedFourItemsTimeout(),blocklyMessage:p.default.failedFourItemsTimeoutBlockly()}}]},w.js_hoc2015_score={lockZeroParamFunctions:!0,avatarList:["R2-D2"],autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,editCode:!0,background:"hoth",music:["song6"],wallMap:"circle",softButtons:["leftButton","rightButton","downButton","upButton"],autohandlerOverrides:{whenGetRebelPilot:"whenTouchGoal"},codeFunctions:{playSound:null,addPoints:{params:["100"]},whenGetRebelPilot:null},startBlocks:["function whenGetRebelPilot() {",'  playSound("R2-D2random");',"}"].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0}},itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,edgeCollisions:"true",map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,16,0,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0]],instructions:p.default.hoc2015_score_instructions(),instructions2:p.default.hoc2015_score_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1350,showTimeoutRect:"rgba(0, 0, 0, 0.5)",goalOverride:{goalAnimation:"animatedGoal"},goal:{successCondition:function(){return!1}},progressConditions:[{required:{allGoalsVisited:!0,currentPointsAtOrAbove:900},result:{success:!0,message:p.default.successCharacter1()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:p.default.failedScoreTimeout()}},{required:{allGoalsVisited:!0},result:{success:!1,message:p.default.failedScoreScore(),blocklyMessage:p.default.failedScoreScoreBlockly()}}],completeOnSuccessConditionNotGoals:!0,callouts:[{id:"playlab:js_hoc2015_score:arrowsAutoSteerCallout",element_id:"#upButton",hide_target_selector:"#soft-buttons",qtip_config:{content:{text:p.default.calloutUseArrowButtonsAutoSteer()},position:{my:"bottom left",at:"top center"}}},{id:"playlab:js_hoc2015_score:placeCommandsAtTop",element_id:".droplet-gutter-line:nth-of-type(2)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:p.default.calloutShowPlaySound()},hide:{event:"mouseup touchend"},position:{my:"top center",at:"bottom center",adjust:{x:170,y:0}}}}]},w.js_hoc2015_win_lose={lockZeroParamFunctions:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"endor",music:["song9"],wallMap:"blobs",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{playSound:null,addPoints:{params:["100"]},removePoints:{params:["100"]},whenGetRebelPilot:null,whenGetStormtrooper:null,whenGetMynock:null},startBlocks:[].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0}},itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,64,64,0,0,0],[2048,0,0,0,0,0,0,2048],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,256,0,0,0,0,0,0]],embed:"false",instructions:p.default.hoc2015_win_lose_instructions(),instructions2:p.default.hoc2015_win_lose_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1350,showTimeoutRect:"rgba(255, 255, 255, 0.5)",callouts:[{id:"playlab:js_hoc2015_win_lose:instructions",element_id:"#prompt-table",qtip_config:{content:{text:p.default.calloutInstructions()},position:{my:"bottom left",at:"top right",adjust:{x:-40,y:0}}}}],progressConditions:[{required:{gotAllItems:!0,currentPointsBelow:200},result:{message:p.default.failedWinLoseScore(),blocklyMessage:p.default.failedWinLoseScoreBlockly()}},{required:{timedOut:!0,collectedItemsBelow:2,currentPointsBelow:200},result:{success:!1,message:p.default.failedWinLoseTimeout()}},{required:{timedOut:!0,collectedItemsAtOrAbove:2,currentPointsBelow:200},result:{success:!1,message:p.default.failedWinLoseScore(),blocklyMessage:p.default.failedWinLoseScoreBlockly()}},{required:{timedOut:!0,collectedItemsBelow:2,currentPointsAtOrAbove:200},result:{success:!1,message:p.default.failedWinLoseGoals(),blocklyMessage:p.default.failedWinLoseGoalsBlockly()}},{required:{collectedItemsAtOrAbove:2,currentPointsAtOrAbove:200},result:{success:!0,message:p.default.successCharacter1()}}]},w.js_hoc2015_add_characters={lockZeroParamFunctions:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"endor",music:["song11"],wallMap:"circle",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{addCharacter:{params:['"PufferPig"']},addPoints:{params:["1000"]},removePoints:{params:["1000"]},playSound:null,whenGetPufferPig:null},startBlocks:['playSound("R2-D2sound1");','addCharacter("PufferPig");',"","function whenGetPufferPig() {",'  playSound("PufferPigRandom");',"  addPoints(1000);","}"].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0,PufferPigRandom:!0,PufferPigSound1:!0,PufferPigSound2:!0,PufferPigSound3:!0}},itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:p.default.hoc2015_add_characters_instructions(),instructions2:p.default.hoc2015_add_characters_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1350,showTimeoutRect:"rgba(255, 255, 255, 0.5)",callouts:[{id:"playlab:js_hoc2015_add_characters:calloutPutCommandsHereRunStart",element_id:".droplet-gutter-line:nth-of-type(3)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:p.default.calloutPutCommandsHereRunStart()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"center right"}}}],progressConditions:[{required:{createdSpecificItemsBelow:{className:"pufferpig",count:3}},result:{success:!1,message:p.default.failedAddCharactersTimeout(),blocklyMessage:p.default.failedAddCharactersTimeoutBlockly()}},{required:{collectedSpecificItemsAtOrAbove:{className:"pufferpig",count:3}},result:{success:!0,message:p.default.successCharacter1()}},{required:{timedOut:!0},result:{success:!1,message:p.default.failedAddCharactersTimeout(),blocklyMessage:p.default.failedAddCharactersTimeoutBlockly()}}]},w.js_hoc2015_chain_characters={lockZeroParamFunctions:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"starship",music:["song13"],wallMap:"horizontal",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{addCharacter:{params:['"Mynock"']},addPoints:null,removePoints:null,playSound:null,whenGetTauntaun:null,whenGetMynock:null},startBlocks:['addCharacter("Tauntaun");','addCharacter("Tauntaun");','addCharacter("Tauntaun");','addCharacter("Tauntaun");',"","function whenGetTauntaun() {",'  playSound("TauntaunRandom");',"  addPoints(50);","","}"].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0,TauntaunRandom:!0,TauntaunSound1:!0,TauntaunSound2:!0,TauntaunSound3:!0,TauntaunSound4:!0,MynockRandom:!0,MynockSound1:!0,MynockSound2:!0,MynockSound3:!0}},itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:p.default.hoc2015_chain_characters_instructions(),instructions2:p.default.hoc2015_chain_characters_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1800,showTimeoutRect:"rgba(255, 255, 255, 0.5)",progressConditions:[{required:{collectedSpecificItemsAtOrAbove:{className:"mynock",count:8}},result:{success:!0,message:p.default.successCharacter1()}},{required:{timedOut:!0,collectedSpecificItemsAtOrAbove:{className:"mynock",count:5}},result:{success:!1,canPass:!0,message:p.default.failedChainCharactersTimeoutGotSome()}},{required:{collectedSpecificItemsAtOrAbove:{className:"tauntaun",count:4},createdSpecificItemsBelow:{className:"mynock",count:5}},result:{success:!1,message:p.default.failedChainCharactersTimeout()}},{required:{timedOut:!0},result:{success:!1,message:p.default.failedChainCharactersTimeout()}}],callouts:[{id:"playlab:js_hoc2015_chain_characters:calloutPlaceTwoWhenTauntaun",element_id:".droplet-gutter-line:nth-of-type(9)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:p.default.calloutPlaceTwoWhenTauntaun()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"bottom center",adjust:{x:65,y:0}}}}]},w.js_hoc2015_multiply_characters={lockZeroParamFunctions:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"starship",music:["song12"],wallMap:"grid",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{addCharacter:{params:['"MouseDroid"']},playSound:null,addPoints:null,removePoints:null,whenGetMouseDroid:null},startBlocks:['addCharacter("MouseDroid");','playSound("R2-D2sound3");'].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0,MouseDroidRandom:!0,MouseDroidSound1:!0,MouseDroidSound2:!0,MouseDroidSound3:!0}},itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:p.default.hoc2015_multiply_characters_instructions(),instructions2:p.default.hoc2015_multiply_characters_instructions2(),autoArrowSteer:!0,timeoutFailureTick:2250,showTimeoutRect:"rgba(255, 255, 255, 0.5)",progressConditions:[{required:{collectedItemsAtOrAbove:20},result:{success:!0,message:p.default.successCharacter1()}},{required:{collectedSpecificItemsAtOrAbove:{className:"mousedroid",count:1},createdSpecificItemsBelow:{className:"mousedroid",count:2}},result:{success:!1,message:p.default.failedMultiplyCharactersTimeout()}},{required:{timedOut:!0,collectedItemsAtOrAbove:2},result:{success:!1,canPass:!0,message:p.default.failedMultiplyCharactersTimeoutGotSome()}},{required:{timedOut:!0},result:{success:!1,message:p.default.failedMultiplyCharactersTimeout(),blocklyMessage:p.default.failedMultiplyCharactersTimeoutBlockly()}}],callouts:[{id:"playlab:js_hoc2015_multiply_characters:calloutPlaceTwo",element_id:"#droplet_palette_block_whenGetMouseDroid",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:p.default.calloutPlaceTwo()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"bottom center"}}}]},w.js_hoc2015_change_setting={lockZeroParamFunctions:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"starship",music:["song14"],wallMap:"blobs",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{setDroid:{params:['"C-3PO"']},setBackground:null,setDroidSpeed:null,setMap:null,playSound:null,addCharacter:null,addPoints:null,removePoints:null,whenGetRebelPilot:null},startBlocks:['addCharacter("RebelPilot");','addCharacter("RebelPilot");','addCharacter("RebelPilot");',"",'setBackground("random");','setMap("random");',""].join("\n"),paramRestrictions:{playSound:{random:!0,"C-3POrandom":!0,"C-3POsound1":!0,"C-3POsound2":!0,"C-3POsound3":!0,"C-3POsound4":!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0,PufferPigRandom:!0,PufferPigSound1:!0,PufferPigSound2:!0,PufferPigSound3:!0,TauntaunRandom:!0,TauntaunSound1:!0,TauntaunSound2:!0,TauntaunSound3:!0,MouseDroidRandom:!0,MouseDroidSound1:!0,MouseDroidSound2:!0,MouseDroidSound3:!0,MynockRandom:!0,MynockSound1:!0,MynockSound2:!0,MynockSound3:!0,ProbotRandom:!0,ProbotSound1:!0,ProbotSound2:!0,ProbotSound3:!0}},itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:p.default.hoc2015_change_setting_instructions(),instructions2:p.default.hoc2015_change_setting_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1350,showTimeoutRect:"rgba(255, 255, 255, 0.5)",callouts:[{id:"playlab:js_hoc2015_change_setting:setMap",element_id:"#droplet_palette_block_setDroid",qtip_config:{content:{text:p.default.calloutSetDroidAndSpeed()},position:{my:"center left",at:"center right"}}}],progressConditions:[{required:{setSprite:!0,setDroidSpeed:!0,collectedItemsAtOrAbove:3},result:{success:!0,message:p.default.successGenericCharacter()}},{required:{collectedItemsAtOrAbove:3},result:{success:!1,message:p.default.failedChangeSettingSettings()}},{required:{timedOut:!0},result:{success:!1,message:p.default.failedChangeSettingTimeout()}}]};var A=['<div class="js_hoc2015_event_free_markdown">','<p><span class="character-text">'+p.default.hoc2015_event_free_instructions()+"</span></p>","",'<p><span class="instructions2">'+p.default.hoc2015_event_free_instructions2()+"</span></p>","",'<details class="hoc2015">',"<summary>Example project ideas</summary>","<p>**Example 1**","<br />Add five random characters in the scene, and play a different sound each time R2-D2 collides with one of them.</p>","","<p>**Example 2**","<br />Add ten Stormtroopers to chase C-3PO. See if you can outrun them by running at high speed.</p>","","<p>**Example 3**","<br />Make your droid move faster when he touches a Mouse Droid and slower when he touches a Stormtrooper.</p>","","</details>",'<details class="hoc2015">',"<summary>Extra credit project ideas</summary>","","<p>**Example 1**","<br />Add a Mouse Droid and a Stormtrooper. Every time R2-D2 catches a Mouse Droid, score some points and then add another Mouse Droid and another Stormtrooper.  End the game if a Stormtrooper catches R2-D2.</p>","","</details>",'<details class="hoc2015">',"<summary>For JavaScript programmers</summary>","<p>You can create more complex JavaScript programs if you program in “text” mode. Feel free to use `for` loops, `if` statements, variables, or other JavaScript commands to make much more complex games. And _please_: document and share the code you wrote for others to learn too!</p>","","</details>",'<details class="hoc2015">',"<summary>More about the characters</summary>","<p>Each character has a unique behavior:","<br/><br/>","[pufferpig] <b>Puffer Pigs</b> roam around slowly<br/>","[tauntaun] <b>Tauntauns</b> roam around at a normal speed<br/>","[mynock] <b>Mynocks</b> fly around at a normal speed<br/>","[stormtrooper] <b>Stormtroopers</b> chase your droid slowly<br/>","[probot] <b>Probots</b> chase your droid quickly<br/>","[rebelpilot] <b>Rebel Pilots</b> flee at a normal speed<br/>","[mousedroid] <b>Mouse Droids</b> flee quickly<br/>","<br/>","You can change the speed of any character with the moveFast, moveNormal, and moveSlow commands.","</p>","","</details>","</div>"].join("\r\n");w.js_hoc2015_event_free={lockZeroParamFunctions:!0,editCode:!0,freePlay:!0,background:"endor",music:["song15"],wallMap:"blank",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{setDroid:{category:"Commands"},setBackground:{category:"Commands"},setDroidSpeed:{category:"Commands"},setMap:{category:"Commands"},playSound:{category:"Commands"},addCharacter:{category:"Commands"},moveSlow:{category:"Commands"},moveNormal:{category:"Commands"},moveFast:{category:"Commands"},addPoints:{category:"Commands"},removePoints:{category:"Commands"},endGame:{category:"Commands"},goRight:{category:"Commands"},goLeft:{category:"Commands"},goUp:{category:"Commands"},goDown:{category:"Commands"},whenLeft:{category:"Events"},whenRight:{category:"Events"},whenUp:{category:"Events"},whenDown:{category:"Events"},whenTouchObstacle:{category:"Events"},whenGetStormtrooper:{category:"Events"},whenGetRebelPilot:{category:"Events"},whenGetPufferPig:{category:"Events"},whenGetMynock:{category:"Events"},whenGetMouseDroid:{category:"Events"},whenGetTauntaun:{category:"Events"},whenGetProbot:{category:"Events"},whenGetCharacter:{category:"Events"},whenGetAllStormtroopers:{category:"Events"},whenGetAllRebelPilots:{category:"Events"},whenGetAllPufferPigs:{category:"Events"},whenGetAllMynocks:{category:"Events"},whenGetAllMouseDroids:{category:"Events"},whenGetAllTauntauns:{category:"Events"},whenGetAllProbots:{category:"Events"},whenGetAllCharacters:{category:"Events"}},startBlocks:['setBackground("Endor");','setMap("circle");','setDroid("R2-D2");','setDroidSpeed("normal");','playSound("R2-D2random");',"function whenUp() {","  goUp();","}","function whenDown() {","  goDown();","}","function whenLeft() {","  goLeft();","}","function whenRight() {","  goRight();","}",""].join("\n"),itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,tapSvgToRunAndReset:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,16,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:p.default.hoc2015_event_free_instructions(),instructions2:p.default.hoc2015_event_free_instructions2(),markdownInstructions:A,markdownInstructionsWithClassicMargins:!0,callouts:[{id:"playlab:js_hoc2015_event_free:clickCategory",element_id:".droplet-palette-group-header.green",qtip_config:{content:{text:p.default.calloutClickEvents()},position:{my:"top center",at:"bottom center"}}},{id:"playlab:js_hoc2015_event_free:finishButton",element_id:"#finishButton",on:"finishButtonShown",qtip_config:{content:{text:p.default.calloutFinishButton()},position:{my:"center left",at:"center right"}}}],appStringsFunctions:{continueText:p.default.hoc2015_lastLevel_continueText,reinfFeedbackMsg:p.default.hoc2015_reinfFeedbackMsg,sharingText:p.default.hoc2015_shareGame},disablePrinting:!0,playStartSound:!1},w.hoc2015_blockly_1=(0,m.extend)(w.js_hoc2015_move_right,{instructionsImportant:!0,editCode:!1,enableShowCode:!0,startBlocks:y,toolbox:g(S),requiredBlocks:[s()],callouts:[{id:"playlab:blockly_hoc2015_move_right:runButton",element_id:"#runButton",qtip_config:{content:{text:p.default.calloutBlocklyMoveRightRunButton()},position:{my:"bottom left",at:"top center",adjust:{x:0,y:0}}}}]}),w.hoc2015_blockly_2=(0,m.extend)(w.js_hoc2015_move_right_down,{editCode:!1,enableShowCode:!0,startBlocks:y,toolbox:g(S),requiredBlocks:[s(),l()]}),w.hoc2015_blockly_3=(0,m.extend)(w.js_hoc2015_move_backtrack,{editCode:!1,enableShowCode:!0,startBlocks:y,toolbox:g(S),requiredBlocks:[s(),r()]}),w.hoc2015_blockly_4=(0,m.extend)(w.js_hoc2015_move_diagonal,{editCode:!1,enableShowCode:!0,callouts:null,startBlocks:v,toolbox:g(S),requiredBlocks:[l(),u()]}),w.hoc2015_blockly_5=(0,m.extend)(w.js_hoc2015_move_around,{editCode:!1,enableShowCode:!0,startBlocks:y,toolbox:g(S),requiredBlocks:[s(),l(),u()],callouts:[]}),w.hoc2015_blockly_6=(0,m.extend)(w.js_hoc2015_move_finale,{editCode:!1,enableShowCode:!0,startBlocks:v,toolbox:g(S),callouts:null,requiredBlocks:[r(),l(),s()]}),w.hoc2015_blockly_7=(0,m.extend)(w.js_hoc2015_event_two_items,{editCode:!1,msgStringOverrides:{moveSprite:"goSprite"},startBlocks:'<block type="studio_whenUp" deletable="false" x="20" y="20"></block>   <block type="studio_whenDown" deletable="false" x="20" y="150"></block>',toolbox:g('<block type="studio_move"><title name="DIR">1</title></block>   <block type="studio_move"><title name="DIR">4</title></block>'),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_7:placeCommandsHere",element_id:'[block-id="3"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:p.default.calloutBlocklyPlaceGoUpHere()},position:{my:"top left",at:"bottom left",adjust:{x:22,y:0}}}},{id:"playlab:hoc2015_blockly_7:arrowsCallout",element_id:"#upButton",hide_target_selector:"#soft-buttons",qtip_config:{content:{text:p.default.calloutUseArrowButtons()},position:{my:"bottom left",at:"top center"}}}]}),w.hoc2015_blockly_7_no_video=(0,m.extend)(w.hoc2015_blockly_7),w.hoc2015_blockly_8=(0,m.extend)(w.js_hoc2015_event_four_items,{editCode:!1,msgStringOverrides:{moveSprite:"goSprite"},startBlocks:'<block type="studio_whenUp" deletable="false" x="20" y="20"></block>   <block type="studio_whenDown" deletable="false" x="20" y="150"></block>   <block type="studio_whenLeft" deletable="false" x="20" y="280"></block>   <block type="studio_whenRight" deletable="false" x="20" y="410"></block>',toolbox:g(S),requiredBlocks:[]}),w.hoc2015_blockly_9=(0,m.extend)(w.js_hoc2015_score,{editCode:!1,msgStringOverrides:{whenTouchGoal:"whenGetCharacterRebelPilot"},startBlocks:'<block type="studio_whenTouchGoal" deletable="false">       <next><block type="studio_playSound"><title name="SOUND">R2-D2random</title></block>       </next></block>',toolbox:g('<block type="studio_playSound"></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>'),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_9:arrowsAutoSteerCallout",element_id:"#upButton",hide_target_selector:"#soft-buttons",qtip_config:{content:{text:p.default.calloutUseArrowButtonsAutoSteer()},position:{my:"bottom left",at:"top center"}}},{id:"playlab:hoc2015_blockly_9:placeCommandsAtTop",element_id:'[block-id="4"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:p.default.calloutShowPlaySound()},position:{my:"top left",at:"bottom center"}}}]}),w.hoc2015_blockly_10=(0,m.extend)(w.js_hoc2015_win_lose,{editCode:!1,startBlocks:"",toolbox:g('<block type="studio_playSound"></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_whenGetCharacter"><title name="VALUE">rebelpilot</title></block>         <block type="studio_whenGetCharacter"><title name="VALUE">stormtrooper</title></block>         <block type="studio_whenGetCharacter"><title name="VALUE">mynock</title></block>'),requiredBlocks:[]}),w.hoc2015_blockly_11=(0,m.extend)(w.js_hoc2015_add_characters,{editCode:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_playSound"><title name="SOUND">R2-D2sound1</title>         <next>          <block type="studio_addCharacter"><title name="VALUE">"pufferpig"</title></block>         </next>        </block>       </next>      </block>      <block type="studio_whenGetCharacter" deletable="false" x="20" y="200">       <title name="VALUE">pufferpig</title>       <next>        <block type="studio_playSound"><title name="SOUND">PufferPigRandom</title>         <next>          <block type="studio_addPoints"><title name="VALUE">1000</title></block>         </next>        </block>       </next>      </block>',toolbox:g('<block type="studio_addCharacter"><title name="VALUE">"pufferpig"</title></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_playSound"></block>         <block type="studio_whenGetCharacter"><title name="VALUE">pufferpig</title></block>'),callouts:[{id:"playlab:hoc2015_blockly_11:calloutPutCommandsHereRunStart",element_id:'[block-id="8"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:p.default.calloutPutCommandsHereRunStart()},position:{my:"top left",at:"bottom left",adjust:{x:22,y:0}}}}],requiredBlocks:[]}),w.hoc2015_blockly_12=(0,m.extend)(w.js_hoc2015_chain_characters,{editCode:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_addCharacter"><title name="VALUE">"tauntaun"</title>         <next>          <block type="studio_addCharacter"><title name="VALUE">"tauntaun"</title>           <next>            <block type="studio_addCharacter"><title name="VALUE">"tauntaun"</title>             <next>              <block type="studio_addCharacter"><title name="VALUE">"tauntaun"</title></block>             </next>            </block>           </next>          </block>         </next>        </block>       </next>      </block>      <block type="studio_whenGetCharacter" deletable="false" x="20" y="180">       <title name="VALUE">tauntaun</title>       <next>        <block type="studio_playSound"><title name="SOUND">TauntaunRandom</title>         <next>          <block type="studio_addPoints"><title name="VALUE">50</title></block>         </next>        </block>       </next>      </block>',toolbox:g('<block type="studio_addCharacter"><title name="VALUE">"mynock"</title></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_playSound"></block>         <block type="studio_whenGetCharacter"><title name="VALUE">tauntaun</title></block>         <block type="studio_whenGetCharacter"><title name="VALUE">mynock</title></block>'),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_12:calloutPlaceTwoWhenTauntaun",element_id:'[block-id="12"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:p.default.calloutPlaceTwoWhenTauntaun()},position:{my:"top left",at:"bottom center",adjust:{x:0,y:0}}}}]}),w.hoc2015_blockly_13=(0,m.extend)(w.js_hoc2015_multiply_characters,{editCode:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_addCharacter"><title name="VALUE">"mousedroid"</title>         <next>          <block type="studio_playSound"><title name="SOUND">R2-D2sound3</title></block>         </next>        </block>       </next>      </block>',toolbox:g('<block type="studio_addCharacter"><title name="VALUE">"mousedroid"</title></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_playSound"></block>         <block type="studio_whenGetCharacter"><title name="VALUE">mousedroid</title></block>'),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_13:calloutPlaceTwo",element_id:'[block-id="5"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:p.default.calloutPlaceTwo()},position:{my:"top left",at:"bottom center"}}}]}),w.hoc2015_blockly_14=(0,m.extend)(w.js_hoc2015_change_setting,{editCode:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_addCharacter"><title name="VALUE">"rebelpilot"</title>         <next>          <block type="studio_addCharacter"><title name="VALUE">"rebelpilot"</title>           <next>            <block type="studio_addCharacter"><title name="VALUE">"rebelpilot"</title>             <next>              <block type="studio_setBackground"><title name="VALUE">random</title>               <next>                <block type="studio_setMap"><title name="VALUE">random</title></block>               </next>              </block>             </next>            </block>           </next>          </block>         </next>        </block>       </next>      </block>',toolbox:g('<block type="studio_setSprite"><title name="VALUE">"c-3po"</title></block>         <block type="studio_setDroidSpeed"><title name="VALUE">fast</title></block>         <block type="studio_setBackground"></block>         <block type="studio_setMap"></block>         <block type="studio_addCharacter"><title name="VALUE">"mousedroid"</title></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_playSound"></block>         <block type="studio_whenGetCharacter"><title name="VALUE">rebelpilot</title></block>'),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_14:setMap",element_id:'[block-id="1"]',qtip_config:{content:{text:p.default.calloutSetDroidAndSpeed()},position:{my:"center left",at:"center right"}}}]}),w.hoc2015_blockly_15=(0,m.extend)(w.js_hoc2015_event_free,{editCode:!1,msgStringOverrides:{moveSprite:"goSprite"},markdownInstructions:null,markdownInstructionsWithClassicMargins:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_setBackground"><title name="VALUE">"endor"</title>         <next>          <block type="studio_setMap"><title name="VALUE">"circle"</title>           <next>            <block type="studio_setSprite"><title name="VALUE">"r2-d2"</title>             <next>              <block type="studio_setDroidSpeed"><title name="VALUE">normal</title>               <next>                <block type="studio_playSound"><title name="SOUND">R2-D2random</title></block>               </next>              </block>             </next>            </block>           </next>          </block>         </next>        </block>       </next>      </block>'+function(e,t){return'<block type="studio_whenUp" deletable="false" x="20" y="'+e.toString()+'"></block>     <block type="studio_whenDown" deletable="false" x="20" y="'+(t+e).toString()+'"></block>     <block type="studio_whenLeft" deletable="false" x="20" y="'+(2*t+e).toString()+'"></block>     <block type="studio_whenRight" deletable="false" x="20" y="'+(3*t+e).toString()+'"></block>'}(200,80),toolbox:g(b(p.default.catCommands(),S+_("studio_setSprite")+_("studio_setBackground")+_("studio_setDroidSpeed")+_("studio_setMap")+_("studio_playSound")+_("studio_addCharacter")+_("studio_setItemSpeed")+_("studio_addPoints")+_("studio_removePoints")+_("studio_endGame"))+b(p.default.catEvents(),_("when_run")+_("studio_whenUp")+_("studio_whenDown")+_("studio_whenLeft")+_("studio_whenRight")+_("studio_whenGetCharacter")+_("studio_whenGetAllCharacters")+_("studio_whenGetAllCharacterClass")+_("studio_whenTouchObstacle"))),callouts:[{id:"playlab:hoc2015_blockly_15:finishButton",element_id:"#finishButton",on:"finishButtonShown",qtip_config:{content:{text:p.default.calloutFinishButton()},position:{my:"center left",at:"center right"}}},{id:"playlab:hoc2015_blockly_15:categories",element_id:".blocklyTreeRoot:visible",qtip_config:{content:{text:p.default.calloutBlocklyCategories()},position:{my:"top left",at:"bottom right",adjust:{x:-10,y:0}}}}]})}},[3302]);